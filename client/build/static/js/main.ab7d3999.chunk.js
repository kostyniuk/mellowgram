(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){e.exports=a(161)},114:function(e,t,a){},138:function(e,t){},144:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),s=a(30),o=a(5),i=a(94),u=a(1),m={isAuthenticated:!1,id:null,bio:null,username:null,based_in:null,email:null,fullname:null,number_of_posts:null,occupation:null,phone_number:null,picture:null,interests:null,ready:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,id:t.payload.id,bio:t.payload.bio,username:t.payload.username,based_in:t.payload.based_in,email:t.payload.email,fullname:t.payload.fullname,number_of_posts:t.payload.number_of_posts,occupation:t.payload.occupation,phone_number:t.payload.phone_number,picture:t.payload.picture,interests:t.payload.interests,ready:!0});case"UPDATE_PROFILE_PICTURE":return Object(u.a)(Object(u.a)({},e),{},{picture:t.payload.picture,ready:!0});case"UPDATE_PROFILE_INFO":return Object(u.a)(Object(u.a)({},e),{},{username:t.payload.username,based_in:t.payload.based_in,email:t.payload.email,fullname:t.payload.fullname,occupation:t.payload.occupation,phone_number:t.payload.phone_number,ready:!0});case"SET_UUID":return Object(u.a)(Object(u.a)({},e),{},{uuid:t.payload.uuid});default:return Object(u.a)(Object(u.a)({},e),{},{ready:!0})}},p={id:null,bio:null,username:null,based_in:null,email:null,fullname:null,number_of_posts:null,occupation:null,phone_number:null,picture:null,ready:!1,interests:null},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE":return Object(u.a)(Object(u.a)({},e),{},{id:t.payload.id,bio:t.payload.bio,username:t.payload.username,based_in:t.payload.based_in,email:t.payload.email,fullname:t.payload.fullname,number_of_posts:t.payload.number_of_posts,occupation:t.payload.occupation,phone_number:t.payload.phone_number,picture:t.payload.picture,ready:!0});case"UPDATE_BIO":return Object(u.a)(Object(u.a)({},e),{},{bio:t.payload.newBio});case"ADD_INTERESTS":var a=t.payload.interests;return Object(u.a)(Object(u.a)({},e),{},{interests:a});default:return Object(u.a)(Object(u.a)({},e),{},{ready:!0})}},E=a(16),b={user:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":var a=t.payload,n=a.posts,r=a.user,c={};return 0===n.length?{user:r}:(n.forEach((function(e){c[e.post_id]=e})),Object(u.a)(Object(u.a)({},c),{},{user:r}));case"ADD_POST":var l=t.payload.post,s={};return s[l.post_id]=l,Object(u.a)(Object(u.a)(Object(u.a)({},e),s),{},{user:e.user});case"LOAD_MORE_POSTS":var o=t.payload.posts,i={};return o.forEach((function(e){i[e.post_id]=e})),Object(u.a)(Object(u.a)(Object(u.a)({},e),i),{},{user:e.user});case"INCREMENT_NUMBER_OF_LIKES":var m=t.payload.id,d=e[m].number_of_likes,p=e[m];return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},m,Object(u.a)(Object(u.a)({},p),{},{number_of_likes:d+1})));case"DECREMENT_NUMBER_OF_LIKES":var f=t.payload.id,v=e[f].number_of_likes,O=e[f];return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},f,Object(u.a)(Object(u.a)({},O),{},{number_of_likes:v-1})));case"DELETE_POST":var g=t.payload.id;console.log({id:g,state:e});var _=Object(u.a)({},e);return delete _[g],console.log({final:_}),_;case"EDIT_POST":var h=t.payload,j=h.id,y=h.newCaption,N=Object(u.a)({},e);return N[j].caption=y,N;default:return e}},O={},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIKES":var a=t.payload.likes,n={};return 0===a.length?{loaded:!0}:(a.forEach((function(e){n[e.id]=e})),n);case"LOAD_MORE_LIKES":var r=t.payload.likes,c={};return r.forEach((function(e){c[e.id]=e})),Object(u.a)(Object(u.a)({},e),c);case"ON_LIKE":var l=t.payload,s=l.user_id,o=l.id,i=e[o].data,m=i.filter((function(e){return e.person_id!==t.payload.user_id}));return i.length===m.length?(m.push({person_id:+s,picture:t.payload.picture,username:t.payload.username}),Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},o,{id:o,data:m,alreadyLiked:!0}))):Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},o,{id:o,data:m,alreadyLiked:!1}));case"CREATE_LIKES_ON_ADD_POST":var d=t.payload.id,p={id:d,data:[],alreadyLiked:!1};return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},d,p));default:return e}},_={user:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FOLLOWING":var a=t.payload,n=a.users,r=a.user;return Object(u.a)(Object(u.a)({},e),{},{users:n,user:r});default:return e}},j={user:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FOLLOWED_BY":var a=t.payload,n=a.users,r=a.user;return Object(u.a)(Object(u.a)({},e),{},{users:n,user:r});case"ADD_FOLLOW":var c=t.payload.myPage,l=t.payload.producer,s=l.id,o=l.picture,i=l.username,m=e.users;return m.push({person_id:s,picture:o,username:i}),console.log({myPage:c}),Object(u.a)(Object(u.a)({},e),{},{users:m});case"DELETE_FOLLOW":var d=t.payload.myPage,p=t.payload.producer.id,f=e.users;return console.log({myPage:d}),f=f.filter((function(e){return e.person_id!==p})),Object(u.a)(Object(u.a)({},e),{},{users:f});default:return e}},N={user:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED_IN_FOLLOWING":var a=t.payload,n=a.users,r=a.user;return Object(u.a)(Object(u.a)({},e),{},{users:n,user:r});case"ADD_FOLLOW":var c=t.payload.consumer,l=c.id,s=c.picture,o=c.username,i=t.payload.myPage;if(i)return e;var m=e.users;return m.push({person_id:l,picture:s,username:o}),Object(u.a)(Object(u.a)({},e),{},{users:m});case"DELETE_FOLLOW":var d=t.payload.consumer.id,p=(t.payload.myPage,e.users);return p=p.filter((function(e){return e.person_id!==d})),Object(u.a)(Object(u.a)({},e),{},{users:p});default:return Object(u.a)(Object(u.a)({},e),{},{ready:!0})}},w=function(e){return new Promise((function(t){setTimeout(t,e)}))},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post_id",a={};return e?(e.forEach((function(e){a[e[t]]=e})),a):{}},T=function(e){return e.reduce((function(e,t){return t.unread+e}),0)},C={},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHATS":var a=t.payload,n=a.chats,r=a.messages,c=a.me,l=k(n,"room_id"),s=function(t){var a=Object(u.a)({},l);for(var n in a)a[n]=Object(u.a)(Object(u.a)({},a[n]),{},{unread:0});return t.length?(t.filter((function(e){return+e.sender_id!==+c})).filter((function(e){return!e.is_read})).map((function(e){Object.keys(a).includes(e.room_id.toString())&&a[e.room_id].unread++})),a):Object(u.a)(Object(u.a)({},e),a)},o=s(r);return Object(u.a)(Object(u.a)({},e),o);case"ADD_MESSAGE":var i=t.payload,m=i.info,d=i.me,p=JSON.parse(JSON.stringify(e));return p[m.roomId].latestMessage={message_id:m.messageId,room_id:m.roomId,sender_id:m.senderId,context:m.context,send_at:m.date,is_read:!0},+d.id!==+m.senderId&&(p[m.roomId].unread+=1),Object(u.a)(Object(u.a)({},e),p);case"ADD_CHAT":var f=t.payload.chat,E=k([f],"room_id");return Object(u.a)(Object(u.a)({},e),E);case"RESET_UNREAD_COUNTER":var b=t.payload.chatId,v=JSON.parse(JSON.stringify(e));return v[b].unread=0,Object(u.a)(Object(u.a)({},e),v);default:return e}},x=a(103),D=a(24),A=a(45),L=a(95),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message";if(!e)return null;if("chat"===t){var a=new Date(e),n=new Date;if(a.getFullYear()!==n.getFullYear())return"".concat(a.getDate(),".").concat(a.getMonth(),".").concat(a.getFullYear);if(n.getDate()-7>a.getDate()){var r=a.getMonth();return"".concat(a.getDate(),".").concat(1===r.toString().length?"0".concat(r):r)}if(n.getDay()!==a.getDay())return L.a[a.getDay()]}var c=e.split("T")[1].split(".")[0].split(":").slice(0,2),l=c.map((function(e,t){return 0===t?(Number(e)+6).toString():e}));return l.join(":")},R=function(e){return e.reduce((function(e,t){var a={},n={};a.day=new Date(t.date).getDate(),a.month=new Date(t.date).getMonth(),a.year=new Date(t.date).getFullYear();var r=e[e.length-1];return 0===e.length?[].concat(Object(D.a)(e),[{type:"separator",date:"".concat(a.day," ").concat(A.a[a.month])},t]):(n.day=new Date(r.date).getDate(),n.month=new Date(r.date).getMonth(),n.year=new Date(r.date).getFullYear(),n.day!==a.day?[].concat(Object(D.a)(e),[{type:"separator",room_id:t.room_id,date:"".concat(a.day," ").concat(A.a[a.month])},t]):n.month!==a.month?[].concat(Object(D.a)(e),[{type:"separator",date:"".concat(a.day," ").concat(A.a[a.month])},t]):n.year!==a.year?[].concat(Object(D.a)(e),[{type:"separator",date:"".concat(a.day," ").concat(A.a[a.month]," ").concat(a.year)},t]):[].concat(Object(D.a)(e),[t]))}),[])},M={},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MESSAGES":var a=t.payload,n=a.messages,r=a.chats,c=n.sort((function(e,t){return e.message_id-t.message_id})).map((function(e){return{message_id:e.message_id,room_id:e.room_id,from:e.sender_id,text:e.context,date:e.send_at}})),l=r.map((function(e){var t=c.filter((function(t){return+t.room_id===+e.room_id}));return{room_id:+e.room_id,username:e.username,picture:e.picture,messages:t}})),s=l.map((function(e){return e.messages=R(e.messages),e}));s=s.map((function(e){return e.messages=e.messages.map((function(e){return e.type?e:Object(u.a)(Object(u.a)({},e),{},{date:P(e.date,"message")})})),e}));var o=k(s,"room_id");return Object(u.a)(Object(u.a)({},e),o);case"ADD_MESSAGE":var i=t.payload.info,m=Object(u.a)({},e);return m[i.roomId].messages.push({message_id:i.messageId,room_id:i.roomId,from:i.senderId,text:i.context,date:i.date}),Object(u.a)(Object(u.a)({},e),m);case"ADD_CHAT":var d=t.payload.chat,p=(d.latestMessage,d.unread,d.person_id,Object(x.a)(d,["latestMessage","unread","person_id"]));p.messages=[];var f=k([p],"room_id");return Object(u.a)(Object(u.a)({},e),f);default:return e}},F={ids:[]},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ONLINE":var a=t.payload.onlineIds;return console.log({onlineIds:a}),Object(u.a)(Object(u.a)({},e),{},{ids:a});default:return e}},B={},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HOME_POSTS":var a=t.payload,n=a.posts,r=a.likes,c={};return n.forEach((function(e){var t=r.filter((function(t){return t.id===e.post_id}))[0];c[e.post_id]=Object(u.a)(Object(u.a)({},e),{},{likes:t})})),Object(u.a)(Object(u.a)({},e),c);case"LIKE_POST_HOME":var l,s=t.payload,o=s.post,i=s.me,m=e[o],d=m.likes.alreadyLiked;return d?((l=Object(u.a)({},m)).number_of_likes--,l.likes.data=l.likes.data.filter((function(e){return e.person_id!==i.id}))):((l=Object(u.a)({},m)).number_of_likes++,l.likes.data.push({person_id:i.id,picture:i.picture,username:i.username})),l.likes.alreadyLiked=!l.likes.alreadyLiked,Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},o,l));default:return e}},W=Object(s.c)({loggedInUser:d,loggedInFollows:S,currentPage:f,posts:v,likes:g,following:h,followedBy:y,chats:I,messages:U,onlineUsers:H,homePosts:G}),J=(a(114),a(3)),K=a.n(J),z=a(7),V=a(4),q=a(15),Y=a(12),X=function(e){return{type:"UPDATE_PROFILE_PICTURE",payload:{picture:e}}},Q=function(e){return{type:"INCREMENT_NUMBER_OF_LIKES",payload:{id:e}}},Z=function(e){return{type:"DECREMENT_NUMBER_OF_LIKES",payload:{id:e}}},$=function(e){return{type:"CREATE_LIKES_ON_ADD_POST",payload:{id:e}}},ee=function(e){return{type:"DELETE_POST",payload:{id:e}}},te=function(e,t){return{type:"EDIT_POST",payload:{id:e,newCaption:t}}},ae=function(e){return{type:"SET_FOLLOWING",payload:{users:e.users,user:e.user}}},ne=function(e){return{type:"SET_FOLLOWED_BY",payload:{users:e.users,user:e.user}}},re=function(e){return{type:"ADD_MESSAGE",payload:{info:e.info,me:e.me}}},ce=function(e){return{type:"SET_HOME_POSTS",payload:{posts:e.posts,likes:e.likes}}},le=function(){var e=Object(n.useState)(!1),t=Object(V.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),l=Object(V.a)(c,2),s=l[0],o=l[1];return{loading:a,error:s,request:Object(n.useCallback)(function(){var e=Object(z.a)(K.a.mark((function e(t){var a,n,c,l,s=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{method:"GET"},n=s.length>2?s[2]:void 0,e.prev=2,o(!1),r(!0),e.next=7,fetch(t,a,n);case 7:return c=e.sent,e.next=10,c.json();case 10:if(!(l=e.sent).success){e.next=13;break}return e.abrupt("return",l);case 13:return o(l.msg),e.abrupt("return",l);case 17:e.prev=17,e.t0=e.catch(2),o(e.t0),console.log(e.t0);case 21:return e.prev=21,r(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,17,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[])}},se=function(){var e=Object(o.b)(),t=Object(n.useState)(!0),a=Object(V.a)(t,2),r=a[0],c=a[1],l=le(),s=(l.error,l.request),i=Object(n.useCallback)(Object(z.a)(K.a.mark((function t(){var a,n,r,l,o,i,u,m,d,p,f,E,b,v,O,g;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/whoami");case 3:if(!(a=t.sent).success){t.next=17;break}return t.next=7,s("/api/user/".concat(a.data.username));case 7:return n=t.sent,r=a.data,l=r.id,o=r.username,t.next=11,s("/api/interest/".concat(o));case 11:i=t.sent,u=i.interests,m=n.info,d=m.based_in,p=m.bio,f=m.email,E=m.fullname,b=m.number_of_posts,v=m.occupation,O=m.phone_number,g=m.picture,e({type:"AUTH_USER",payload:{id:(_={id:l,bio:p,username:o,based_in:d,email:f,fullname:E,number_of_posts:b,occupation:v,phone_number:O,picture:g,interests:u}).id,bio:_.bio,username:_.username,based_in:_.based_in,email:_.email,fullname:_.fullname,number_of_posts:_.number_of_posts,occupation:_.occupation,phone_number:_.phone_number,picture:_.picture,interests:_.interests}}),t.next=18;break;case 17:e({type:"NOT_AUTH_USER"});case 18:c(!1),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.log(t.t0);case 24:case"end":return t.stop()}var _}),t,null,[[0,21]])}))),[s,e]);return Object(n.useEffect)((function(){i()}),[i]),{loading:r}},oe=(a(75),a(61),a(40),function(e){var t=e.form,a=e.changeHandler,n=e.submitHandler,c=e.err;return r.a.createElement("div",{className:"containerInput"},r.a.createElement("div",{className:"image"},r.a.createElement("h1",null,"Welcome To ",r.a.createElement("span",{className:"welcome"},"Mellowgram"))),r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"txt","aria-describedby":"helpId",value:t.username,onChange:a})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"txt",value:t.password,onChange:a})),r.a.createElement("a",{className:"fp",href:"/accounts/password/reset"},"Forgot Password?"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn green",onClick:n},"Login"),c&&r.a.createElement("h4",{className:"fp login-error"},c),r.a.createElement("hr",null),r.a.createElement("div",{className:"login"},"Or login with"),r.a.createElement("div",{className:"links"},r.a.createElement("div",{className:"google"},r.a.createElement("i",{className:"fa fa-google"},r.a.createElement("span",null,"Google"))),r.a.createElement("div",{className:"facebook"},r.a.createElement("i",{className:"fa fa-facebook-f"},r.a.createElement("span",null,"Facebook"))),r.a.createElement("div",{className:"instagram",onClick:function(){return console.log("instagram")}},r.a.createElement("i",{className:"fa fa-instagram"},r.a.createElement("span",null,"Instagram")))),r.a.createElement("div",{className:"signup"},"Don't have an account? \u200b",r.a.createElement("a",{href:"/signup"},"Sign up"))))}),ie=a(19),ue=a.n(ie),me=(a(144),function(e){var t=e.options,a=e.isOpen,n=e.toggleOpen,c=e.selected,l=e.setSelected;return r.a.createElement("div",{className:"dropdown".concat(a?" open":""),onClick:n,tabIndex:"0"},r.a.createElement("span",{className:"current"},c),r.a.createElement("div",{className:"list"},r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t,className:"option".concat(e.text===c?" selected":""),"data-value":e.value,"data-display-text":e.display,onClick:function(){return l(e.text)}},e.text)})))))}),de=function(e){var t=e.id,a=(e.label,e.defaultVal),c=e.options,l=Object(Y.g)(),s=le(),o=(s.error,s.request),i=Object(n.useState)(!1),u=Object(V.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(""),f=Object(V.a)(p,2),E=f[0],b=f[1],v=function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/api/logout");case 2:e.sent,l.push("/"),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"Account"===E&&"/account"!==l.location.pathname&&(b(""),l.push("/account")),"Log Out"===E&&v(),r.a.createElement("div",{className:"fieldset"},r.a.createElement("div",{className:"form-element a-header"},r.a.createElement("span",null,r.a.createElement("select",{id:t},c.map((function(e,t){return r.a.createElement("option",{value:e.value,key:t,"data-display-text":e.display},e.text)}))),r.a.createElement(me,{options:c,isOpen:m,toggleOpen:function(){return d(!m)},selected:a,setSelected:b}))))},pe=(a(146),function(e){var t=e.size,a=e.status,n=e.content,c=e.place;return r.a.createElement("div",{style:{marginLeft:c&&"-5px",marginBottom:c&&"15px"}},r.a.createElement("span",{className:"badge badge--".concat(a," badge--").concat(t)},n))}),fe=a(96),Ee=a(39),be=a.n(Ee),ve={control:function(e){return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:"inherit"})},option:function(e,t){var a=t.data,n=t.isDisabled,r=t.isFocused,c=t.isSelected,l=be()(a.color);return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:r?"rgb(23, 148, 67)":"#fff",color:r?"#fff":"#000",cursor:n?"not-allowed":"default",":active":Object(u.a)(Object(u.a)({},e[":active"]),{},{backgroundColor:!n&&(c?a.color:l.alpha(.3).css())})})},multiValue:function(e,t){var a=t.data,n=be()(a.color);return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:n.alpha(.2).css()})},multiValueLabel:function(e,t){var a=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:a.color})},multiValueRemove:function(e,t){var a=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:a.color,":hover":{backgroundColor:a.color,color:"white"}})}},Oe=function(e){return e.map((function(e){return{value:e.code,label:e.name}}))},ge=function(e){return e.map((function(e){return{value:e.regionCode,label:e.name}}))},_e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.toLowerCase();return"country"===a?Oe(e):"city"===a?ge(e):e},he=function(e){var t=e.handler,a=e.urlToFetch,n=e.type,c=e.noOptionsMessage,l=void 0===c?"":c,s=e.requestParams,o=void 0===s?{}:s,i=e.isDisabled,m=void 0!==i&&i,d=le().request,p=null,f=function(){var e=Object(z.a)(K.a.mark((function e(t){var r,c,l,s;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e,t){return new Promise((function(a){clearTimeout(p),p=setTimeout(Object(z.a)(K.a.mark((function e(){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)}))),e)}))},c=a+t,e.next=4,r(500,d.bind(null,c,o));case 4:return l=e.sent,n.includes("RAPID")&&(l=_e(l.data,n.split("RAPID_API_")[1])),s=l.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{color:"grey"})})),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(fe.a,{isDisabled:m,placeholder:"Search...",cacheOptions:!0,styles:ve,noOptionsMessage:function(){return l},loadOptions:f,onChange:t})},je=(a(147),[{text:"Account",value:"account",selected:!1},{text:"Log Out",value:"logout",selected:!1}]),ye=function(e){var t=e.handler;return r.a.createElement("div",{className:"hamburger",onClick:t},r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:"line"}))},Ne=function(){var e=Object(Y.g)(),t=Object(n.useState)(!1),a=Object(V.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),i=Object(V.a)(s,2),u=i[0],m=i[1],d=Object(o.c)((function(e){return e.loggedInUser})),p=Object.values(Object(o.c)((function(e){return e.chats}))),f=T(p);return u&&e.push("/".concat(u)),r.a.createElement("div",null,r.a.createElement("nav",{className:"header-nav"},r.a.createElement(ye,{handler:function(){l((function(e){return!e}))}}),r.a.createElement("div",{className:"logo"},r.a.createElement(q.b,{to:"/"},"Mellowgram")),r.a.createElement("div",{className:"HEADER__search"},r.a.createElement("ul",{className:"nav-search"},r.a.createElement("li",{className:"nav-item search-field"},r.a.createElement(he,{handler:function(e){m(e.value)},type:"HEADER",urlToFetch:"/api/findUser/",noOptionsMessage:"No such user"})))),r.a.createElement("ul",{className:c?"nav-items show":"nav-items"},r.a.createElement("li",{className:c?"nav-item fade open":"nav-item"},d.isAuthenticated?r.a.createElement(q.b,{to:"/home"},r.a.createElement("div",{className:"Header__direct"},r.a.createElement("i",{className:"fa fa-home","aria-hidden":"true"}))):r.a.createElement(q.b,{to:"/about"},"About us")),r.a.createElement("li",{className:c?"disabled":""},"|"),r.a.createElement("li",{className:c?"nav-item fade open":"nav-item"},d.isAuthenticated?r.a.createElement(q.b,{to:"/direct"},r.a.createElement("div",{className:"Header__direct"},r.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}),f?r.a.createElement(pe,{place:"header",size:"smaller",status:"danger",content:T(p)}):"")):r.a.createElement(q.b,{to:"/login"},"Login")),r.a.createElement("li",{className:c?"nav-item fade open":"nav-item"},d.isAuthenticated?r.a.createElement(de,{id:"settings",label:"Settings",defaultVal:"Settings",options:je}):r.a.createElement(q.b,{to:"/signup"},"Sign up")))))},Se=function(){var e=Object(Y.g)(),t=Object(n.useState)({username:"",password:""}),a=Object(V.a)(t,2),c=a[0],l=a[1],s=le(),o=(s.loading,s.error),i=s.request,m=function(){var t=Object(z.a)(K.a.mark((function t(){return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({username:"",password:""}),t.next=3,i("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:if(!t.sent.success){t.next=7;break}return e.push("/"),t.abrupt("return",window.location.reload(!0));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(Ne,null),r.a.createElement("div",null,r.a.createElement(oe,{err:o,form:c,changeHandler:function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},a,n))}))},submitHandler:m})))},we=function(e){var t=e.err,a=e.form,n=e.changeHandler,c=e.submitHandler;return r.a.createElement("div",{className:"containerInput"},r.a.createElement("div",{className:"image"},r.a.createElement("h1",null,"Welcome To ",r.a.createElement("span",{className:"welcome"},"Mellowgram"))),r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,"Sign up to meet new friends."),r.a.createElement("div",{className:"login"},"Login with"),r.a.createElement("div",{className:"links links-signup"},r.a.createElement("div",{className:"google"},r.a.createElement("i",{className:"fa fa-google"},r.a.createElement("span",null,"Google"))),r.a.createElement("div",{className:"facebook"},r.a.createElement("i",{className:"fa fa-facebook-f"},r.a.createElement("span",null,"Facebook"))),r.a.createElement("div",{className:"instagram",onClick:function(){return console.log("instagram")}},r.a.createElement("i",{className:"fa fa-instagram"},r.a.createElement("span",null,"Instagram")))),r.a.createElement("span",null,"OR"),r.a.createElement("div",{className:"form-group form-group-signup"},r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"email",id:"txt","aria-describedby":"helpId",value:a.email,onChange:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Full Name"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"fullName",id:"txt",value:a.fullName,onChange:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"txt",value:a.username,onChange:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"txt",value:a.password,onChange:n})),r.a.createElement("button",{type:"button",className:"btn green",onClick:c},"Sign up"),t&&r.a.createElement("h4",{className:"fp login-error"},t),r.a.createElement("div",{className:"signup signup-signup"},"Have an account? \u200b",r.a.createElement("a",{href:"/login"},"Log in"))))},ke=function(){var e=Object(Y.g)(),t=Object(n.useState)({email:"",fullName:"",username:"",password:""}),a=Object(V.a)(t,2),c=a[0],l=a[1],s=le(),o=s.loading,i=s.error,m=s.request;console.log({form:c}),console.log({loading:o,error:i});var d=function(){var t=Object(z.a)(K.a.mark((function t(){var a;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({email:"",fullName:"",username:"",password:""}),t.next=3,m("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:if(a=t.sent,console.log({responce:a}),!a.success){t.next=7;break}return t.abrupt("return",e.push("/login"));case 7:return t.abrupt("return");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(Ne,{authorized:{isAuthenticated:!1}}),r.a.createElement(we,{err:i,form:c,changeHandler:function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},a,n))}))},submitHandler:d}))},Te=(a(148),function(){return r.a.createElement("div",{className:"nf"},r.a.createElement("div",null,r.a.createElement(Ne,null)),r.a.createElement("div",{className:"not-available"},r.a.createElement("h2",null," Sorry, this page isn't available."),r.a.createElement("div",{className:"not-available-detail"},"The link you followed may be broken, or the page may have been removed. \u200b",r.a.createElement("a",{href:"/"},"Go back to Mellowgram."))))}),Ce=a(72),Ie=(a(149),function(e){var t=e.username,a=e.picture,n=e.context;return r.a.createElement("div",{className:"toast_container"},r.a.createElement("div",{className:"toast_title"},r.a.createElement("img",{src:a,className:"toast__img"}),r.a.createElement("h3",null,t)),r.a.createElement("div",{className:"toast_message"},r.a.createElement("p",null,n)))}),xe=function(e){var t=e.params,a=t.year,n=t.company,c=t.profession,l=t.achievements;return r.a.createElement("div",{className:"card-item","data-year":a},r.a.createElement("div",{className:"card-item-title"},c," ",r.a.createElement("span",null,n)),r.a.createElement("div",{className:"card-item-desc"},l))},De=function(e){var t=e.experience;return r.a.createElement("div",{className:"card-timeline"},t.map((function(e){return r.a.createElement(xe,{key:e.id,params:e})})))},Ae=a(18);a(90);var Le=function(e){var t=e.setSelectedImg,a=[{id:1,url:"https://as01.epimg.net/futbol/imagenes/2019/03/14/champions/1552569020_031070_1552569560_noticia_normal.jpg"},{id:2,url:"/api/public/uploads/user_dloading.jpg"},{id:3,url:"/api/public/uploads/N6NCsEnf_6U9RvrfYNXpb.jpg"},{id:4,url:"/api/public/uploads/user_tsunamipapi.jpg"},{id:5,url:"/api/public/uploads/user_dloading.jpg"},{id:6,url:"/api/public/uploads/N6NCsEnf_6U9RvrfYNXpb.jpg"},{id:7,url:"/api/public/uploads/user_tsunamipapi.jpg"},{id:8,url:"https://as01.epimg.net/futbol/imagenes/2019/03/14/champions/1552569020_031070_1552569560_noticia_normal.jpg"}];return r.a.createElement("div",{className:"USER_INFO__picturesBar"},r.a.createElement("div",{className:"USER_INFO_picturesBar_header"},r.a.createElement("h3",{className:"USER_INFO__picturesBar__title"},"My pictures \u200b "),r.a.createElement("div",{className:"USER_INFO__picturesBar__add"},r.a.createElement("div",{className:"UPLOAD_btn_upload ADD_PICTURE"},r.a.createElement("input",{type:"file",id:"UPLOAD_PROFILE_PICTURE",name:""}),r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))),r.a.createElement("div",{className:"img-grid"},a&&a.map((function(e){return r.a.createElement(Ae.a.div,{className:"img-wrap",key:e.id,layout:!0,onClick:function(){return t(e.url)}},r.a.createElement(Ae.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}))}))))},Pe=function(e){var t=e.setSelectedImg,a=e.selectedImg;return r.a.createElement(Ae.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(Ae.a.img,{src:a,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}),r.a.createElement("div",{className:"modal_actions"},r.a.createElement("label",null,r.a.createElement("div",{className:"update_picture"},r.a.createElement("input",{type:"file"}),r.a.createElement("i",{class:"fa fa-refresh delete_picture_button","aria-hidden":"true"}),r.a.createElement("p",null,"\u200b Load new picture"))),r.a.createElement("div",{className:"remove_picture"},r.a.createElement("i",{class:"fa fa-trash delete_picture_button","aria-hidden":"true"}),r.a.createElement("p",null,"\u200b Remove picture"))))};a(66);var Re,Me=function(e){var t=e.id,a=e.modal,c=e.username,l=e.fullname,s=e.picture,i=e.placeholder,u=e.handleEdit,m=Object(o.b)(),d=Object(n.useState)(i||""),p=Object(V.a)(d,2),f=p[0],E=p[1],b=le().request,v=function(){var e=Object(z.a)(K.a.mark((function e(){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=6;break}return e.next=3,b("/api/post/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:f})});case 3:n=e.sent,E(""),n.success&&(m({type:"ADD_POST",payload:{post:{post:n.rows}.post}}),m($(n.rows.post_id)));case 6:if(!a){e.next=12;break}return e.next=9,b("/api/post/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:f})});case 9:e.sent.success&&m(te(t,f)),u(null);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"POST__body POSTINPUT "},r.a.createElement("div",{className:"POST__title"},r.a.createElement("div",{className:"POST__title__left"},r.a.createElement("img",{src:s,alt:"avatar",className:"POST__profile_picture",style:{marginTop:"0"}}),r.a.createElement("div",{className:"POST__header"},r.a.createElement("h3",{className:"POST__fullname"},l),r.a.createElement("h4",{className:"POST__username"},"@",c)))),r.a.createElement("div",{className:"POST__context"},r.a.createElement("textarea",{value:f,name:"message",autoFocus:!0,id:"message",rows:"4",className:"form-input",onChange:function(e){return E(e.target.value)}}),r.a.createElement("button",{className:"green",onClick:v},"Submit")))},Ue=function(e){var t=e.bio,a=e.closeModal,c=le().request,l=Object(o.b)(),s=Object(n.useState)(t||""),i=Object(V.a)(s,2),u=i[0],m=i[1],d=function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/api/user/bio",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bio:u})});case 2:e.sent.success&&(console.log("Bio updated"),a(null),l({type:"UPDATE_BIO",payload:{newBio:{newBio:u}.newBio}}),m(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("textarea",{value:u,name:"message",autoFocus:!0,id:"message",rows:"4",className:"form-input",onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{className:"green",onClick:d},"Submit"))},Fe=function(e){var t=e.handleEdit,a=e.info,n=e.isBio;return console.log({info:a,isBio:n}),r.a.createElement(Ae.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(Ae.a.div,{className:"LIKESMODAL_CONTENT EDIT",initial:{y:"-100vh"},animate:{y:0}},n&&r.a.createElement(Ue,{bio:a,closeModal:t}),!n&&r.a.createElement(Me,{id:a.id,modal:!0,username:a.username,fullname:a.fullname,picture:a.picture,placeholder:a.text,handleEdit:t})))},He=(a(151),a(91),function(e){var t=e.id,a=e.username,c=e.picture,l=e.alreadyFollowed,s=le().request,i=Object(Y.g)(),u=Object(n.useState)(l),m=Object(V.a)(u,2),d=m[0],p=m[1],f=Object(o.c)((function(e){return e.loggedInUser}),(function(e,t){return ue()(e,t)})),E=(Object(o.c)((function(e){return e.currentPage}),(function(e,t){return ue()(e,t)})),Object(o.b)(),function(){var e=Object(z.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log({following:d,id:t}),!d){e.next=8;break}return e.next=4,s("/api/follow/".concat(t),{method:"DELETE"});case 4:e.sent.success&&p((function(e){return!e})),e.next=13;break;case 8:return e.next=10,s("/api/follow/".concat(t),{method:"POST"});case 10:a=e.sent,console.log({responce:a}),a.success&&p((function(e){return!e}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),b="green";return d&&(b+=" LIKESMODAL_BTN_followed"),r.a.createElement("div",{className:"LIKESMODAL_ROW"},r.a.createElement("div",{className:"LIKESMODAL__title"},r.a.createElement("div",{className:"LIKESMODAL__title__left",onClick:function(){i.push("/".concat(a))}},r.a.createElement("img",{src:c,alt:"avatar",className:"LIKESMODAL__profile_picture",style:{marginTop:"0px"}}),r.a.createElement("div",{className:"LIKESMODAL__header"},r.a.createElement("h3",{className:"LIKESMODAL__fullname"},a))),t!==f.id&&r.a.createElement("div",{className:"LIKESMODAL__title__right"},r.a.createElement("button",{className:b,onClick:E},d?"Following":"Follow"))))}),Be=function(e){var t=e.closeHandler,a=e.info,n=e.title,c=void 0===n?"test":n,l=Object(o.c)((function(e){return e.loggedInFollows}));console.log({info:a});return r.a.createElement(Ae.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(Ae.a.div,{className:"LIKESMODAL_CONTENT",initial:{y:"-100vh"},animate:{y:0}},r.a.createElement("div",{className:"LIKES_MODAL_TITLE"},r.a.createElement("h3",null,c),r.a.createElement("hr",{className:"hr"})),a.data&&a.data.map((function(e){return r.a.createElement(He,{key:e.person_id,id:e.person_id,picture:e.picture,username:e.username,alreadyFollowed:(t=e.person_id,l.users.map((function(e){return e.person_id})).includes(t))});var t}))))},Ge=(a(152),function(){var e=Object(Y.g)(),t=Object(o.c)((function(e){return e.currentPage})),a=Object(o.c)((function(e){return e.loggedInUser})),n=t.interests;console.log({interests:n,currentPage:t});return n?r.a.createElement("div",{className:"USER_INFO__followingBar"},r.a.createElement("div",{className:"INTEREST_BAR_CONTAINER"},r.a.createElement("div",{className:"INTEREST_BAR_TITLE"},n.length||a.id!==t.id?r.a.createElement("h3",null,"Interests"):null),r.a.createElement("div",{className:"INTEREST_BAR_BODY"},n.length?r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{style:{backgroundColor:e.interest_color,opacity:".8",color:"black"}},"".concat(e.interest_emoji," ").concat(e.interest_name))}))):null,!n.length&&a.id===t.id&&r.a.createElement("div",{className:"INTEREST_BAR_NO_INTERESTS"},r.a.createElement("h3",null,"No interests yet"),r.a.createElement("i",{class:"fa fa-plus","aria-hidden":"true",onClick:function(){e.push("/account")}}))))):r.a.createElement("div",{className:"USER_INFO__followingBar"})}),We=function(e){var t=e.startMessagingHandler,a=e.setOpenDialog,c=Object(Y.g)(),l=le().request,s=Object(o.b)(),i=Object(o.c)((function(e){return e.loggedInUser})),m=Object(o.c)((function(e){return e.loggedInFollows})),d=Object(o.c)((function(e){return e.following})),p=Object(o.c)((function(e){return e.followedBy})),f=Object(n.useState)({}),E=Object(V.a)(f,2),b=E[0],v=E[1],O=Object(n.useState)(null),g=Object(V.a)(O,2),_=g[0],h=g[1],j=Object(n.useState)(!1),y=Object(V.a)(j,2),N=y[0],S=y[1],w=Object(n.useState)(!1),k=Object(V.a)(w,2),T=k[0],C=k[1],I=Object(n.useState)(null),x=Object(V.a)(I,2),D=x[0],A=x[1],L=Object(n.useRef)(!1),P=Object(n.useRef)(!0),R="green",M=Object(o.c)((function(e){return e.currentPage}),(function(e,t){return P.current=ue()(e,t),ue()(e,t)}));Object.values(Object(o.c)((function(e){return e.chats}),(function(e,t){var a=Object.values(e),n=Object.values(t);return a.map((function(e,t){ue()(e,n[t])||(v({username:e.username,picture:e.picture,context:e.latestMessage.context,chatId:e.room_id}),L.current=!1)})),ue()(e.id,t.id)})));Object(n.useEffect)((function(){m.user&&function(e){var t=m.users.map((function(e){return e.person_id}));S(t.includes(e))}(M.id)}),[m]);var U=Object(n.useCallback)(function(){var e=Object(z.a)(K.a.mark((function e(t,a){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/follow/followers/".concat(t.username),{},a);case 2:(n=e.sent).success&&s(ne({users:n.data,user:t.username}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[s,ne,l]),F=Object(n.useCallback)(function(){var e=Object(z.a)(K.a.mark((function e(t,a){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/follow/following/".concat(t.username),{},a);case 2:(n=e.sent).success&&s(ae({users:n.data,user:t.username}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,s,ae]),H=Object(n.useCallback)(function(){var e=Object(z.a)(K.a.mark((function e(t,a){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/interest/".concat(t.username),{},a);case 2:(n=e.sent).success&&s({type:"ADD_INTERESTS",payload:{interests:{interests:n.interests}.interests}});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,s]),B=function(){var e=Object(z.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=7;break}return e.next=3,l("/api/follow/".concat(M.id),{method:"DELETE"});case 3:e.sent.success&&(s({type:"DELETE_FOLLOW",payload:{producer:(a={producer:{id:i.id,username:i.username,picture:i.picture},consumer:{id:M.id,picture:M.picture,username:M.username},myPage:i.id===M.id}).producer,consumer:a.consumer,myPage:a.myPage}}),ae((function(e){return!e}))),e.next=11;break;case 7:return e.next=9,l("/api/follow/".concat(M.id),{method:"POST"});case 9:e.sent.success&&(s({type:"ADD_FOLLOW",payload:{producer:(t={producer:{id:i.id,username:i.username,picture:i.picture},consumer:{id:M.id,picture:M.picture,username:M.username},myPage:i.id===M.id}).producer,consumer:t.consumer,myPage:t.myPage}}),S((function(e){return!e})));case 11:case"end":return e.stop()}var t,a}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=new AbortController,t=e.signal;return M.id&&!P.current&&(U(M,t),F(M,t),H(M,t)),function(){e.abort()}}),[M.id]);var G,W=Object(n.useState)("is-active"),J=Object(V.a)(W,2),q=J[0],X=J[1],Q=Object(n.useState)(""),Z=Object(V.a)(Q,2),$=Z[0],ee=Z[1],te=Object(n.useState)(""),re=Object(V.a)(te,2),ce=re[0],se=re[1],oe=Object(n.useState)("card"),ie=Object(V.a)(oe,2),me=ie[0],de=ie[1],fe=Object(n.useState)("card-section is-active"),Ee=Object(V.a)(fe,2),be=Ee[0],ve=Ee[1],Oe=Object(n.useState)("card-section"),ge=Object(V.a)(Oe,2),_e=ge[0],he=ge[1],je=Object(n.useState)("card-section"),ye=Object(V.a)(je,2),Ne=ye[0],Se=ye[1],we=Object(n.useState)("#about"),ke=Object(V.a)(we,2),Te=ke[0],xe=ke[1],Ae=function(e){var t=e.target.getAttribute("data-section");de("#about"!==t?function(e){return e+" is-active"}:function(e){return e.replace(/is-active/g," ")}),xe(t),ve("card-section"),Se("card-section"),he("card-section"),X(""),ee(""),se(""),"#experience"===t?(he((function(e){return e+" is-active"})),ee("is-active")):"#about"===t?(ve((function(e){return e+" is-active"})),X("is-active")):(Se((function(e){return e+" is-active"})),se("is-active"))},Re=function(e){var t={};t.title=e.charAt(0).toUpperCase()+e.slice(1),"following"===e?A(Object(u.a)(Object(u.a)({},t),{},{data:d.users})):"followers"===e&&A(Object(u.a)(Object(u.a)({},t),{},{data:p.users}))};return N&&(R+=" LIKESMODAL_BTN_followed"),M&&p.user&&p.user===M.username&&d.user&&d.user===M.username?r.a.createElement("div",null,r.a.createElement("div",{className:"USER_INFO__container"},r.a.createElement(Ge,null),r.a.createElement("div",{className:"USER_INFO_CENTER"},i.id!==M.id&&r.a.createElement("div",{className:"USER_INFO_CENTER_TOP"},r.a.createElement("button",{className:R,onClick:B},N?"Following":"Follow"),r.a.createElement("button",{className:"green USER_INFO_MESSAGE",onClick:function(){t({me:i,other:M}),c.push("/direct")}},"Message")),r.a.createElement("div",{className:me,"data-state":Te},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-cover"}),r.a.createElement("img",{className:"card-avatar",src:M.picture,alt:"avatar"}),r.a.createElement("h1",{className:"card-fullname"},M.fullname),r.a.createElement("h2",{className:"card-jobtitle"},M.occupation)),r.a.createElement("div",{className:"card-main"},r.a.createElement("div",{className:be,id:"about"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-subtitle"},r.a.createElement("p",null,"ABOUT"),i.id===M.id&&r.a.createElement("i",{className:"fa fa-edit",onClick:function(){C(!0)}})),r.a.createElement("p",{className:"card-desc"},M.bio||"The user hasn't provided bio information")),r.a.createElement("div",{className:"card-social"},r.a.createElement("a",{href:"#"},r.a.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M15.997 3.985h2.191V.169C17.81.117 16.51 0 14.996 0c-3.159 0-5.323 1.987-5.323 5.639V9H6.187v4.266h3.486V24h4.274V13.267h3.345l.531-4.266h-3.877V6.062c.001-1.233.333-2.077 2.051-2.077z"}))),r.a.createElement("a",{href:"#"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{d:"M512 97.248c-19.04 8.352-39.328 13.888-60.48 16.576 21.76-12.992 38.368-33.408 46.176-58.016-20.288 12.096-42.688 20.64-66.56 25.408C411.872 60.704 384.416 48 354.464 48c-58.112 0-104.896 47.168-104.896 104.992 0 8.32.704 16.32 2.432 23.936-87.264-4.256-164.48-46.08-216.352-109.792-9.056 15.712-14.368 33.696-14.368 53.056 0 36.352 18.72 68.576 46.624 87.232-16.864-.32-33.408-5.216-47.424-12.928v1.152c0 51.008 36.384 93.376 84.096 103.136-8.544 2.336-17.856 3.456-27.52 3.456-6.72 0-13.504-.384-19.872-1.792 13.6 41.568 52.192 72.128 98.08 73.12-35.712 27.936-81.056 44.768-130.144 44.768-8.608 0-16.864-.384-25.12-1.44C46.496 446.88 101.6 464 161.024 464c193.152 0 298.752-160 298.752-298.688 0-4.64-.16-9.12-.384-13.568 20.832-14.784 38.336-33.248 52.608-54.496z"}))),r.a.createElement("a",{href:"#"},r.a.createElement("svg",{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M301 256c0 24.852-20.148 45-45 45s-45-20.148-45-45 20.148-45 45-45 45 20.148 45 45zm0 0"}),r.a.createElement("path",{d:"M332 120H180c-33.086 0-60 26.914-60 60v152c0 33.086 26.914 60 60 60h152c33.086 0 60-26.914 60-60V180c0-33.086-26.914-60-60-60zm-76 211c-41.355 0-75-33.645-75-75s33.645-75 75-75 75 33.645 75 75-33.645 75-75 75zm86-146c-8.285 0-15-6.715-15-15s6.715-15 15-15 15 6.715 15 15-6.715 15-15 15zm0 0"}),r.a.createElement("path",{d:"M377 0H135C60.562 0 0 60.563 0 135v242c0 74.438 60.563 135 135 135h242c74.438 0 135-60.563 135-135V135C512 60.562 451.437 0 377 0zm45 332c0 49.625-40.375 90-90 90H180c-49.625 0-90-40.375-90-90V180c0-49.625 40.375-90 90-90h152c49.625 0 90 40.375 90 90zm0 0"}))),r.a.createElement("a",{href:"#"},r.a.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M23.994 24v-.001H24v-8.802c0-4.306-.927-7.623-5.961-7.623-2.42 0-4.044 1.328-4.707 2.587h-.07V7.976H8.489v16.023h4.97v-7.934c0-2.089.396-4.109 2.983-4.109 2.549 0 2.587 2.384 2.587 4.243V24zM.396 7.977h4.976V24H.396zM2.882 0C1.291 0 0 1.291 0 2.882s1.291 2.909 2.882 2.909 2.882-1.318 2.882-2.909A2.884 2.884 0 002.882 0z"}))))),r.a.createElement("div",{className:_e,id:"experience"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-subtitle"},"WORK EXPERIENCE"),r.a.createElement(De,{experience:[{id:1,year:2021,company:"Spotify",profession:"JS Developer",achievements:"Developed new versions"},{id:2,year:2022,company:"Spotify",profession:"JS Developer",achievements:"New products"},{id:3,year:2023,company:"Spotify",profession:"JS Developer",achievements:"New app"}]}))),r.a.createElement("div",{className:Ne,id:"contact"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-subtitle"},"CONTACT"),r.a.createElement("div",{className:"card-contact-wrapper"},r.a.createElement("div",{className:"card-contact"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"}),r.a.createElement("circle",{cx:"12",cy:"10",r:"3"})),M.based_in||"Not provided"),r.a.createElement("div",{className:"card-contact card-contact-center"},r.a.createElement("svg",{className:"svg-middle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})),M.phone_number||"Not provided"),r.a.createElement("div",{className:"card-contact"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),r.a.createElement("path",{d:"M22 6l-10 7L2 6"})),M.email),r.a.createElement("button",{className:"green"},"WORK")))),r.a.createElement("hr",null),r.a.createElement("div",{className:"card-buttons"},r.a.createElement("button",{"data-section":"#about",className:q,onClick:Ae},"ABOUT"),r.a.createElement("button",{className:$,"data-section":"#experience",onClick:Ae},"EXPERIENCE"),r.a.createElement("button",{className:ce,"data-section":"#contact",onClick:Ae},"CONTACT")))),r.a.createElement("div",{className:"user_info_bottom"},r.a.createElement("div",{className:"user_info_bottom_followers"},r.a.createElement("button",{className:"green follow",onClick:function(){return Re("followers")}},"Followers"),r.a.createElement(pe,{size:"smaller",content:p.users.length,status:"default"})),r.a.createElement("div",{className:"user_info_bottom_followers"},r.a.createElement("button",{className:"green follow",onClick:function(){return Re("following")}},"Following"),r.a.createElement(pe,{size:"smaller",content:d.users.length,status:"default"})))),r.a.createElement(Le,{setSelectedImg:h}),_&&r.a.createElement(Pe,{selectedImg:_,setSelectedImg:h}),D&&r.a.createElement(Be,{info:D,closeHandler:A,title:D.title}),T&&r.a.createElement(Fe,{handleEdit:C,info:M.bio,isBio:!0}),Object.keys(b).length&&!L.current?(G=b,console.log("hree"),L.current=!0,Ce.b.dark(r.a.createElement(Ie,{username:G.username,context:G.context,picture:G.picture}),{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){return c.push("/direct")}}),void a(G.chatId)):null),r.a.createElement("div",null,r.a.createElement(Ce.a,{position:"top-center",autoClose:5e3,newestOnTop:!0,closeOnClick:!0,rtl:!1}))):r.a.createElement("div",null)},Je=a(53),Ke=function(e){var t=e.id,a=e.picture,c=e.fullname,l=e.username,s=e.text,i=e.numberOfLikes,m=e.likes,d=e.postedAt,p=e.showSettings,f=e.setSelectedLikes,E=e.deletePostHandler,b=e.editPostHandler,v=e.type,O=Object(o.b)(),g=Object(Y.g)(),_=Object(o.c)((function(e){return e.loggedInUser})),h=le().request,j=Object(n.useState)(null===m||void 0===m?void 0:m.alreadyLiked),y=Object(V.a)(j,2),N=y[0],S=y[1],w=N?"fa fa-heart liked":"fa fa-heart";Object(n.useEffect)((function(){S(null===m||void 0===m?void 0:m.alreadyLiked)}),[m]);var k=function(){var e=Object(z.a)(K.a.mark((function e(){var a,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=N?"DELETE":"POST",e.next=3,h("/api/like/".concat(t),{method:a});case 3:(null===(n=e.sent)||void 0===n?void 0:n.success)&&(v?O({type:"LIKE_POST_HOME",payload:{post:(r={post:t,me:_}).post,me:r.me}}):(O(N?Z(t):Q(t)),O({type:"ON_LIKE",payload:Object(u.a)(Object(u.a)({},_),{},{id:t})})),S((function(e){return!e})));case 5:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();return m?r.a.createElement("div",null,r.a.createElement("div",{className:"POST__body"},r.a.createElement("div",{className:"POST__title"},r.a.createElement("div",{className:"POST__title__left",onClick:function(){return g.push("/".concat(l))}},r.a.createElement("img",{src:a,alt:"avatar",className:"POST__profile_picture"}),r.a.createElement("div",{className:"POST__header"},r.a.createElement("h3",{className:"POST__fullname"},c),r.a.createElement("h4",{className:"POST__username"},"@",l))),p&&r.a.createElement("div",{className:"POST__title__right"},r.a.createElement("i",{className:"fa fa-remove","aria-hidden":"true",style:{color:"red"},onClick:E.bind(null,t)}),r.a.createElement("i",{className:"fa fa-edit","aria-hidden":"true",onClick:b.bind(null,{id:t,picture:a,username:l,fullname:c,text:s})}))),r.a.createElement("div",{className:"POST__context"},r.a.createElement("p",null,s),r.a.createElement("div",{className:"POST__actions"},r.a.createElement("div",{className:"POST__like_section"},r.a.createElement("div",{className:"POST__like_button"},r.a.createElement("i",{className:w,"aria-hidden":"true",onClick:k}),N?r.a.createElement("h4",null,"\u200b Liked"):r.a.createElement("h4",null,"\u200b Like \u200b")),r.a.createElement("h4",{className:"POST_number_of_likes"},i," Likes "),r.a.createElement("div",{className:"POST__liked_by"},r.a.createElement("h4",null,"Liked by: "),r.a.createElement("div",{className:"POST__liked_by_images",onClick:function(){return f(m)}},r.a.createElement("img",{src:m.data.length?m.data[0].picture:"/api/public/uploads/blank.jpg",alt:"avatar"}),r.a.createElement("img",{src:m.data.length>1?m.data[1].picture:"/api/public/uploads/blank.jpg",alt:"avatar"}),r.a.createElement("img",{src:m.data.length>2?m.data[2].picture:"/api/public/uploads/blank.jpg",alt:"avatar"})))),r.a.createElement("h4",{className:"POST__creation_time"},d))))):r.a.createElement("div",null)},ze=(a(153),function(){var e=Object(n.useRef)(!0),t=Object(n.useState)(!0),a=Object(V.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(null),i=Object(V.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(null),p=Object(V.a)(d,2),f=p[0],E=p[1],b=Object(o.b)(),v=le().request,O=Object(o.c)((function(e){return e.currentPage}),(function(t,a){return e.current=ue()(t,a),ue()(t,a)})),g=Object(o.c)((function(e){return e.loggedInUser}),(function(e,t){return ue()(e,t)})),_=Object.values(Object(o.c)((function(e){return e.posts}),(function(e,t){return ue()(e,t)}))).sort(),h=Object(o.c)((function(e){return e.likes}),(function(e,t){return ue()(e,t)})),j=function(){var e=Object(z.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/api/post/".concat(t),{method:"DELETE"});case 2:e.sent.success&&b(ee(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){console.log("editing",e.id),E(e)},N=Object(n.useState)(!1),S=Object(V.a)(N,2),k=S[0],T=S[1],C=Object(n.useRef)(0),I=Object(n.useCallback)(function(){var e=Object(z.a)(K.a.mark((function e(t){var a,n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return e.post_id})),n=a.map((function(e){return v("/api/like/".concat(e))})),e.next=4,Promise.all(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),x=Object(n.useCallback)(function(){var e=Object(z.a)(K.a.mark((function e(t){var a,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.id||k){e.next=11;break}return e.next=3,v("/api/post/".concat(O.username,"?limit=5&offset=0"),{},t);case 3:if(!(a=e.sent).success){e.next=11;break}return T(!0),b({type:"SET_POSTS",payload:{posts:(r={posts:a.posts,user:O.username}).posts,user:r.user}}),e.next=9,I(a.posts);case 9:n=e.sent,b({type:"SET_LIKES",payload:{likes:{likes:n}.likes}});case 11:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),[O.id]);Object(n.useEffect)((function(){var t=new AbortController,a=t.signal;return e.current||x(a),function(){t.abort()}}),[x]);var D=function(){var e=Object(z.a)(K.a.mark((function e(){var t,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C.current+=5,e.next=3,v("/api/post/".concat(O.username,"?limit=5&offset=").concat(C.current));case 3:return t=e.sent,e.next=6,I(t.posts);case 6:return a=e.sent,e.next=9,w(300);case 9:if(t.posts.length){e.next=12;break}return l(!1),e.abrupt("return");case 12:b({type:"LOAD_MORE_POSTS",payload:{posts:{posts:t.posts}.posts}}),b({type:"LOAD_MORE_LIKES",payload:{likes:{likes:a}.likes}});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return _[0]===O.username&&1===_.length&&c&&l(!1),null===_[0]&&c&&l(!1),_[_.length-1]!==O.username?r.a.createElement("div",null):Object.keys(h).length?r.a.createElement("div",{className:"FEED_CONTAINER"},r.a.createElement("div",{className:"FEED_SIDE"}),r.a.createElement("div",{className:"POSTS__container"},O.id===g.id&&r.a.createElement(Me,{picture:O.picture,fullname:O.fullname,username:O.username}),r.a.createElement("div",{className:"POSTS_INFINITE_SCROLL"},r.a.createElement(Je.a,{dataLength:_.length,next:D,hasMore:c,loader:r.a.createElement("h4",null,"Loading...")},_.reverse().slice(1).map((function(e){return r.a.createElement(Ke,{key:e.post_id,id:e.post_id,picture:O.picture,fullname:O.fullname,username:O.username,text:e.caption,numberOfLikes:e.number_of_likes,postedAt:e.created_at,showSettings:O.id===g.id,likes:h[e.post_id],loggedInfo:{user_id:g.id,username:g.username,picture:g.picture},setSelectedLikes:m,deletePostHandler:j,editPostHandler:y})})))),u&&r.a.createElement(Be,{closeHandler:m,info:u,title:"Likes"}),f&&r.a.createElement(Fe,{handleEdit:E,info:f})),r.a.createElement("div",{className:"FEED_SIDE"})):r.a.createElement("div",null)}),Ve=function(e){var t=e.match,a=e.startMessagingHandler,c=e.setOpenDialog,l=Object(o.b)(),s=t.params.username,i=Object(n.useState)(null),u=Object(V.a)(i,2),m=u[0],d=u[1],p=le(),f=p.loading,E=p.request,b=Object(n.useCallback)(Object(z.a)(K.a.mark((function e(){var t,a,n,r,c,o,i,u,m,p,f;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/user/".concat(s));case 2:(t=e.sent).success?(a=t.info,n=a.based_in,r=a.bio,c=a.email,o=a.fullname,i=a.number_of_posts,u=a.occupation,m=a.phone_number,p=a.picture,f=t.info.person_id,l({type:"SET_CURRENT_PAGE",payload:{id:(b={id:f,bio:r,username:s,based_in:n,email:c,fullname:o,number_of_posts:i,occupation:u,phone_number:m,picture:p}).id,bio:b.bio,username:b.username,based_in:b.based_in,email:b.email,fullname:b.fullname,number_of_posts:b.number_of_posts,occupation:b.occupation,phone_number:b.phone_number,picture:b.picture}})):d(void 0);case 4:case"end":return e.stop()}var b}),e)}))),[s,E,l]);return Object(n.useEffect)((function(){b()}),[s,b]),void 0===m?r.a.createElement(Te,null):f?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(Ne,null)),r.a.createElement(We,{startMessagingHandler:a,setOpenDialog:c}),r.a.createElement(ze,null))},qe=(a(154),a(92),a(102)),Ye=a(23),Xe=a(180),Qe=a(181),Ze=a(186),$e=a(179),et=a(182),tt=a(183),at=a(184),nt=a(185),rt=Object(qe.a)({typography:{fontFamily:["iCiel Gotham","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),ct=Object(Ye.a)((function(e){return{root:{border:"none",borderColor:"black"},body:{fontSize:14,backgroundColor:"rgb(44, 44, 44)",color:"rgb(177, 176, 176)"}}}))(Ze.a),lt=Object(Ye.a)((function(e){return{root:{border:"none",borderColor:"black"},body:{fontSize:14,backgroundColor:"rgb(44, 44, 44)",color:e.palette.common.white}}}))(Ze.a),st=Object(Ye.a)((function(e){return{root:{font:"iCiel Gotham","&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))($e.a),ot=Object(Xe.a)({table:{minWidth:200}}),it=function(e){var t,a=e.tab,n=e.data,c=e.handler,l=ot(),s=(t=n,Object.keys(t).map((function(e,a){return{field:e,value:t[e]}})));return r.a.createElement(Qe.a,{theme:rt},r.a.createElement(et.a,{component:tt.a},r.a.createElement(at.a,{className:l.table,"aria-label":"simple table"},r.a.createElement(nt.a,null,s.map((function(e){return r.a.createElement(st,{key:e.field},r.a.createElement(ct,{align:"left"},e.field),r.a.createElement(lt,{align:"left"},"overview"===a?e.value:r.a.createElement("input",{type:"Password"===e.field?"password":"text",id:"txt",name:e.field,value:e.value,onChange:c})))}))))))},ut=(a(155),function(){var e=Object(n.useState)(null),t=Object(V.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(V.a)(l,2),i=(s[0],s[1],Object(n.useState)(!1)),u=Object(V.a)(i,2),m=u[0],d=(u[1],Object(o.c)((function(e){return e.loggedInUser}))),p=d.username,f=(d.picture,Object(o.b)()),E=function(){var e=Object(z.a)(K.a.mark((function e(t){var n,r,l,s,o;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("profilePhoto",a),r=m?"DELETE":"POST",l="http://localhost:3000/api/user/".concat(p,"/addPicture"),m&&(l="http://localhost:3000/api/user/".concat(p,"/deletePicture")),e.next=8,fetch(l,{method:r,body:n});case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,f(X(o.src)),c(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{class:"UPLOAD_panel"},r.a.createElement("div",{class:"UPLOAD_button_outer"},a?r.a.createElement("div",{className:"newPictureBtns"},r.a.createElement("button",{className:"green",onClick:E},"Submit"),r.a.createElement("button",{className:"green red",onClick:function(e){e.preventDefault(),c(null)}},"Reset")):r.a.createElement("div",{class:"UPLOAD_btn_upload"},r.a.createElement("input",{type:"file",id:"UPLOAD_PROFILE_PICTURE",name:"",onChange:function(e){var t=e.target.files[0];c(t)}}),"Upload New Image"))))}),mt=function(e){var t=e.info,a=e.adjustedOverwiew;return r.a.createElement("div",{className:"settings-overview"},r.a.createElement("h1",null,"Account overview"),r.a.createElement("div",{className:"settings-overview-img"},r.a.createElement("img",{src:t.picture,alt:"avatar"}),r.a.createElement(ut,null)),r.a.createElement("div",{className:"settings-overview-table"},r.a.createElement(it,{tab:"overview",data:a})))},dt=function(e){var t=e.edit,a=e.editHandlerOnChange,n=e.submitEdit,c=e.error,l=e.updatedInfo;return r.a.createElement("div",{className:"settings-overview"},r.a.createElement("h1",null,"Edit profile"),r.a.createElement(it,{tab:"edit",data:t,handler:a}),r.a.createElement("button",{className:"btn green",onClick:n},"Submit"),c&&r.a.createElement("h2",{style:{color:"red",marginTop:"10px"}},"Error: ",c),l&&r.a.createElement("h2",{style:{color:"green",marginTop:"10px"}},"Information updated"))},pt=a(101),ft={colourStyles:{control:function(e){return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:"black"})},option:function(e,t){var a=t.data,n=t.isDisabled,r=(t.isFocused,t.isSelected),c=be()(a.color);return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:n?"rgb(44, 44, 44)":r?a.color:"rgb(44, 44, 44)",color:"#ccc",cursor:n?"not-allowed":"default",":active":Object(u.a)(Object(u.a)({},e[":active"]),{},{backgroundColor:!n&&(r?a.color:c.alpha(.3).css())})})},multiValue:function(e,t){var a=t.data,n=be()(a.color);return Object(u.a)(Object(u.a)({},e),{},{backgroundColor:n.alpha(.2).css()})},multiValueLabel:function(e,t){var a=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:a.color})},multiValueRemove:function(e,t){var a=t.data;return Object(u.a)(Object(u.a)({},e),{},{color:a.color,":hover":{backgroundColor:a.color,color:"white"}})}},groupStyles:{display:"flex",alignItems:"center",justifyContent:"space-between",color:"black",fontSize:"1.1rem",padding:"0px",margin:"0px"},groupBadgeStyles:{backgroundColor:"#000",borderRadius:"2em",color:"#fefefe",display:"inline-block",fontSize:12,fontWeight:"normal",lineHeight:"1",minWidth:1,padding:"0.16666666666667em 0.5em",textAlign:"center"}},Et=function(e){var t=e.setSelectActivities,a=Object(o.c)((function(e){return e.loggedInUser.interests})),c=Object(n.useState)({loaded:!1,data:[]}),l=Object(V.a)(c,2),s=l[0],i=l[1],m=le().request,d=Object(n.useState)([]),p=Object(V.a)(d,2),f=p[0],E=p[1],b=Object(n.useCallback)((function(){var e=a.map((function(e){return+e.interest_id}));f.map((function(t,a,n){var r=t.options.filter((function(t){return e.includes(+t.id)}));a!==n.length-1?r.map((function(e,t,a){i((function(t){return Object(u.a)(Object(u.a)({},t),{},{data:[].concat(Object(D.a)(t.data),[e])})}))})):r.length?r.map((function(e,t,a){i((function(t){return Object(u.a)(Object(u.a)({},t),{},{loaded:!0,data:[].concat(Object(D.a)(t.data),[e])})}))})):i((function(e){return Object(u.a)(Object(u.a)({},e),{},{loaded:!0})}))}))}),[a,f]);Object(n.useEffect)((function(){b()}),[b]);var v=Object(n.useCallback)(Object(z.a)(K.a.mark((function e(){var t,a,n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/api/interest");case 2:(t=e.sent).success&&(a=t.interests,n=Array.from(new Set(a.map((function(e){return e.interest_category})))),r=n.map((function(e){var t=a.filter((function(t){return t.interest_category===e}));return t=t.map((function(e){return{id:e.interest_id,value:e.interest_name,label:"".concat(e.interest_emoji," ").concat(e.interest_name),color:e.interest_color}})),{label:e,options:t}})),E(r));case 4:case"end":return e.stop()}}),e)}))),[m]);return Object(n.useEffect)((function(){v()}),[v]),f&&s.loaded?r.a.createElement("div",null,r.a.createElement(pt.a,{defaultValue:s.fetched?[]:s.data,isMulti:!0,styles:ft.colourStyles,name:"colors",options:f,formatGroupLabel:function(e){return r.a.createElement("div",{style:ft.groupStyles},r.a.createElement("span",null,e.label),r.a.createElement("span",{style:ft.groupBadgeStyles},e.options.length))},className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){return t(e)}})):null},bt=function(e){var t=e.sendNewActivities,a=Object(n.useState)(null),c=Object(V.a)(a,2),l=c[0],s=c[1];return r.a.createElement("div",{className:"settings_edit_interests"},r.a.createElement("div",null,r.a.createElement("h1",null,"Edit interests"),r.a.createElement(Et,{setSelectActivities:s})),r.a.createElement("button",{className:"btn green",onClick:function(){return t(l)}},"Submit"))},vt=function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(){return console.log("Submitted")}},r.a.createElement("h1",null,"Change password"),r.a.createElement(it,{tab:"edit",data:{"Old Password":"","New Password":"","Confirm new password":""}}),r.a.createElement("button",{className:"btn green"},"Submit")))},Ot=function(e){var t=e.deleteHadlerOnChange,a=e.deleteHandlerOnClick,n=e.wrongPassword,c=e.passwordToDelete;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement("h1",null,"Delete your profile"),r.a.createElement("h2",null,"Are you sure you want to delete your profile ?",r.a.createElement("br",null)," All your matchs will be lost..."),r.a.createElement("div",{className:"input-group"},r.a.createElement(it,{tab:"edit",data:{Password:c},handler:t}),r.a.createElement("button",{type:"button",className:"green",onClick:a},"Submit"),n&&r.a.createElement("h2",{style:{color:"red",marginTop:"10px"}},"Wrong password"))))},gt=function(e){var t=e.switchTab;return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return t(0)}},r.a.createElement("i",{className:"fa fa-user"}),"Overview"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:function(){return t(1)}},r.a.createElement("i",{className:"fa fa-map-marker"}),"Edit Location"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:function(){return t(2)}},r.a.createElement("i",{className:"fa fa-cog"}),"Edit Profile"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:function(){return t(3)}},r.a.createElement("i",{className:"fa fa-list-alt"}),"Edit Interests"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:function(){return t(4)}},r.a.createElement("i",{className:"fa fa-lock"}),"Change Password"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:function(){return t(5)}},r.a.createElement("i",{className:"fa fa-minus-circle"}),"Delete profile")))},_t=(a(156),function(){var e=le().request,t={method:"GET",headers:{"x-rapidapi-host":"wft-geo-db.p.rapidapi.com","x-rapidapi-key":localStorage.getItem("RAPID_API_KEY")}},a=Object(n.useState)({code:null,name:null}),c=Object(V.a)(a,2),l=c[0],s=c[1],o=Object(n.useState)(null),i=Object(V.a)(o,2),u=i[0],m=i[1];console.log({country:l,city:u});var d=function(){var t=Object(z.a)(K.a.mark((function t(){var a,n;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l||!u){t.next=6;break}return a="".concat(u.name,", ").concat(l.name),t.next=4,e("/api/user/location",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:a})});case 4:n=t.sent,console.log({res:n});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"LOCATION_TAB_CONTAINER"},r.a.createElement("div",{className:"LOCATION_TAB_COUNTRY"},r.a.createElement("h1",null,"Country/Region"),r.a.createElement("div",{style:{backgroundColor:"white"}},r.a.createElement(he,{urlToFetch:"https://wft-geo-db.p.rapidapi.com/v1/geo/countries?namePrefix=",handler:function(e){s({code:e.value,name:e.label}),m(null)},type:"RAPID_API_COUNTRY",requestParams:t,noOptionsMessage:"No such country"}))),r.a.createElement("div",{className:"LOCATION_TAB_CITY"},r.a.createElement("h1",null,"City"),r.a.createElement("div",{style:{backgroundColor:l.name?"white":"inherit"}},r.a.createElement(he,{urlToFetch:"https://wft-geo-db.p.rapidapi.com/v1/geo/cities?countryIds=".concat(l.code,"&namePrefix="),handler:function(e){m({code:e.value,name:e.label})},type:"RAPID_API_CITY",requestParams:t,noOptionsMessage:"No such city",isDisabled:!l.code}))),r.a.createElement("div",{className:"LOCATION_TAB_SUBMIT"},r.a.createElement("button",{className:"green",onClick:d},"Submit")))}),ht=function(){var e,t=Object(o.b)(),a=le(),c=a.request,l=a.error,s=Object(o.c)((function(e){return e.loggedInUser})),i=Object(n.useState)(0),m=Object(V.a)(i,2),d=m[0],p=m[1],f=Object(n.useState)({username:s.username,based_in:s.based_in,email:s.email,fullname:s.fullname,occupation:s.occupation,phone_number:s.phone_number}),b=Object(V.a)(f,2),v=b[0],O=b[1],g=Object(n.useState)(!1),_=Object(V.a)(g,2),h=_[0],j=_[1],y=Object(n.useState)(""),N=Object(V.a)(y,2),S=N[0],w=N[1],k=Object(n.useState)(!1),T=Object(V.a)(k,2),C=T[0],I=T[1],x=function(){var e=Object(z.a)(K.a.mark((function e(a){var n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,c("/api/user/info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});case 3:(null===(n=e.sent)||void 0===n?void 0:n.success)&&j(!0),t({type:"UPDATE_PROFILE_INFO",payload:{username:(r=v).username,based_in:r.based_in,email:r.email,fullname:r.fullname,occupation:r.occupation,phone_number:r.phone_number}});case 6:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(z.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c("/api/user/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:S})});case 2:(null===(t=e.sent)||void 0===t?void 0:t.success)&&(window.location.href="/login",window.location.reload(!0)),I(!0),w("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(z.a)(K.a.mark((function e(t){var a,n,r;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],"POST"===(n=t?"POST":"DELETE")&&(a=t.map((function(e){return e.id}))),e.next=5,c("api/interest/",{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify({interests_ids:a})});case 5:r=e.sent,console.log({responce:r});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){return t.map((function(t){return delete e[t]})),e}((e=s,JSON.parse(JSON.stringify(e))),["id","ready","isAuthenticated","based_in","picture","interests","uuid"]);return r.a.createElement("div",{className:"settings-container"},r.a.createElement("div",{className:"left-column"},r.a.createElement(gt,{switchTab:function(e){return p(e)}})),r.a.createElement("div",{className:"settings-tab"},0===d&&r.a.createElement(mt,{info:s,adjustedOverwiew:L}),1===d&&r.a.createElement(_t,null),2===d&&r.a.createElement(dt,{edit:v,editHandlerOnChange:function(e){var t=e.target.name;h&&j(!1);var a=e.target.value;O((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(E.a)({},t,a))}))},error:l,submitEdit:x,updatedInfo:h}),3===d&&r.a.createElement(bt,{sendNewActivities:A}),4===d&&r.a.createElement(vt,null),5===d&&r.a.createElement(Ot,{deleteHadlerOnChange:function(e){var t;w(null===(t=e.target)||void 0===t?void 0:t.value)},deleteHandlerOnClick:D,wrongPassword:C,passwordToDelete:S})))},jt=function(){return r.a.createElement("div",null,r.a.createElement(Ne,null),r.a.createElement(ht,null))},yt=function(){return r.a.createElement("div",null,r.a.createElement(Ne,null),"About page")},Nt=(a(67),function(e){var t,a=e.chat_id,n=e.person_id,c=e.name,l=e.picture,s=e.latestMessage,i=e.unreadMessagesCount,u=e.openDialog,m=e.handleChatClick,d=e.empty,p=Object(o.c)((function(e){return e.loggedInUser})),f=Object(o.c)((function(e){return e.onlineUsers})),E=c===u?"CHAT_ROW__container CHAT_ROW__container_active":"CHAT_ROW__container";return d?r.a.createElement("div",null,r.a.createElement("p",null,"You have no chats")):r.a.createElement("div",null,r.a.createElement("div",{className:E,onClick:m.bind(null,a)},r.a.createElement("div",{className:"CHAT_ROW__left"},r.a.createElement("img",{src:l})),r.a.createElement("div",{className:"CHAT_ROW__center"},r.a.createElement("div",{className:"CHAT_ROW_TITLE"},r.a.createElement("h4",null,c),f.ids.includes(n.toString())?r.a.createElement("i",{className:"fa fa-circle CHAT_ROW_ONLINE"}):""),r.a.createElement("h5",null,p.id===(null===s||void 0===s?void 0:s.sender_id)&&"You: ",(t=null===s||void 0===s?void 0:s.context)?t.length>34?t.toString().substring(0,36).concat("..."):t:"No messages yet")),r.a.createElement("div",{className:"CHAT_ROW__right"},r.a.createElement("p",null,"now"===(null===s||void 0===s?void 0:s.send_at)?"now":P(null===s||void 0===s?void 0:s.send_at,"chat")),i?r.a.createElement(pe,{size:"smaller",status:"danger",content:i}):"")),r.a.createElement("hr",{className:"hr_chat"}))}),St=function(e,t){var a,n;return(null===(a=e.latestMessage)||void 0===a?void 0:a.send_at)<(null===(n=t.latestMessage)||void 0===n?void 0:n.send_at)?1:-1},wt=function(e){var t=e.chats,a=e.openDialog,n=e.handleChatClick,c=e.empty,l=function(e,t){var a=e.filter((function(e){return!e.latestMessage})),n=e.filter((function(e){return e.latestMessage}));return n.sort(t),[].concat(Object(D.a)(n),Object(D.a)(a))}(t,St);return r.a.createElement("div",null,l.map((function(e){return r.a.createElement(Nt,{key:e.id,chat_id:e.room_id,name:e.username,person_id:e.person_id,picture:e.picture,latestMessage:e.latestMessage,unreadMessagesCount:e.unread,openDialog:a,handleChatClick:n,empty:c})})))},kt=(a(157),function(e){var t=e.date;return r.a.createElement(Ae.a.div,{layout:!0},r.a.createElement("hr",{className:"hr-centered-text","data-content":t}))}),Tt=function(e){var t=e.type,a=e.context,n=e.isOwner,c=e.date,l="MESSAGES__chat-msg ";return n&&(l+="MESSAGES__owner"),t?r.a.createElement(kt,{date:c}):r.a.createElement(Ae.a.div,{layout:!0,className:l},r.a.createElement("div",{className:"MESSAGES__chat-msg-content"},r.a.createElement("div",{class:"MESSAGES__chat-msg-text"},r.a.createElement("div",{className:"MESSAGES__chat-msg-text-context"},a),r.a.createElement("div",{className:"MESSAGES__chat-msg-date"},c))))},Ct=(a(158),function(e){var t,a=e.data,c=e.textInput,l=e.setOpenDialog,s=e.handleMessageSend,i=e.handleChange,u=(e.empty,Object(o.c)((function(e){return e.loggedInUser}))),m=Object(n.useRef)(null);return Object(n.useEffect)((function(){m.current.scrollIntoView({behavior:"auto"})}),[null===a||void 0===a||null===(t=a.messages)||void 0===t?void 0:t.length]),a?r.a.createElement("div",{className:"MESSAGES__container"},r.a.createElement("div",{className:"MESSAGES__title"},r.a.createElement("i",{className:"fa fa-caret-left MESSAGES_back_button",onClick:function(){return l(null)}}),r.a.createElement("h4",null,a.username),r.a.createElement("div",{className:"MESSAGES_title_picture"},r.a.createElement("img",{src:a.picture}))),r.a.createElement("div",{className:"MESSAGES__body"},a.messages.map((function(e){return r.a.createElement(Tt,{key:e.id,type:e.type,context:e.text,isOwner:+e.from===+u.id,date:e.date})})),r.a.createElement("div",{ref:m})),r.a.createElement("div",{className:"MESSAGES__send"},r.a.createElement("textarea",{value:c,onChange:i,name:"message",autoFocus:!0,rows:"1",className:"form-input MESSAGES_INPUT"}),r.a.createElement("i",{class:"fa fa-paper-plane MESSAGES_SEND",onClick:s.bind(null,a.room_id,u.id)}))):r.a.createElement("div",{className:"MESSAGES__container"},r.a.createElement("div",{ref:m}))}),It=function(e){var t=e.textInput,a=e.dialog,c=e.openDialog,l=e.handleChatClick,s=e.handleChange,i=e.handleMessageSend,u=e.setOpenDialog,m=Object.values(Object(o.c)((function(e){return e.chats}))),d=Object.values(Object(o.c)((function(e){return e.messages})));if(Object(n.useEffect)((function(){u(null)}),[]),!m.length||!d.length)return r.a.createElement("div",null);return r.a.createElement("div",{className:"DIRECT__page"},r.a.createElement(Ne,null),r.a.createElement("div",{className:"DIRECT__component"},r.a.createElement("div",{className:a?"DIRECT__left_side ".concat("DIRECT_SIDE_NOT_ACTIVE"):"DIRECT__left_side"},r.a.createElement(wt,{chats:m,openDialog:c,handleChatClick:l,empty:!0===m[0]})),r.a.createElement("div",{className:a?"DIRECT__right_side":"DIRECT__right_side ".concat("DIRECT_SIDE_NOT_ACTIVE")},r.a.createElement(Ct,{data:c?d.filter((function(e){return+e.room_id===+c}))[0]:null,textInput:t,handleMessageSend:i,handleChange:s,setOpenDialog:u,empty:!0===d[0]}))))},xt=(a(159),function(){var e=le().request,t=Object(o.b)(),a=Object.values(Object(o.c)((function(e){return e.homePosts}))).sort(),c=Object(n.useState)(!0),l=Object(V.a)(c,2),s=l[0],i=l[1],u=Object(n.useState)(null),m=Object(V.a)(u,2),d=m[0],p=m[1],f=Object(n.useRef)(0),E=Object(n.useCallback)(function(){var t=Object(z.a)(K.a.mark((function t(a){var n,r,c;return K.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.map((function(e){return e.post_id})),r=n.map((function(t){return e("/api/like/".concat(t))})),t.next=4,Promise.all(r);case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),b=Object(n.useCallback)(Object(z.a)(K.a.mark((function a(){var n,r;return K.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e("/api/post/home?limit=10&offset=".concat(f.current));case 2:if(!(n=a.sent).success){a.next=8;break}return a.next=6,E(n.posts);case 6:r=a.sent,t(ce({posts:n.posts,likes:r}));case 8:case"end":return a.stop()}}),a)}))),[e]),v=function(){var a=Object(z.a)(K.a.mark((function a(){var n,r;return K.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return f.current+=10,a.next=3,e("/api/post/home?limit=5&offset=".concat(f.current));case 3:if(!(n=a.sent).success){a.next=14;break}return a.next=7,E(n.posts);case 7:return r=a.sent,a.next=10,w(300);case 10:if(n.posts.length){a.next=13;break}return i(!1),a.abrupt("return");case 13:t(ce({posts:n.posts,likes:r}));case 14:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(n.useEffect)((function(){b()}),[b]),a.length?r.a.createElement("div",{className:"FEED_CONTAINER"},r.a.createElement("div",{className:"FEED_SIDE"},r.a.createElement("h3",null,"Recomendations"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"POSTS__container"},r.a.createElement("div",{className:"FEED_CENTER"},a.length?r.a.createElement(Je.a,{dataLength:a.length,next:v,hasMore:s,loader:r.a.createElement("h4",null,"Loading...")},a.reverse().map((function(e){return r.a.createElement(Ke,{key:e.post_id,id:e.post_id,picture:e.creatorInfo.picture,username:e.creatorInfo.username,fullname:e.creatorInfo.fullname,text:e.caption,numberOfLikes:e.number_of_likes,postedAt:e.created_at,likes:e.likes,type:"feed",setSelectedLikes:p})}))):null)),r.a.createElement("div",{className:"FEED_SIDE"},r.a.createElement("h3",null,"Mypage"),r.a.createElement("hr",null)),d&&r.a.createElement(Be,{closeHandler:p,info:d,title:"Likes"})):null}),Dt=function(){return r.a.createElement("div",null,r.a.createElement(Ne,null),r.a.createElement(xt,null))},At=(a(160),new WebSocket("wss://mellowgram.herokuapp.com/")),Lt=function(){var e=Object(o.b)(),t=le().request,a=se().loading,c=Object(n.useState)(""),l=Object(V.a)(c,2),s=l[0],i=l[1],u=Object(n.useState)(null),m=Object(V.a)(u,2),d=m[0],p=m[1],f=Object(o.c)((function(e){return e.loggedInUser})),E=Object.values(Object(o.c)((function(e){return e.chats}))),b=function(e){i(e.target.value)},v=function(t,a){s&&(At.send(JSON.stringify({action:"SEND_MESSAGE",roomId:t,senderId:a,context:s,uuid:f.uuid})),e(re({info:{messageId:"//Do not know yet",roomId:t,senderId:a,context:s,date:"now"},me:f}))),i("")},O=function(t){var a=E.filter((function(e){return e.room_id===t}))[0];i(""),p(t),a.unread&&(e({type:"RESET_UNREAD_COUNTER",payload:{chatId:{chatId:t}.chatId}}),At.send(JSON.stringify({action:"SET_READ",chatId:t,userId:f.id})))},g=function(e){var t=e.me,a=e.other;At.send(JSON.stringify({action:"START_CHAT",me:t,other:a}))},_=Object(n.useCallback)(Object(z.a)(K.a.mark((function e(){var a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/apiKeys/rapidApi");case 2:(a=e.sent).success&&localStorage.setItem("RAPID_API_KEY",a.key);case 4:case"end":return e.stop()}}),e)}))),[t]),h=Object(n.useCallback)(function(){var a=Object(z.a)(K.a.mark((function a(n,r){var c;return K.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.id){a.next=5;break}return a.next=3,t("/api/follow/following/".concat(f.username),{},r);case 3:(c=a.sent).success&&e({type:"SET_LOGGED_IN_FOLLOWING",payload:{users:(l={users:c.data,user:f.username}).users,user:l.user}});case 5:case"end":return a.stop()}var l}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,f.id]);return Object(n.useEffect)((function(){At.onmessage=function(t){var a,n,r=JSON.parse(t.data);switch(console.log({message:r}),r.action){case"INFORMATION_IS_READY":At.send(JSON.stringify({action:"GET_CHATS",id:f.id})),At.send(JSON.stringify({action:"GET_ONLINE",user_id:f.id}));break;case"GET_CHATS":e({type:"GET_CHATS",payload:{chats:(n={chats:r.payload.rooms,messages:r.payload.messages,me:r.payload.id}).chats,messages:n.messages,me:n.me}}),e({type:"GET_MESSAGES",payload:{messages:(a={messages:r.payload.messages,chats:r.payload.rooms}).messages,chats:a.chats}}),e({type:"SET_UUID",payload:{uuid:{uuid:r.payload.uuid}.uuid}});break;case"GET_ONLINE":e({type:"SET_ONLINE",payload:{onlineIds:{onlineIds:r.payload}.onlineIds}});break;case"SEND_MESSAGE":var c=r.messageInfo;e(re({info:c,me:f}));break;case"START_CHAT":var l=r.chat;r.alreadyExists||e({type:"ADD_CHAT",payload:{chat:{chat:l}.chat}}),p(l.room_id)}},At.onclose=function(){console.log("Connection closed")}}),[]),Object(n.useEffect)((function(){h(f),_()}),[h,_]),a?r.a.createElement("div",null):f.isAuthenticated?r.a.createElement(q.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(Y.d,null,r.a.createElement(Y.b,{exact:!0,path:"/header",render:function(e){return r.a.createElement(Ne,e)}}),r.a.createElement(Y.a,{from:"/",exact:!0,to:"/".concat(f.username)}),r.a.createElement(Y.a,{from:"/login",exact:!0,to:"/".concat(f.username)}),r.a.createElement(Y.a,{from:"/signup",exact:!0,to:"/".concat(f.username)}),r.a.createElement(Y.b,{exact:!0,path:"/account",render:function(e){return r.a.createElement(jt,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/about",render:function(e){return r.a.createElement(yt,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/direct",render:function(e){return r.a.createElement(It,Object.assign({},e,{dialog:d,textInput:s,openDialog:d,handleChatClick:O,handleChange:b,handleMessageSend:v,setOpenDialog:p}))}}),r.a.createElement(Y.b,{exact:!0,path:"/home",render:function(e){return r.a.createElement(Dt,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/:username",render:function(e){return r.a.createElement(Ve,Object.assign({},e,{startMessagingHandler:g,setOpenDialog:p}))}}),r.a.createElement(Y.b,{render:function(e){return r.a.createElement(Te,e)}})))):r.a.createElement(q.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(Y.d,null,r.a.createElement(Y.a,{path:"/",exact:!0,to:"/login"}),r.a.createElement(Y.b,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(ke,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/header",render:function(e){return r.a.createElement(Ne,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(Se,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/about",render:function(e){return r.a.createElement(yt,e)}}),r.a.createElement(Y.b,{exact:!0,path:"/:username",render:function(e){return r.a.createElement(Ve,e)}}),r.a.createElement(Y.b,{render:function(e){return r.a.createElement(Te,e)}}))))};Re=Object(s.e)(W,Object(s.d)(Object(s.a)(i.a)));var Pt=r.a.createElement(o.a,{store:Re},r.a.createElement(r.a.StrictMode,null,r.a.createElement(Lt,null)));l.a.render(Pt,document.getElementById("root"))},40:function(e,t,a){},45:function(e){e.exports=JSON.parse('{"a":["January","February","March","April","May","June","July","August","September","October","November","December"]}')},61:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},75:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},95:function(e){e.exports=JSON.parse('{"a":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}')}},[[105,1,2]]]);
//# sourceMappingURL=main.ab7d3999.chunk.js.map