(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{102:function(e,a,t){},126:function(e,a){},13:function(e,a){e.exports={deleteProperties:function(e,a){return a.map((function(a){return delete e[a]})),e},deepCopy:function(e){return JSON.parse(JSON.stringify(e))},adjustToTable:function(e){return Object.keys(e).map((function(a,t){return{field:a,value:e[a]}}))},sleep:function(e){return new Promise((function(a){setTimeout(a,e)}))},arrToObj:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post_id",t={};return e?(e.forEach((function(e){t[e[a]]=e})),t):{}},getTotalUnread:function(e){return e.reduce((function(e,a){return a.unread+e}),0)}}},132:function(e,a,t){},134:function(e,a,t){},135:function(e,a,t){},136:function(e,a,t){},137:function(e,a,t){},138:function(e,a,t){},141:function(e,a,t){},142:function(e,a,t){},143:function(e,a,t){},144:function(e,a,t){},145:function(e,a,t){},146:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(15),l=t.n(c),s=t(25),i=t(5),o=t(83),u=t(2),m={isAuthenticated:!1,id:null,username:null,based_in:null,email:null,fullname:null,number_of_posts:null,occupation:null,phone_number:null,picture:null,ready:!1},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"AUTH_USER":return Object(u.a)(Object(u.a)({},e),{},{isAuthenticated:!0,id:a.payload.id,username:a.payload.username,based_in:a.payload.based_in,email:a.payload.email,fullname:a.payload.fullname,number_of_posts:a.payload.number_of_posts,occupation:a.payload.occupation,phone_number:a.payload.phone_number,picture:a.payload.picture,ready:!0});case"UPDATE_PROFILE_PICTURE":return Object(u.a)(Object(u.a)({},e),{},{picture:a.payload.picture,ready:!0});case"UPDATE_PROFILE_INFO":return Object(u.a)(Object(u.a)({},e),{},{username:a.payload.username,based_in:a.payload.based_in,email:a.payload.email,fullname:a.payload.fullname,occupation:a.payload.occupation,phone_number:a.payload.phone_number,ready:!0});case"SET_UUID":return Object(u.a)(Object(u.a)({},e),{},{uuid:a.payload.uuid});default:return Object(u.a)(Object(u.a)({},e),{},{ready:!0})}},p={id:null,username:null,based_in:null,email:null,fullname:null,number_of_posts:null,occupation:null,phone_number:null,picture:null,ready:!1},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_PAGE":return Object(u.a)(Object(u.a)({},e),{},{id:a.payload.id,username:a.payload.username,based_in:a.payload.based_in,email:a.payload.email,fullname:a.payload.fullname,number_of_posts:a.payload.number_of_posts,occupation:a.payload.occupation,phone_number:a.payload.phone_number,picture:a.payload.picture,ready:!0});default:return Object(u.a)(Object(u.a)({},e),{},{ready:!0})}},f=t(16),b={user:null},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_POSTS":var t=a.payload,n=t.posts,r=t.user,c={};return 0===n.length?{user:r}:(n.forEach((function(e){c[e.post_id]=e})),Object(u.a)(Object(u.a)({},c),{},{user:r}));case"ADD_POST":var l=a.payload.post,s={};return s[l.post_id]=l,Object(u.a)(Object(u.a)(Object(u.a)({},e),s),{},{user:e.user});case"LOAD_MORE_POSTS":var i=a.payload.posts,o={};return i.forEach((function(e){o[e.post_id]=e})),Object(u.a)(Object(u.a)(Object(u.a)({},e),o),{},{user:e.user});case"INCREMENT_NUMBER_OF_LIKES":var m=a.payload.id,d=e[m].number_of_likes,p=e[m];return Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},m,Object(u.a)(Object(u.a)({},p),{},{number_of_likes:d+1})));case"DECREMENT_NUMBER_OF_LIKES":var E=a.payload.id,v=e[E].number_of_likes,O=e[E];return Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},E,Object(u.a)(Object(u.a)({},O),{},{number_of_likes:v-1})));case"DELETE_POST":var _=a.payload.id;console.log({id:_,state:e});var g=Object(u.a)({},e);return delete g[_],console.log({final:g}),g;case"EDIT_POST":var h=a.payload,N=h.id,j=h.newCaption,y=Object(u.a)({},e);return y[N].caption=j,y;default:return e}},O={},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_LIKES":var t=a.payload.likes,n={};return 0===t.length?{loaded:!0}:(t.forEach((function(e){n[e.id]=e})),n);case"LOAD_MORE_LIKES":var r=a.payload.likes,c={};return r.forEach((function(e){c[e.id]=e})),Object(u.a)(Object(u.a)({},e),c);case"ON_LIKE":var l=a.payload,s=l.user_id,i=l.id,o=e[i].data,m=o.filter((function(e){return e.person_id!==a.payload.user_id}));return o.length===m.length?(m.push({person_id:+s,picture:a.payload.picture,username:a.payload.username}),Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},i,{id:i,data:m,alreadyLiked:!0}))):Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},i,{id:i,data:m,alreadyLiked:!1}));case"CREATE_LIKES_ON_ADD_POST":var d=a.payload.id,p={id:d,data:[],alreadyLiked:!1};return Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},d,p));default:return e}},g={user:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_FOLLOWING":var t=a.payload,n=t.users,r=t.user;return Object(u.a)(Object(u.a)({},e),{},{users:n,user:r});default:return e}},N={user:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_FOLLOWED_BY":var t=a.payload,n=t.users,r=t.user;return Object(u.a)(Object(u.a)({},e),{},{users:n,user:r});case"ADD_FOLLOW":var c=a.payload.myPage,l=a.payload.producer,s=l.id,i=l.picture,o=l.username,m=e.users;return m.push({person_id:s,picture:i,username:o}),console.log({myPage:c}),Object(u.a)(Object(u.a)({},e),{},{users:m});case"DELETE_FOLLOW":var d=a.payload.myPage,p=a.payload.producer.id,E=e.users;return console.log({myPage:d}),E=E.filter((function(e){return e.person_id!==p})),Object(u.a)(Object(u.a)({},e),{},{users:E});default:return e}},y={user:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_LOGGED_IN_FOLLOWING":var t=a.payload,n=t.users,r=t.user;return Object(u.a)(Object(u.a)({},e),{},{users:n,user:r});case"ADD_FOLLOW":var c=a.payload.consumer,l=c.id,s=c.picture,i=c.username,o=a.payload.myPage;if(o)return e;var m=e.users;return m.push({person_id:l,picture:s,username:i}),Object(u.a)(Object(u.a)({},e),{},{users:m});case"DELETE_FOLLOW":var d=a.payload.consumer.id,p=(a.payload.myPage,e.users);return p=p.filter((function(e){return e.person_id!==d})),Object(u.a)(Object(u.a)({},e),{},{users:p});default:return Object(u.a)(Object(u.a)({},e),{},{ready:!0})}},w=t(13),T={},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_CHATS":var t=a.payload,n=t.chats,r=t.messages,c=t.me,l=Object(w.arrToObj)(n,"room_id"),s=function(a){var t=Object(u.a)({},l);for(var n in t)t[n]=Object(u.a)(Object(u.a)({},t[n]),{},{unread:0});return a.length?(a.filter((function(e){return+e.sender_id!==+c})).filter((function(e){return!e.is_read})).map((function(e){Object.keys(t).includes(e.room_id.toString())&&t[e.room_id].unread++})),t):Object(u.a)(Object(u.a)({},e),t)},i=s(r);return Object(u.a)(Object(u.a)({},e),i);case"ADD_MESSAGE":var o=a.payload,m=o.info,d=o.me,p=JSON.parse(JSON.stringify(e));return p[m.roomId].latestMessage={message_id:m.messageId,room_id:m.roomId,sender_id:m.senderId,context:m.context,send_at:m.date,is_read:!0},+d.id!==+m.senderId&&(p[m.roomId].unread+=1),Object(u.a)(Object(u.a)({},e),p);case"ADD_CHAT":var E=a.payload.chat,f=Object(w.arrToObj)([E],"room_id");return Object(u.a)(Object(u.a)({},e),f);case"RESET_UNREAD_COUNTER":var b=a.payload.chatId,v=JSON.parse(JSON.stringify(e));return v[b].unread=0,Object(u.a)(Object(u.a)({},e),v);default:return e}},x=t(91),C={},I=function(e){return e.split("T")[1].split(".")[0].split(":").slice(0,2).map((function(e,a){return 0===a?(Number(e)+6).toString():e})).join(":")},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_MESSAGES":var t=a.payload,n=t.messages,r=t.chats,c=n.sort((function(e,a){return e.message_id-a.message_id})).map((function(e){return{message_id:e.message_id,room_id:e.room_id,from:e.sender_id,text:e.context,date:I(e.send_at)}})),l=r.map((function(e){var a=c.filter((function(a){return+a.room_id===+e.room_id}));return{room_id:+e.room_id,username:e.username,picture:e.picture,messages:a}})),s=Object(w.arrToObj)(l,"room_id");return Object(u.a)(Object(u.a)({},e),s);case"ADD_MESSAGE":var i=a.payload.info,o=Object(u.a)({},e);return o[i.roomId].messages.push({message_id:i.messageId,room_id:i.roomId,from:i.senderId,text:i.context,date:i.date}),Object(u.a)(Object(u.a)({},e),o);case"ADD_CHAT":var m=a.payload.chat,d=(m.latestMessage,m.unread,m.person_id,Object(x.a)(m,["latestMessage","unread","person_id"]));d.messages=[];var p=Object(w.arrToObj)([d],"room_id");return Object(u.a)(Object(u.a)({},e),p);default:return e}},A={ids:[]},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ONLINE":var t=a.payload.onlineIds;return console.log({onlineIds:t}),Object(u.a)(Object(u.a)({},e),{},{ids:t});default:return e}},P=Object(s.c)({loggedInUser:d,loggedInFollows:S,currentPage:E,posts:v,likes:_,following:h,followedBy:j,chats:k,messages:L,onlineUsers:D}),R=(t(102),t(3)),M=t.n(R),U=t(6),F=t(4),G=t(12),H=t(9),B=t(14),W=t.n(B),K=function(e){return{type:"UPDATE_PROFILE_PICTURE",payload:{picture:e}}},J=function(e){return{type:"INCREMENT_NUMBER_OF_LIKES",payload:{id:e}}},z=function(e){return{type:"DECREMENT_NUMBER_OF_LIKES",payload:{id:e}}},V=function(e){return{type:"CREATE_LIKES_ON_ADD_POST",payload:{id:e}}},q=function(e){return{type:"DELETE_POST",payload:{id:e}}},Y=function(e,a){return{type:"EDIT_POST",payload:{id:e,newCaption:a}}},X=function(e){return{type:"SET_FOLLOWING",payload:{users:e.users,user:e.user}}},Q=function(e){return{type:"SET_FOLLOWED_BY",payload:{users:e.users,user:e.user}}},Z=function(e){return{type:"ADD_FOLLOW",payload:{producer:e.producer,consumer:e.consumer,myPage:e.myPage}}},$=function(e){return{type:"DELETE_FOLLOW",payload:{producer:e.producer,consumer:e.consumer,myPage:e.myPage}}},ee=function(e){return{type:"ADD_MESSAGE",payload:{info:e.info,me:e.me}}},ae=function(){var e=Object(n.useState)(!1),a=Object(F.a)(e,2),t=a[0],r=a[1],c=Object(n.useState)(!1),l=Object(F.a)(c,2),s=l[0],i=l[1];return{loading:t,error:s,request:Object(n.useCallback)(function(){var e=Object(U.a)(M.a.mark((function e(a){var t,n,c,l,s=arguments;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{method:"GET"},n=s.length>2?s[2]:void 0,e.prev=2,i(!1),r(!0),e.next=7,fetch(a,t,n);case 7:return c=e.sent,e.next=10,c.json();case 10:if(!(l=e.sent).success){e.next=13;break}return e.abrupt("return",l);case 13:return i(l.msg),e.abrupt("return",l);case 17:e.prev=17,e.t0=e.catch(2),i(e.t0),console.log(e.t0);case 21:return e.prev=21,r(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,17,21,24]])})));return function(a){return e.apply(this,arguments)}}(),[])}},te=function(){var e=Object(i.b)(),a=Object(n.useState)(!0),t=Object(F.a)(a,2),r=t[0],c=t[1],l=ae(),s=(l.error,l.request),o=Object(n.useCallback)(Object(U.a)(M.a.mark((function a(){var t,n,r,l,i,o,u,m,d,p,E,f,b;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s("/api/whoami");case 3:if(!(t=a.sent).success){a.next=13;break}return a.next=7,s("/api/user/".concat(t.data.username));case 7:n=a.sent,r=t.data,l=r.id,i=r.username,o=n.info,u=o.based_in,m=o.email,d=o.fullname,p=o.number_of_posts,E=o.occupation,f=o.phone_number,b=o.picture,e({type:"AUTH_USER",payload:{id:(v={id:l,username:i,based_in:u,email:m,fullname:d,number_of_posts:p,occupation:E,phone_number:f,picture:b}).id,username:v.username,based_in:v.based_in,email:v.email,fullname:v.fullname,number_of_posts:v.number_of_posts,occupation:v.occupation,phone_number:v.phone_number,picture:v.picture}}),a.next=14;break;case 13:e({type:"NOT_AUTH_USER"});case 14:c(!1),a.next=20;break;case 17:a.prev=17,a.t0=a.catch(0),console.log(a.t0);case 20:case"end":return a.stop()}var v}),a,null,[[0,17]])}))),[s,e]);return Object(n.useEffect)((function(){o()}),[o]),{loading:r}},ne=(t(78),t(51),t(33),function(e){var a=e.form,t=e.changeHandler,n=e.submitHandler,c=e.err;return r.a.createElement("div",{className:"containerInput"},r.a.createElement("div",{className:"image"},r.a.createElement("h1",null,"Welcome To ",r.a.createElement("span",{className:"welcome"},"Mellowgram"))),r.a.createElement("div",{className:"content"},r.a.createElement("h1",null,"Login"),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"txt","aria-describedby":"helpId",value:a.username,onChange:t})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"txt",value:a.password,onChange:t})),r.a.createElement("a",{className:"fp",href:"/accounts/password/reset"},"Forgot Password?"),r.a.createElement("br",null),r.a.createElement("button",{type:"button",className:"btn green",onClick:n},"Login"),c&&r.a.createElement("h4",{className:"fp login-error"},c),r.a.createElement("hr",null),r.a.createElement("div",{className:"login"},"Or login with"),r.a.createElement("div",{className:"links"},r.a.createElement("div",{className:"google"},r.a.createElement("i",{className:"fa fa-google"},r.a.createElement("span",null,"Google"))),r.a.createElement("div",{className:"facebook"},r.a.createElement("i",{className:"fa fa-facebook-f"},r.a.createElement("span",null,"Facebook"))),r.a.createElement("div",{className:"instagram",onClick:function(){return console.log("instagram")}},r.a.createElement("i",{className:"fa fa-instagram"},r.a.createElement("span",null,"Instagram")))),r.a.createElement("div",{className:"signup"},"Don't have an account? \u200b",r.a.createElement("a",{href:"/signup"},"Sign up"))))}),re=(t(132),function(e){var a=e.options,t=e.isOpen,n=e.toggleOpen,c=e.selected,l=e.setSelected;return r.a.createElement("div",{className:"dropdown".concat(t?" open":""),onClick:n,tabIndex:"0"},r.a.createElement("span",{className:"current"},c),r.a.createElement("div",{className:"list"},r.a.createElement("ul",null,a.map((function(e,a){return r.a.createElement("li",{key:a,className:"option".concat(e.text===c?" selected":""),"data-value":e.value,"data-display-text":e.display,onClick:function(){return l(e.text)}},e.text)})))))}),ce=function(e){var a=e.id,t=(e.label,e.defaultVal),c=e.options,l=Object(H.g)(),s=ae(),i=(s.error,s.request),o=Object(n.useState)(!1),u=Object(F.a)(o,2),m=u[0],d=u[1],p=Object(n.useState)(""),E=Object(F.a)(p,2),f=E[0],b=E[1],v=function(){var e=Object(U.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("/api/logout");case 2:e.sent,l.push("/"),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"Account"===f&&"/account"!==l.location.pathname&&(b(""),l.push("/account")),"Log Out"===f&&v(),r.a.createElement("div",{className:"fieldset"},r.a.createElement("div",{className:"form-element a-header"},r.a.createElement("span",null,r.a.createElement("select",{id:a},c.map((function(e,a){return r.a.createElement("option",{value:e.value,key:a,"data-display-text":e.display},e.text)}))),r.a.createElement(re,{options:c,isOpen:m,toggleOpen:function(){return d(!m)},selected:t,setSelected:b}))))},le=(t(134),function(e){var a=e.size,t=e.status,n=e.content;return r.a.createElement("div",null,r.a.createElement("span",{className:"badge badge--".concat(t," badge--").concat(a)},n))}),se=t(90),ie=function(e){var a=e.handler,t=ae().request,n=null,c=function(){var e=Object(U.a)(M.a.mark((function e(a){var r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e,a){return new Promise((function(t){clearTimeout(n),n=setTimeout(Object(U.a)(M.a.mark((function e(){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a();case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)}))),e)}))},e.next=3,r(500,t.bind(null,"/api/findUser/".concat(a)));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement(se.a,{placeholder:"Search...",cacheOptions:!0,noOptionsMessage:function(){return"No such user"},loadOptions:c,onChange:a})},oe=(t(135),[{text:"Account",value:"account",selected:!1},{text:"Log Out",value:"logout",selected:!1}]),ue=function(e){var a=e.handler;return r.a.createElement("div",{className:"hamburger",onClick:a},r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:"line"}),r.a.createElement("span",{className:"line"}))},me=function(){var e=Object(H.g)(),a=Object(n.useState)(!1),t=Object(F.a)(a,2),c=t[0],l=t[1],s=Object(n.useState)(""),o=Object(F.a)(s,2),u=o[0],m=o[1],d=Object(i.c)((function(e){return e.loggedInUser})),p=Object.values(Object(i.c)((function(e){return e.chats}))),E=Object(w.getTotalUnread)(p);return u&&e.push("/".concat(u)),r.a.createElement("div",null,r.a.createElement("nav",{className:"header-nav"},r.a.createElement(ue,{handler:function(){l((function(e){return!e}))}}),r.a.createElement("div",{className:"logo"},r.a.createElement(G.b,{to:"/"},"Mellowgram")),r.a.createElement("div",{className:"HEADER__search"},r.a.createElement("ul",{className:"nav-search"},r.a.createElement("li",{className:"nav-item search-field"},r.a.createElement(ie,{handler:function(e){m(e.value)},selectedValue:u})))),r.a.createElement("ul",{className:c?"nav-items show":"nav-items"},r.a.createElement("li",{className:c?"nav-item fade open":"nav-item"},r.a.createElement(G.b,{to:"/about"},"About us")),r.a.createElement("li",{className:c?"disabled":""},"|"),r.a.createElement("li",{className:c?"nav-item fade open":"nav-item"},d.isAuthenticated?r.a.createElement(G.b,{to:"/direct"},r.a.createElement("div",{className:"Header__direct"},r.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}),E?r.a.createElement(le,{size:"smaller",status:"danger",content:Object(w.getTotalUnread)(p)}):"")):r.a.createElement(G.b,{to:"/login"},"Login")),r.a.createElement("li",{className:c?"nav-item fade open":"nav-item"},d.isAuthenticated?r.a.createElement(ce,{id:"settings",label:"Settings",defaultVal:"Settings",options:oe}):r.a.createElement(G.b,{to:"/signup"},"Sign up")))))},de=function(){var e=Object(H.g)(),a=Object(n.useState)({username:"",password:""}),t=Object(F.a)(a,2),c=t[0],l=t[1],s=ae(),i=(s.loading,s.error),o=s.request,m=function(){var a=Object(U.a)(M.a.mark((function a(){return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l({username:"",password:""}),a.next=3,o("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:if(!a.sent.success){a.next=7;break}return e.push("/"),a.abrupt("return",window.location.reload(!0));case 7:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(me,null),r.a.createElement("div",null,r.a.createElement(ne,{err:i,form:c,changeHandler:function(e){var a=e.target,t=a.name,n=a.value;l((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},t,n))}))},submitHandler:m})))},pe=function(e){var a=e.err,t=e.form,n=e.changeHandler,c=e.submitHandler;return r.a.createElement("div",{className:"containerInput"},r.a.createElement("div",{className:"image"},r.a.createElement("h1",null,"Welcome To ",r.a.createElement("span",{className:"welcome"},"Mellowgram"))),r.a.createElement("div",{className:"content"},r.a.createElement("h3",null,"Sign up to meet new friends."),r.a.createElement("div",{className:"login"},"Login with"),r.a.createElement("div",{className:"links links-signup"},r.a.createElement("div",{className:"google"},r.a.createElement("i",{className:"fa fa-google"},r.a.createElement("span",null,"Google"))),r.a.createElement("div",{className:"facebook"},r.a.createElement("i",{className:"fa fa-facebook-f"},r.a.createElement("span",null,"Facebook"))),r.a.createElement("div",{className:"instagram",onClick:function(){return console.log("instagram")}},r.a.createElement("i",{className:"fa fa-instagram"},r.a.createElement("span",null,"Instagram")))),r.a.createElement("span",null,"OR"),r.a.createElement("div",{className:"form-group form-group-signup"},r.a.createElement("label",null,"Email"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"email",id:"txt","aria-describedby":"helpId",value:t.email,onChange:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Full Name"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"fullName",id:"txt",value:t.fullName,onChange:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Username"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"txt",value:t.username,onChange:n})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password"),r.a.createElement("br",null),r.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"txt",value:t.password,onChange:n})),r.a.createElement("button",{type:"button",className:"btn green",onClick:c},"Sign up"),a&&r.a.createElement("h4",{className:"fp login-error"},a),r.a.createElement("div",{className:"signup signup-signup"},"Have an account? \u200b",r.a.createElement("a",{href:"/login"},"Log in"))))},Ee=function(){var e=Object(H.g)(),a=Object(n.useState)({email:"",fullName:"",username:"",password:""}),t=Object(F.a)(a,2),c=t[0],l=t[1],s=ae(),i=s.loading,o=s.error,m=s.request;console.log({form:c}),console.log({loading:i,error:o});var d=function(){var a=Object(U.a)(M.a.mark((function a(){var t;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l({email:"",fullName:"",username:"",password:""}),a.next=3,m("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 3:if(t=a.sent,console.log({responce:t}),!t.success){a.next=7;break}return a.abrupt("return",e.push("/login"));case 7:return a.abrupt("return");case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(me,{authorized:{isAuthenticated:!1}}),r.a.createElement(pe,{err:o,form:c,changeHandler:function(e){var a=e.target,t=a.name,n=a.value;l((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},t,n))}))},submitHandler:d}))},fe=(t(136),function(){return r.a.createElement("div",{className:"nf"},r.a.createElement("div",null,r.a.createElement(me,null)),r.a.createElement("div",{className:"not-available"},r.a.createElement("h2",null," Sorry, this page isn't available."),r.a.createElement("div",{className:"not-available-detail"},"The link you followed may be broken, or the page may have been removed. \u200b",r.a.createElement("a",{href:"/"},"Go back to Mellowgram."))))}),be=t(60),ve=(t(137),function(e){var a=e.username,t=e.picture,n=e.context;return r.a.createElement("div",{className:"toast_container"},r.a.createElement("div",{className:"toast_title"},r.a.createElement("img",{src:t,className:"toast__img"}),r.a.createElement("h3",null,a)),r.a.createElement("div",{className:"toast_message"},r.a.createElement("p",null,n)))}),Oe=function(e){var a=e.params,t=a.year,n=a.company,c=a.profession,l=a.achievements;return r.a.createElement("div",{className:"card-item","data-year":t},r.a.createElement("div",{className:"card-item-title"},c," ",r.a.createElement("span",null,n)),r.a.createElement("div",{className:"card-item-desc"},l))},_e=function(e){var a=e.experience;return r.a.createElement("div",{className:"card-timeline"},a.map((function(e){return r.a.createElement(Oe,{key:e.id,params:e})})))},ge=(t(138),function(e){var a=e.picture,t=e.username,n=Object(H.g)();return r.a.createElement("div",{className:"FOLLOWING_BAR_USER",onClick:function(){return n.push("".concat(t))}},r.a.createElement("img",{src:a,alt:"avatar",className:"FOLLOWING_BAR_USER_profile_picture",style:{marginTop:"0px"}}),r.a.createElement("div",{className:"FOLLOWING_BAR_USER__header"},r.a.createElement("h3",{className:"FOLLOWING_BAR_USER__username"},t)))});var he=function(e){var a=e.following,t=e.followedBy;return r.a.createElement("div",{className:"USER_INFO__followingBar"},r.a.createElement("div",{className:"FOLLOWING_BAR_FOLLOWED_BY"},r.a.createElement("h3",null,"followed by"),r.a.createElement("div",{className:"FOLLOWED_BAR_BODY"},t.users.map((function(e,a){return r.a.createElement(ge,{key:a,username:e.username,picture:e.picture})})))),r.a.createElement("div",{className:"FOLLOWING_BAR_FOLLOWING"},r.a.createElement("h3",null,"following"),r.a.createElement("div",{className:"FOLLOWING_BAR_BODY"},a.users.map((function(e,a){return r.a.createElement(ge,{key:a,username:e.username,picture:e.picture})})))))},Ne=t(17);t(79);var je=function(e){var a=e.setSelectedImg,t=[{id:1,url:"https://as01.epimg.net/futbol/imagenes/2019/03/14/champions/1552569020_031070_1552569560_noticia_normal.jpg"},{id:2,url:"/api/public/uploads/user_dloading.jpg"},{id:3,url:"/api/public/uploads/N6NCsEnf_6U9RvrfYNXpb.jpg"},{id:4,url:"/api/public/uploads/user_tsunamipapi.jpg"},{id:5,url:"/api/public/uploads/user_dloading.jpg"},{id:6,url:"/api/public/uploads/N6NCsEnf_6U9RvrfYNXpb.jpg"},{id:7,url:"/api/public/uploads/user_tsunamipapi.jpg"},{id:8,url:"https://as01.epimg.net/futbol/imagenes/2019/03/14/champions/1552569020_031070_1552569560_noticia_normal.jpg"}];return r.a.createElement("div",{className:"USER_INFO__picturesBar"},r.a.createElement("div",{className:"USER_INFO_picturesBar_header"},r.a.createElement("h3",{className:"USER_INFO__picturesBar__title"},"My pictures \u200b "),r.a.createElement("div",{className:"USER_INFO__picturesBar__add"},r.a.createElement("div",{className:"UPLOAD_btn_upload ADD_PICTURE"},r.a.createElement("input",{type:"file",id:"UPLOAD_PROFILE_PICTURE",name:""}),r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))),r.a.createElement("div",{className:"img-grid"},t&&t.map((function(e){return r.a.createElement(Ne.a.div,{className:"img-wrap",key:e.id,layout:!0,onClick:function(){return a(e.url)}},r.a.createElement(Ne.a.img,{src:e.url,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}))}))))},ye=function(e){var a=e.setSelectedImg,t=e.selectedImg;return r.a.createElement(Ne.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(Ne.a.img,{src:t,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}),r.a.createElement("div",{className:"modal_actions"},r.a.createElement("label",null,r.a.createElement("div",{className:"update_picture"},r.a.createElement("input",{type:"file"}),r.a.createElement("i",{class:"fa fa-refresh delete_picture_button","aria-hidden":"true"}),r.a.createElement("p",null,"\u200b Load new picture"))),r.a.createElement("div",{className:"remove_picture"},r.a.createElement("i",{class:"fa fa-trash delete_picture_button","aria-hidden":"true"}),r.a.createElement("p",null,"\u200b Remove picture"))))},Se=(t(140),t(80),function(e){var a=e.startMessagingHandler,t=e.setOpenDialog,c=Object(H.g)(),l=ae().request,s=Object(i.b)(),o=Object(i.c)((function(e){return e.loggedInUser})),u=Object(i.c)((function(e){return e.loggedInFollows})),m=Object(i.c)((function(e){return e.following})),d=Object(i.c)((function(e){return e.followedBy})),p=Object(n.useState)({}),E=Object(F.a)(p,2),f=E[0],b=E[1],v=Object(n.useState)(null),O=Object(F.a)(v,2),_=O[0],g=O[1],h=Object(n.useState)(!1),N=Object(F.a)(h,2),j=N[0],y=N[1],S=Object(n.useRef)(!1),w=Object(n.useRef)(!0),T="green",k=(Object.values(Object(i.c)((function(e){return e.chats}),(function(e,a){var t=Object.values(e),n=Object.values(a);return t.map((function(e,a){W()(e,n[a])||(b({username:e.username,picture:e.picture,context:e.latestMessage.context,chatId:e.room_id}),S.current=!1)})),W()(e.id,a.id)}))),Object(i.c)((function(e){return e.currentPage}),(function(e,a){return w.current=W()(e,a),W()(e,a)})));Object(n.useEffect)((function(){u.user&&function(e){var a=u.users.map((function(e){return e.person_id}));y(a.includes(e))}(k.id)}),[u]);var x=Object(n.useCallback)(function(){var e=Object(U.a)(M.a.mark((function e(a,t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/follow/followers/".concat(a.username),{},t);case 2:(n=e.sent).success&&s(Q({users:n.data,user:a.username}));case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),[s,Q,l]),C=Object(n.useCallback)(function(){var e=Object(U.a)(M.a.mark((function e(a,t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/follow/following/".concat(a.username),{},t);case 2:(n=e.sent).success&&s(X({users:n.data,user:a.username}));case 4:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}(),[l,s,X]),I=function(){var e=Object(U.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=7;break}return e.next=3,l("/api/follow/".concat(k.id),{method:"DELETE"});case 3:e.sent.success&&(s($({producer:{id:o.id,username:o.username,picture:o.picture},consumer:{id:k.id,picture:k.picture,username:k.username},myPage:o.id===k.id})),X((function(e){return!e}))),e.next=11;break;case 7:return e.next=9,l("/api/follow/".concat(k.id),{method:"POST"});case 9:e.sent.success&&(s(Z({producer:{id:o.id,username:o.username,picture:o.picture},consumer:{id:k.id,picture:k.picture,username:k.username},myPage:o.id===k.id})),y((function(e){return!e})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=new AbortController,a=e.signal;return k.id&&!w.current&&(x(k,a),C(k,a)),function(){e.abort()}}),[k.id]);var L=Object(n.useState)("is-active"),A=Object(F.a)(L,2),D=A[0],P=A[1],R=Object(n.useState)(""),G=Object(F.a)(R,2),B=G[0],K=G[1],J=Object(n.useState)(""),z=Object(F.a)(J,2),V=z[0],q=z[1],Y=Object(n.useState)("card"),ee=Object(F.a)(Y,2),te=ee[0],ne=ee[1],re=Object(n.useState)("card-section is-active"),ce=Object(F.a)(re,2),le=ce[0],se=ce[1],ie=Object(n.useState)("card-section"),oe=Object(F.a)(ie,2),ue=oe[0],me=oe[1],de=Object(n.useState)("card-section"),pe=Object(F.a)(de,2),Ee=pe[0],fe=pe[1],Oe=Object(n.useState)("#about"),ge=Object(F.a)(Oe,2),Ne=ge[0],Se=ge[1],we=function(e){var a=e.target.getAttribute("data-section");ne("#about"!==a?function(e){return e+" is-active"}:function(e){return e.replace(/is-active/g," ")}),Se(a),se("card-section"),fe("card-section"),me("card-section"),P(""),K(""),q(""),"#experience"===a?(me((function(e){return e+" is-active"})),K("is-active")):"#about"===a?(se((function(e){return e+" is-active"})),P("is-active")):(fe((function(e){return e+" is-active"})),q("is-active"))},Te=function(e){S.current=!0,be.b.dark(r.a.createElement(ve,{username:e.username,context:e.context,picture:e.picture}),{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){return c.push("/direct")}}),t(e.chatId)};return j&&(T+=" LIKESMODAL_BTN_followed"),k&&d.user&&d.user===k.username&&m.user&&m.user===k.username?r.a.createElement("div",{className:"USER_INFO__container"},r.a.createElement(he,{followedBy:d,following:m}),r.a.createElement("button",{onClick:Te},"Notify !"),Object.keys(f).length&&!S.current&&Te(f),r.a.createElement(be.a,{position:"top-center",autoClose:5e3,newestOnTop:!0,closeOnClick:!0,rtl:!1}),r.a.createElement("div",{className:"USER_INFO_CENTER"},o.id!==k.id&&r.a.createElement("div",{className:"USER_INFO_CENTER_TOP"},r.a.createElement("button",{className:T,onClick:I},j?"Following":"Follow"),r.a.createElement("button",{className:"green USER_INFO_MESSAGE",onClick:function(){a({me:o,other:k}),c.push("/direct")}},"Message")),r.a.createElement("div",{className:te,"data-state":Ne},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-cover"}),r.a.createElement("img",{className:"card-avatar",src:k.picture,alt:"avatar"}),r.a.createElement("h1",{className:"card-fullname"},k.fullname),r.a.createElement("h2",{className:"card-jobtitle"},k.occupation)),r.a.createElement("div",{className:"card-main"},r.a.createElement("div",{className:le,id:"about"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-subtitle"},"ABOUT"),r.a.createElement("p",{className:"card-desc"},k.bio||"The user hasn't provided bio information")),r.a.createElement("div",{className:"card-social"},r.a.createElement("a",{href:"#"},r.a.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M15.997 3.985h2.191V.169C17.81.117 16.51 0 14.996 0c-3.159 0-5.323 1.987-5.323 5.639V9H6.187v4.266h3.486V24h4.274V13.267h3.345l.531-4.266h-3.877V6.062c.001-1.233.333-2.077 2.051-2.077z"}))),r.a.createElement("a",{href:"#"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{d:"M512 97.248c-19.04 8.352-39.328 13.888-60.48 16.576 21.76-12.992 38.368-33.408 46.176-58.016-20.288 12.096-42.688 20.64-66.56 25.408C411.872 60.704 384.416 48 354.464 48c-58.112 0-104.896 47.168-104.896 104.992 0 8.32.704 16.32 2.432 23.936-87.264-4.256-164.48-46.08-216.352-109.792-9.056 15.712-14.368 33.696-14.368 53.056 0 36.352 18.72 68.576 46.624 87.232-16.864-.32-33.408-5.216-47.424-12.928v1.152c0 51.008 36.384 93.376 84.096 103.136-8.544 2.336-17.856 3.456-27.52 3.456-6.72 0-13.504-.384-19.872-1.792 13.6 41.568 52.192 72.128 98.08 73.12-35.712 27.936-81.056 44.768-130.144 44.768-8.608 0-16.864-.384-25.12-1.44C46.496 446.88 101.6 464 161.024 464c193.152 0 298.752-160 298.752-298.688 0-4.64-.16-9.12-.384-13.568 20.832-14.784 38.336-33.248 52.608-54.496z"}))),r.a.createElement("a",{href:"#"},r.a.createElement("svg",{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M301 256c0 24.852-20.148 45-45 45s-45-20.148-45-45 20.148-45 45-45 45 20.148 45 45zm0 0"}),r.a.createElement("path",{d:"M332 120H180c-33.086 0-60 26.914-60 60v152c0 33.086 26.914 60 60 60h152c33.086 0 60-26.914 60-60V180c0-33.086-26.914-60-60-60zm-76 211c-41.355 0-75-33.645-75-75s33.645-75 75-75 75 33.645 75 75-33.645 75-75 75zm86-146c-8.285 0-15-6.715-15-15s6.715-15 15-15 15 6.715 15 15-6.715 15-15 15zm0 0"}),r.a.createElement("path",{d:"M377 0H135C60.562 0 0 60.563 0 135v242c0 74.438 60.563 135 135 135h242c74.438 0 135-60.563 135-135V135C512 60.562 451.437 0 377 0zm45 332c0 49.625-40.375 90-90 90H180c-49.625 0-90-40.375-90-90V180c0-49.625 40.375-90 90-90h152c49.625 0 90 40.375 90 90zm0 0"}))),r.a.createElement("a",{href:"#"},r.a.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M23.994 24v-.001H24v-8.802c0-4.306-.927-7.623-5.961-7.623-2.42 0-4.044 1.328-4.707 2.587h-.07V7.976H8.489v16.023h4.97v-7.934c0-2.089.396-4.109 2.983-4.109 2.549 0 2.587 2.384 2.587 4.243V24zM.396 7.977h4.976V24H.396zM2.882 0C1.291 0 0 1.291 0 2.882s1.291 2.909 2.882 2.909 2.882-1.318 2.882-2.909A2.884 2.884 0 002.882 0z"}))))),r.a.createElement("div",{className:ue,id:"experience"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-subtitle"},"WORK EXPERIENCE"),r.a.createElement(_e,{experience:[{id:1,year:2021,company:"Spotify",profession:"JS Developer",achievements:"Developed new versions"},{id:2,year:2022,company:"Spotify",profession:"JS Developer",achievements:"New products"},{id:3,year:2023,company:"Spotify",profession:"JS Developer",achievements:"New app"}]}))),r.a.createElement("div",{className:Ee,id:"contact"},r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"card-subtitle"},"CONTACT"),r.a.createElement("div",{className:"card-contact-wrapper"},r.a.createElement("div",{className:"card-contact"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"}),r.a.createElement("circle",{cx:"12",cy:"10",r:"3"})),k.based_in||"Not provided"),r.a.createElement("div",{className:"card-contact card-contact-center"},r.a.createElement("svg",{className:"svg-middle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})),k.phone_number||"Not provided"),r.a.createElement("div",{className:"card-contact"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},r.a.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),r.a.createElement("path",{d:"M22 6l-10 7L2 6"})),k.email),r.a.createElement("button",{className:"green"},"WORK")))),r.a.createElement("hr",null),r.a.createElement("div",{className:"card-buttons"},r.a.createElement("button",{"data-section":"#about",className:D,onClick:we},"ABOUT"),r.a.createElement("button",{className:B,"data-section":"#experience",onClick:we},"EXPERIENCE"),r.a.createElement("button",{className:V,"data-section":"#contact",onClick:we},"CONTACT"))))),r.a.createElement(je,{setSelectedImg:g}),_&&r.a.createElement(ye,{selectedImg:_,setSelectedImg:g})):r.a.createElement("div",null)}),we=t(85),Te=(t(52),function(e){var a=e.id,t=e.username,c=e.picture,l=e.alreadyFollowed,s=ae().request,o=Object(n.useState)(l),u=Object(F.a)(o,2),m=u[0],d=u[1],p=Object(i.c)((function(e){return e.loggedInUser}),(function(e,a){return W()(e,a)})),E=Object(i.c)((function(e){return e.currentPage}),(function(e,a){return W()(e,a)})),f=Object(i.b)(),b=function(){var e=Object(U.a)(M.a.mark((function e(){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log({following:m,id:a}),!m){e.next=8;break}return e.next=4,s("/api/follow/".concat(a),{method:"DELETE"});case 4:e.sent.success&&(f($({producer:{id:p.id,username:p.username,picture:p.picture},consumer:{id:a,picture:c,username:t},myPage:p.id===E.id})),d((function(e){return!e}))),e.next=12;break;case 8:return e.next=10,s("/api/follow/".concat(a),{method:"POST"});case 10:e.sent.success&&(f(Z({producer:{id:p.id,username:p.username,picture:p.picture},consumer:{id:a,picture:c,username:t},myPage:p.id===E.id})),d((function(e){return!e})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v="green";return m&&(v+=" LIKESMODAL_BTN_followed"),r.a.createElement("div",{className:"LIKESMODAL_ROW"},r.a.createElement(G.b,{to:"/".concat(t)},r.a.createElement("div",{className:"LIKESMODAL__title"},r.a.createElement("div",{className:"LIKESMODAL__title__left"},r.a.createElement("img",{src:c,alt:"avatar",className:"LIKESMODAL__profile_picture",style:{marginTop:"0px"}}),r.a.createElement("div",{className:"LIKESMODAL__header"},r.a.createElement("h3",{className:"LIKESMODAL__fullname"},t))),a!==p.id&&r.a.createElement("div",{className:"LIKESMODAL__title__right"},r.a.createElement("button",{className:v,onClick:b},m?"Following":"Follow")))))}),ke=function(e){var a=e.setSelectedImg,t=e.likes,n=Object(i.c)((function(e){return e.loggedInFollows}));return r.a.createElement(Ne.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(Ne.a.div,{className:"LIKESMODAL_CONTENT",initial:{y:"-100vh"},animate:{y:0}},t.data&&t.data.map((function(e){return r.a.createElement(Te,{key:e.person_id,id:e.person_id,picture:e.picture,username:e.username,alreadyFollowed:(a=e.person_id,n.users.map((function(e){return e.person_id})).includes(a))});var a}))))},xe=function(e){var a=e.id,t=e.picture,c=e.fullname,l=e.username,s=e.text,o=e.numberOfLikes,m=e.likes,d=e.postedAt,p=e.showSettings,E=e.loggedInfo,f=e.setSelectedLikes,b=e.deletePostHandler,v=e.editPostHandler,O=Object(i.b)(),_=ae().request,g=Object(n.useState)(null===m||void 0===m?void 0:m.alreadyLiked),h=Object(F.a)(g,2),N=h[0],j=h[1],y=N?"fa fa-heart liked":"fa fa-heart";Object(n.useEffect)((function(){j(null===m||void 0===m?void 0:m.alreadyLiked)}),[m]);var S=function(){var e=Object(U.a)(M.a.mark((function e(){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=N?"DELETE":"POST",e.next=3,_("/api/like/".concat(a),{method:t});case 3:(null===(n=e.sent)||void 0===n?void 0:n.success)&&(O(N?z(a):J(a)),O({type:"ON_LIKE",payload:Object(u.a)(Object(u.a)({},E),{},{id:a})}),j((function(e){return!e})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return m?r.a.createElement("div",null,r.a.createElement("div",{className:"POST__body"},r.a.createElement("div",{className:"POST__title"},r.a.createElement("div",{className:"POST__title__left"},r.a.createElement("img",{src:t,alt:"avatar",className:"POST__profile_picture"}),r.a.createElement("div",{className:"POST__header"},r.a.createElement("h3",{className:"POST__fullname"},c),r.a.createElement("h4",{className:"POST__username"},"@",l))),p&&r.a.createElement("div",{className:"POST__title__right"},r.a.createElement("i",{className:"fa fa-remove","aria-hidden":"true",style:{color:"red"},onClick:b.bind(null,a)}),r.a.createElement("i",{className:"fa fa-edit","aria-hidden":"true",onClick:v.bind(null,{id:a,picture:t,username:l,fullname:c,text:s})}))),r.a.createElement("div",{className:"POST__context"},r.a.createElement("p",null,s),r.a.createElement("div",{className:"POST__actions"},r.a.createElement("div",{className:"POST__like_section"},r.a.createElement("div",{className:"POST__like_button"},r.a.createElement("i",{className:y,"aria-hidden":"true",onClick:S}),N?r.a.createElement("h4",null,"\u200b Liked"):r.a.createElement("h4",null,"\u200b Like \u200b")),r.a.createElement("h4",{className:"POST_number_of_likes"},o," Likes "),r.a.createElement("div",{className:"POST__liked_by"},r.a.createElement("h4",null,"Liked by: "),r.a.createElement("div",{className:"POST__liked_by_images",onClick:function(){return f(m)}},r.a.createElement("img",{src:m.data.length?m.data[0].picture:"/api/public/uploads/blank.jpg",alt:"avatar"}),r.a.createElement("img",{src:m.data.length>1?m.data[1].picture:"/api/public/uploads/blank.jpg",alt:"avatar"}),r.a.createElement("img",{src:m.data.length>2?m.data[2].picture:"/api/public/uploads/blank.jpg",alt:"avatar"})))),r.a.createElement("h4",{className:"POST__creation_time"},d))))):r.a.createElement("div",null)};var Ce,Ie=function(e){var a=e.id,t=e.modal,c=e.username,l=e.fullname,s=e.picture,o=e.placeholder,u=e.handleEdit,m=Object(i.b)(),d=Object(n.useState)(o||""),p=Object(F.a)(d,2),E=p[0],f=p[1],b=ae().request,v=function(){var e=Object(U.a)(M.a.mark((function e(){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return e.next=3,b("/api/post/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:E})});case 3:n=e.sent,f(""),n.success&&(m({type:"ADD_POST",payload:{post:{post:n.rows}.post}}),m(V(n.rows.post_id)));case 6:if(!t){e.next=12;break}return e.next=9,b("/api/post/".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:E})});case 9:e.sent.success&&m(Y(a,E)),u(null);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"POST__body POSTINPUT "},r.a.createElement("div",{className:"POST__title"},r.a.createElement("div",{className:"POST__title__left"},r.a.createElement("img",{src:s,alt:"avatar",className:"POST__profile_picture",style:{marginTop:"0"}}),r.a.createElement("div",{className:"POST__header"},r.a.createElement("h3",{className:"POST__fullname"},l),r.a.createElement("h4",{className:"POST__username"},"@",c)))),r.a.createElement("div",{className:"POST__context"},r.a.createElement("textarea",{value:E,name:"message",autoFocus:!0,id:"message",rows:"4",className:"form-input",onChange:function(e){return f(e.target.value)}}),r.a.createElement("button",{className:"green",onClick:v},"Submit")))))},Le=(t(141),function(e){var a=e.handleEdit,t=e.info;return console.log({info:t}),r.a.createElement(Ne.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(Ne.a.div,{className:"LIKESMODAL_CONTENT EDIT",initial:{y:"-100vh"},animate:{y:0}},r.a.createElement(Ie,{id:t.id,modal:!0,username:t.username,fullname:t.fullname,picture:t.picture,placeholder:t.text,handleEdit:a})))}),Ae=function(){var e=Object(n.useRef)(!0),a=Object(n.useState)(!0),t=Object(F.a)(a,2),c=t[0],l=t[1],s=Object(n.useState)(null),o=Object(F.a)(s,2),u=o[0],m=o[1],d=Object(n.useState)(null),p=Object(F.a)(d,2),E=p[0],f=p[1],b=Object(i.b)(),v=ae().request,O=Object(i.c)((function(e){return e.currentPage}),(function(a,t){return e.current=W()(a,t),W()(a,t)})),_=Object(i.c)((function(e){return e.loggedInUser}),(function(e,a){return W()(e,a)})),g=Object.values(Object(i.c)((function(e){return e.posts}),(function(e,a){return W()(e,a)}))).sort(),h=Object(i.c)((function(e){return e.likes}),(function(e,a){return W()(e,a)})),N=function(){var e=Object(U.a)(M.a.mark((function e(a){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v("/api/post/".concat(a),{method:"DELETE"});case 2:e.sent.success&&b(q(a));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),j=function(e){console.log("editing",e.id),f(e)},y=Object(n.useState)(!1),S=Object(F.a)(y,2),T=S[0],k=S[1],x=Object(n.useRef)(0),C=Object(n.useCallback)(function(){var e=Object(U.a)(M.a.mark((function e(a){var t,n,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.map((function(e){return e.post_id})),n=t.map((function(e){return v("/api/like/".concat(e))})),e.next=4,Promise.all(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),[]),I=Object(n.useCallback)(function(){var e=Object(U.a)(M.a.mark((function e(a){var t,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.id||T){e.next=11;break}return e.next=3,v("/api/post/".concat(O.username,"?limit=5&offset=0"),{},a);case 3:if(!(t=e.sent).success){e.next=11;break}return k(!0),b({type:"SET_POSTS",payload:{posts:(r={posts:t.posts,user:O.username}).posts,user:r.user}}),e.next=9,C(t.posts);case 9:n=e.sent,b({type:"SET_LIKES",payload:{likes:{likes:n}.likes}});case 11:case"end":return e.stop()}var r}),e)})));return function(a){return e.apply(this,arguments)}}(),[O.id]);Object(n.useEffect)((function(){var a=new AbortController,t=a.signal;return e.current||I(t),function(){a.abort()}}),[I]);var L=function(){var e=Object(U.a)(M.a.mark((function e(){var a,t;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.current+=5,e.next=3,v("/api/post/".concat(O.username,"?limit=5&offset=").concat(x.current));case 3:return a=e.sent,e.next=6,C(a.posts);case 6:return t=e.sent,e.next=9,Object(w.sleep)(300);case 9:if(a.posts.length){e.next=12;break}return l(!1),e.abrupt("return");case 12:b({type:"LOAD_MORE_POSTS",payload:{posts:{posts:a.posts}.posts}}),b({type:"LOAD_MORE_LIKES",payload:{likes:{likes:t}.likes}});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g[g.length-1]!==O.username?r.a.createElement("div",null):Object.keys(h).length?r.a.createElement("div",{className:"POSTS__container"},O.id===_.id&&r.a.createElement(Ie,{picture:O.picture,fullname:O.fullname,username:O.username}),r.a.createElement(we.a,{dataLength:g.length,next:L,hasMore:c,loader:r.a.createElement("h4",null,"Loading...")},g.reverse().slice(1).map((function(e){return r.a.createElement(xe,{key:e.post_id,id:e.post_id,picture:O.picture,fullname:O.fullname,username:O.username,text:e.caption,numberOfLikes:e.number_of_likes,postedAt:e.created_at,showSettings:O.id===_.id,likes:h[e.post_id],loggedInfo:{user_id:_.id,username:_.username,picture:_.picture},setSelectedLikes:m,deletePostHandler:N,editPostHandler:j})}))),u&&r.a.createElement(ke,{setSelectedImg:m,likes:u}),E&&r.a.createElement(Le,{handleEdit:f,info:E})):r.a.createElement("div",null)},De=function(e){var a=e.match,t=e.startMessagingHandler,c=e.setOpenDialog,l=Object(i.b)(),s=a.params.username,o=Object(n.useState)(null),u=Object(F.a)(o,2),m=u[0],d=u[1],p=ae(),E=p.loading,f=p.request,b=Object(n.useCallback)(Object(U.a)(M.a.mark((function e(){var a,t,n,r,c,i,o,u,m,p;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f("/api/user/".concat(s));case 2:(a=e.sent).success?(t=a.info,n=t.based_in,r=t.email,c=t.fullname,i=t.number_of_posts,o=t.occupation,u=t.phone_number,m=t.picture,p=a.info.person_id,l({type:"SET_CURRENT_PAGE",payload:{id:(E={id:p,username:s,based_in:n,email:r,fullname:c,number_of_posts:i,occupation:o,phone_number:u,picture:m}).id,username:E.username,based_in:E.based_in,email:E.email,fullname:E.fullname,number_of_posts:E.number_of_posts,occupation:E.occupation,phone_number:E.phone_number,picture:E.picture}})):d(void 0);case 4:case"end":return e.stop()}var E}),e)}))),[s,f,l]);return Object(n.useEffect)((function(){b()}),[s,b]),void 0===m?r.a.createElement(fe,null):E?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(me,null)),r.a.createElement(Se,{startMessagingHandler:t,setOpenDialog:c}),r.a.createElement(Ae,null))},Pe=(t(142),t(89)),Re=t(21),Me=t(165),Ue=t(166),Fe=t(171),Ge=t(164),He=t(167),Be=t(168),We=t(169),Ke=t(170),Je=(t(81),Object(Pe.a)({typography:{fontFamily:["iCiel Gotham","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}})),ze=Object(Re.a)((function(e){return{root:{border:"none",borderColor:"black"},body:{fontSize:14,backgroundColor:"rgb(44, 44, 44)",color:"rgb(177, 176, 176)"}}}))(Fe.a),Ve=Object(Re.a)((function(e){return{root:{border:"none",borderColor:"black"},body:{fontSize:14,backgroundColor:"rgb(44, 44, 44)",color:e.palette.common.white}}}))(Fe.a),qe=Object(Re.a)((function(e){return{root:{font:"iCiel Gotham","&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(Ge.a),Ye=Object(Me.a)({table:{minWidth:200}}),Xe=function(e){var a=e.tab,t=e.data,n=e.handler,c=Ye(),l=Object(w.adjustToTable)(t);return r.a.createElement(Ue.a,{theme:Je},r.a.createElement(He.a,{component:Be.a},r.a.createElement(We.a,{className:c.table,"aria-label":"simple table"},r.a.createElement(Ke.a,null,l.map((function(e){return r.a.createElement(qe,{key:e.field},r.a.createElement(ze,{align:"left"},e.field),r.a.createElement(Ve,{align:"left"},"overview"===a?e.value:r.a.createElement("input",{type:"Password"===e.field?"password":"text",id:"txt",name:e.field,value:e.value,onChange:n})))}))))))},Qe=(t(143),function(){var e=Object(n.useState)(null),a=Object(F.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(!1),s=Object(F.a)(l,2),o=(s[0],s[1],Object(n.useState)(!1)),u=Object(F.a)(o,2),m=u[0],d=(u[1],Object(i.c)((function(e){return e.loggedInUser}))),p=d.username,E=d.picture,f=Object(i.b)();console.log({username:p,picture:E});var b=function(){var e=Object(U.a)(M.a.mark((function e(a){var n,r,l,s,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),(n=new FormData).append("profilePhoto",t),r=m?"DELETE":"POST",l="http://localhost:3000/api/user/".concat(p,"/addPicture"),m&&(l="http://localhost:3000/api/user/".concat(p,"/deletePicture")),e.next=8,fetch(l,{method:r,body:n});case 8:return s=e.sent,e.next=11,s.json();case 11:i=e.sent,console.log(i),f(K(i.src)),c(null);case 15:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{class:"UPLOAD_panel"},r.a.createElement("div",{class:"UPLOAD_button_outer"},t?r.a.createElement("div",{className:"newPictureBtns"},r.a.createElement("button",{className:"green",onClick:b},"Submit"),r.a.createElement("button",{className:"green red",onClick:function(e){e.preventDefault(),c(null)}},"Reset")):r.a.createElement("div",{class:"UPLOAD_btn_upload"},r.a.createElement("input",{type:"file",id:"UPLOAD_PROFILE_PICTURE",name:"",onChange:function(e){var a=e.target.files[0];c(a)}}),"Upload New Image"))))}),Ze=function(){var e=Object(i.b)(),a=ae(),t=a.request,c=a.error,l=Object(i.c)((function(e){return e.loggedInUser})),s=Object(n.useState)(0),o=Object(F.a)(s,2),m=o[0],d=o[1],p=Object(n.useState)({username:l.username,based_in:l.based_in,email:l.email,fullname:l.fullname,occupation:l.occupation,phone_number:l.phone_number}),E=Object(F.a)(p,2),b=E[0],v=E[1],O=Object(n.useState)(!1),_=Object(F.a)(O,2),g=_[0],h=_[1],N=Object(n.useState)(""),j=Object(F.a)(N,2),y=j[0],S=j[1],T=Object(n.useState)(!1),k=Object(F.a)(T,2),x=k[0],C=k[1],I=function(e){return d(e)},L=function(){var a=Object(U.a)(M.a.mark((function a(n){var r;return M.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,t("/api/user/info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});case 3:(null===(r=a.sent)||void 0===r?void 0:r.success)&&h(!0),e({type:"UPDATE_PROFILE_INFO",payload:{username:(c=b).username,based_in:c.based_in,email:c.email,fullname:c.fullname,occupation:c.occupation,phone_number:c.phone_number}});case 6:case"end":return a.stop()}var c}),a)})));return function(e){return a.apply(this,arguments)}}(),A=function(){var e=Object(U.a)(M.a.mark((function e(){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/user/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:y})});case 2:(null===(a=e.sent)||void 0===a?void 0:a.success)&&(window.location.href="/login",window.location.reload(!0)),C(!0),S("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=Object(w.deepCopy)(l),P=Object(w.deleteProperties)(D,["id","ready","isAuthenticated","picture"]);return r.a.createElement("div",{className:"settings-container"},r.a.createElement("div",{className:"left-column"},r.a.createElement("ul",null,r.a.createElement("li",{onClick:I.bind(null,0)},r.a.createElement("i",{className:"fa fa-user"}),"Overview"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:I.bind(null,1)},r.a.createElement("i",{className:"fa fa-lock"}),"Edit Profile"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:I.bind(null,2)},r.a.createElement("i",{className:"fa fa-lock"}),"Change Password"),r.a.createElement("hr",{class:"HRsettings"}),r.a.createElement("li",{onClick:I.bind(null,3)},r.a.createElement("i",{className:"fa fa-minus-circle"}),"Delete profile"))),r.a.createElement("div",{className:"settings-tab"},0===m&&r.a.createElement("div",{className:"settings-overview"},r.a.createElement("h1",null,"Account overview"),r.a.createElement("div",{className:"settings-overview-img"},r.a.createElement("img",{src:l.picture,alt:"avatar"}),r.a.createElement(Qe,null)),r.a.createElement("div",{className:"settings-overview-table"},r.a.createElement(Xe,{tab:"overview",data:P}))),1===m&&r.a.createElement("form",{className:"settings-form"},r.a.createElement("div",{className:"settings-overview"},r.a.createElement("h1",null,"Edit profile"),r.a.createElement(Xe,{tab:"edit",data:b,handler:function(e){var a=e.target.name;g&&h(!1);var t=e.target.value;v((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(f.a)({},a,t))}))}}),r.a.createElement("button",{className:"btn green",onClick:L},"Submit"),c&&r.a.createElement("h2",{style:{color:"red",marginTop:"10px"}},"Error: ",c),g&&r.a.createElement("h2",{style:{color:"green",marginTop:"10px"}},"Information updated"))),2===m&&r.a.createElement("form",{onSubmit:function(){return console.log("Submitted")}},r.a.createElement("h1",null,"Change password"),r.a.createElement(Xe,{tab:"edit",data:{"Old Password":"","New Password":"","Confirm new password":""}}),r.a.createElement("button",{className:"btn green"},"Submit")),3===m&&r.a.createElement("form",null,r.a.createElement("h1",null,"Delete your profile"),r.a.createElement("h2",null,"Are you sure you want to delete your profile ?",r.a.createElement("br",null)," All your matchs will be lost..."),r.a.createElement("div",{className:"input-group"},r.a.createElement(Xe,{tab:"edit",data:{Password:y},handler:function(e){var a;S(null===(a=e.target)||void 0===a?void 0:a.value)}}),r.a.createElement("button",{type:"button",className:"green",onClick:A},"Submit"),x&&r.a.createElement("h2",{style:{color:"red",marginTop:"10px"}},"Wrong password")))))},$e=function(){return r.a.createElement("div",null,r.a.createElement(me,null),r.a.createElement(Ze,null))},ea=function(){return r.a.createElement("div",null,r.a.createElement(me,null),"About page")},aa=(t(53),t(59)),ta=function(e){var a=e.chat_id,t=e.person_id,n=e.name,c=e.picture,l=e.latestMessage,s=e.unreadMessagesCount,o=e.openDialog,u=e.handleChatClick,m=e.empty,d=Object(i.c)((function(e){return e.loggedInUser})),p=Object(i.c)((function(e){return e.onlineUsers})),E=n===o?"CHAT_ROW__container CHAT_ROW__container_active":"CHAT_ROW__container";return m?r.a.createElement("div",null,r.a.createElement("p",null,"You have no chats")):r.a.createElement("div",null,r.a.createElement("div",{className:E,onClick:u.bind(null,a)},r.a.createElement("div",{className:"CHAT_ROW__left"},r.a.createElement("img",{src:c})),r.a.createElement("div",{className:"CHAT_ROW__center"},r.a.createElement("div",{className:"CHAT_ROW_TITLE"},r.a.createElement("h4",null,n),p.ids.includes(t.toString())?r.a.createElement("i",{className:"fa fa-circle CHAT_ROW_ONLINE"}):""),r.a.createElement("h5",null,d.id===(null===l||void 0===l?void 0:l.sender_id)&&"You: ",Object(aa.prepareText)(null===l||void 0===l?void 0:l.context))),r.a.createElement("div",{className:"CHAT_ROW__right"},r.a.createElement("p",null,"now"===(null===l||void 0===l?void 0:l.send_at)?"now":Object(aa.adjustTime)(null===l||void 0===l?void 0:l.send_at)),s?r.a.createElement(le,{size:"smaller",status:"danger",content:s}):"")),r.a.createElement("hr",{className:"hr_chat"}))},na=t(61),ra=function(e,a){var t,n;return(null===(t=e.latestMessage)||void 0===t?void 0:t.send_at)<(null===(n=a.latestMessage)||void 0===n?void 0:n.send_at)?1:-1},ca=function(e){var a=e.chats,t=e.openDialog,n=e.handleChatClick,c=e.empty,l=function(e,a){var t=e.filter((function(e){return!e.latestMessage})),n=e.filter((function(e){return e.latestMessage}));return n.sort(a),[].concat(Object(na.a)(n),Object(na.a)(t))}(a,ra);return r.a.createElement("div",null,l.map((function(e){return r.a.createElement(ta,{key:e.id,chat_id:e.room_id,name:e.username,person_id:e.person_id,picture:e.picture,latestMessage:e.latestMessage,unreadMessagesCount:e.unread,openDialog:t,handleChatClick:n,empty:c})})))},la=function(e){var a=e.context,t=e.isOwner,n=e.date,c="MESSAGES__chat-msg ";return t&&(c+="MESSAGES__owner"),r.a.createElement("div",{layout:!0,className:c},r.a.createElement("div",{className:"MESSAGES__chat-msg-content"},r.a.createElement("div",{class:"MESSAGES__chat-msg-text"},r.a.createElement("div",{className:"MESSAGES__chat-msg-text-context"},a),r.a.createElement("div",{className:"MESSAGES__chat-msg-date"},n))))},sa=(t(144),function(e){var a,t=e.data,c=e.textInput,l=e.setOpenDialog,s=e.handleMessageSend,o=e.handleChange,u=e.empty,m=Object(i.c)((function(e){return e.loggedInUser})),d=Object(n.useRef)(null);return Object(n.useEffect)((function(){d.current.scrollIntoView({behavior:"auto"})}),[null===t||void 0===t||null===(a=t.messages)||void 0===a?void 0:a.length]),console.log({empty:u,data:t}),t?r.a.createElement("div",{className:"MESSAGES__container"},r.a.createElement("div",{className:"MESSAGES__title"},r.a.createElement("i",{className:"fa fa-caret-left MESSAGES_back_button",onClick:function(){return l(null)}}),r.a.createElement("h4",null,t.username),r.a.createElement("div",{className:"MESSAGES_title_picture"},r.a.createElement("img",{src:t.picture}))),r.a.createElement("div",{className:"MESSAGES__body"},t.messages.map((function(e){return r.a.createElement(la,{key:e.id,context:e.text,isOwner:+e.from===+m.id,date:e.date})})),r.a.createElement("div",{ref:d})),r.a.createElement("div",{className:"MESSAGES__send"},r.a.createElement("textarea",{value:c,onChange:o,name:"message",autoFocus:!0,rows:"1",className:"form-input MESSAGES_INPUT"}),r.a.createElement("i",{class:"fa fa-paper-plane MESSAGES_SEND",onClick:s.bind(null,t.room_id,m.id)}))):r.a.createElement("div",{className:"MESSAGES__container"},r.a.createElement("div",{ref:d}))}),ia=function(e){var a=e.textInput,t=e.dialog,c=e.openDialog,l=e.handleChatClick,s=e.handleChange,o=e.handleMessageSend,u=e.setOpenDialog,m=Object.values(Object(i.c)((function(e){return e.chats}))),d=Object.values(Object(i.c)((function(e){return e.messages})));if(Object(n.useEffect)((function(){u(null)}),[]),!m.length||!d.length)return r.a.createElement("div",null);return console.log({dialog:t}),r.a.createElement("div",{className:"DIRECT__page"},r.a.createElement(me,null),r.a.createElement("div",{className:"DIRECT__component"},r.a.createElement("div",{className:t?"DIRECT__left_side ".concat("DIRECT_SIDE_NOT_ACTIVE"):"DIRECT__left_side"},r.a.createElement(ca,{chats:m,openDialog:c,handleChatClick:l,empty:!0===m[0]})),r.a.createElement("div",{className:t?"DIRECT__right_side":"DIRECT__right_side ".concat("DIRECT_SIDE_NOT_ACTIVE")},r.a.createElement(sa,{data:c?d.filter((function(e){return+e.room_id===+c}))[0]:null,textInput:a,handleMessageSend:o,handleChange:s,setOpenDialog:u,empty:!0===d[0]}))))},oa=(t(145),new WebSocket("wss://mellowgram.herokuapp.com/")),ua=function(){var e=Object(i.b)(),a=ae().request,t=te().loading,c=Object(n.useState)(""),l=Object(F.a)(c,2),s=l[0],o=l[1],u=Object(n.useState)(null),m=Object(F.a)(u,2),d=m[0],p=m[1],E=Object(i.c)((function(e){return e.loggedInUser})),f=Object.values(Object(i.c)((function(e){return e.chats}))),b=function(e){o(e.target.value)},v=function(a,t){s&&(oa.send(JSON.stringify({action:"SEND_MESSAGE",roomId:a,senderId:t,context:s,uuid:E.uuid})),e(ee({info:{messageId:"//Do not know yet",roomId:a,senderId:t,context:s,date:"now"},me:E}))),o("")},O=function(a){var t=f.filter((function(e){return e.room_id===a}))[0];o(""),p(a),t.unread&&(e({type:"RESET_UNREAD_COUNTER",payload:{chatId:{chatId:a}.chatId}}),oa.send(JSON.stringify({action:"SET_READ",chatId:a,userId:E.id})))},_=function(e){var a=e.me,t=e.other;oa.send(JSON.stringify({action:"START_CHAT",me:a,other:t}))},g=Object(n.useCallback)(function(){var t=Object(U.a)(M.a.mark((function t(n,r){var c;return M.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.id){t.next=5;break}return t.next=3,a("/api/follow/following/".concat(E.username),{},r);case 3:(c=t.sent).success&&e({type:"SET_LOGGED_IN_FOLLOWING",payload:{users:(l={users:c.data,user:E.username}).users,user:l.user}});case 5:case"end":return t.stop()}var l}),t)})));return function(e,a){return t.apply(this,arguments)}}(),[a,E.id]);return Object(n.useEffect)((function(){oa.onmessage=function(a){var t,n,r=JSON.parse(a.data);switch(console.log({message:r}),r.action){case"INFORMATION_IS_READY":oa.send(JSON.stringify({action:"GET_CHATS",id:E.id})),oa.send(JSON.stringify({action:"GET_ONLINE",user_id:E.id}));break;case"GET_CHATS":e({type:"GET_CHATS",payload:{chats:(n={chats:r.payload.rooms,messages:r.payload.messages,me:r.payload.id}).chats,messages:n.messages,me:n.me}}),e({type:"GET_MESSAGES",payload:{messages:(t={messages:r.payload.messages,chats:r.payload.rooms}).messages,chats:t.chats}}),e({type:"SET_UUID",payload:{uuid:{uuid:r.payload.uuid}.uuid}});break;case"GET_ONLINE":e({type:"SET_ONLINE",payload:{onlineIds:{onlineIds:r.payload}.onlineIds}});break;case"SEND_MESSAGE":var c=r.messageInfo;e(ee({info:c,me:E}));break;case"START_CHAT":var l=r.chat;e({type:"ADD_CHAT",payload:{chat:{chat:l}.chat}}),p(l.room_id)}},oa.onclose=function(){console.log("Connection closed")}}),[]),Object(n.useEffect)((function(){g(E)}),[g]),t?r.a.createElement("div",null):E.isAuthenticated?r.a.createElement(G.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(H.d,null,r.a.createElement(H.b,{exact:!0,path:"/header",render:function(e){return r.a.createElement(me,e)}}),r.a.createElement(H.a,{from:"/",exact:!0,to:"/".concat(E.username)}),r.a.createElement(H.a,{from:"/login",exact:!0,to:"/".concat(E.username)}),r.a.createElement(H.a,{from:"/signup",exact:!0,to:"/".concat(E.username)}),r.a.createElement(H.b,{exact:!0,path:"/account",render:function(e){return r.a.createElement($e,e)}}),r.a.createElement(H.b,{exact:!0,path:"/about",render:function(e){return r.a.createElement(ea,e)}}),r.a.createElement(H.b,{exact:!0,path:"/direct",render:function(e){return r.a.createElement(ia,Object.assign({},e,{dialog:d,textInput:s,openDialog:d,handleChatClick:O,handleChange:b,handleMessageSend:v,setOpenDialog:p}))}}),r.a.createElement(H.b,{exact:!0,path:"/:username",render:function(e){return r.a.createElement(De,Object.assign({},e,{startMessagingHandler:_,setOpenDialog:p}))}}),r.a.createElement(H.b,{render:function(e){return r.a.createElement(fe,e)}})))):r.a.createElement(G.a,null,r.a.createElement("div",{className:"container"},r.a.createElement(H.d,null,r.a.createElement(H.a,{path:"/",exact:!0,to:"/login"}),r.a.createElement(H.b,{exact:!0,path:"/signup",render:function(e){return r.a.createElement(Ee,e)}}),r.a.createElement(H.b,{exact:!0,path:"/header",render:function(e){return r.a.createElement(me,e)}}),r.a.createElement(H.b,{exact:!0,path:"/login",render:function(e){return r.a.createElement(de,e)}}),r.a.createElement(H.b,{exact:!0,path:"/about",render:function(e){return r.a.createElement(ea,e)}}),r.a.createElement(H.b,{exact:!0,path:"/:username",render:function(e){return r.a.createElement(De,e)}}),r.a.createElement(H.b,{render:function(e){return r.a.createElement(fe,e)}}))))};Ce=Object(s.e)(P,Object(s.d)(Object(s.a)(o.a)));var ma=r.a.createElement(i.a,{store:Ce},r.a.createElement(r.a.StrictMode,null,r.a.createElement(ua,null)));l.a.render(ma,document.getElementById("root"))},33:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){},59:function(e,a){e.exports={adjustTime:function(e){return e?e.split("T")[1].split(".")[0].split(":").slice(0,2).map((function(e,a){return 0===a?(Number(e)+6).toString():e})).join(":"):null},prepareText:function(e){return e?e.length>34?e.toString().substring(0,36).concat("..."):e:"No messages yet"}}},78:function(e,a,t){},79:function(e,a,t){},80:function(e,a,t){},81:function(e,a,t){},93:function(e,a,t){e.exports=t(146)}},[[93,1,2]]]);
//# sourceMappingURL=main.3e650e99.chunk.js.map