(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},106:function(e){e.exports=JSON.parse('{"a":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}')},121:function(e,t,a){e.exports=a(178)},130:function(e,t,a){},154:function(e,t){},160:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},165:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),l=a(19),s=a.n(l),o=a(33),i=a(5),u=a(105),d=a(26),m=a(1),p=a(13),f=(n={isAuthenticated:!1,id:null,bio:null,username:null,based_in:null,email:null,fullname:null,number_of_posts:null,occupation:null},Object(p.a)(n,"based_in",null),Object(p.a)(n,"phone_number",null),Object(p.a)(n,"picture",null),Object(p.a)(n,"interests",null),Object(p.a)(n,"ready",!1),n),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_USER":var a=t.payload.information;return Object(m.a)(Object(m.a)(Object(m.a)({},e),{},{isAuthenticated:!0},a),{},{ready:!0});case"EDIT_AUTH":var n=t.payload.updatedFields;return Object(m.a)(Object(m.a)({},e),n);case"LOAD_NEW_PICTURE":var r=t.payload.pictureMeta,c=e.pictures;return c.unshift.apply(c,Object(d.a)(r)),Object(m.a)(Object(m.a)({},e),{},{pictures:c});case"REMOVE_PICTURE":var l=t.payload.picture,s=e.pictures;return s=s.filter((function(e){return e.picture_id!==l.picture_id})),Object(m.a)(Object(m.a)({},e),{},{pictures:s});case"SET_UUID":return Object(m.a)(Object(m.a)({},e),{},{uuid:t.payload.uuid});default:return Object(m.a)(Object(m.a)({},e),{},{ready:!0})}},b={id:null,bio:null,username:null,based_in:null,email:null,fullname:null,number_of_posts:null,occupation:null,phone_number:null,picture:null,ready:!1,interests:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_PAGE":return Object(m.a)(Object(m.a)({},e),{},{id:t.payload.id,bio:t.payload.bio,username:t.payload.username,based_in:t.payload.based_in,email:t.payload.email,fullname:t.payload.fullname,number_of_posts:t.payload.number_of_posts,occupation:t.payload.occupation,phone_number:t.payload.phone_number,picture:t.payload.picture,ready:!0});case"ADD_INTERESTS":var a=t.payload.interests;return Object(m.a)(Object(m.a)({},e),{},{interests:a});case"EDIT_CURRENT":var n=t.payload.updatedFields;return Object(m.a)(Object(m.a)({},e),n);default:return Object(m.a)(Object(m.a)({},e),{},{ready:!0})}},v={user:null},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_POSTS":var a=t.payload,n=a.posts,r=a.user,c={};return 0===n.length?{user:r}:(n.forEach((function(e){c[e.post_id]=e})),Object(m.a)(Object(m.a)({},c),{},{user:r}));case"ADD_POST":var l=t.payload.post,s={};return s[l.post_id]=l,Object(m.a)(Object(m.a)(Object(m.a)({},e),s),{},{user:e.user});case"LOAD_MORE_POSTS":var o=t.payload.posts,i={};return o.forEach((function(e){i[e.post_id]=e})),Object(m.a)(Object(m.a)(Object(m.a)({},e),i),{},{user:e.user});case"INCREMENT_NUMBER_OF_LIKES":var u=t.payload.id,d=e[u].number_of_likes,f=e[u];return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},u,Object(m.a)(Object(m.a)({},f),{},{number_of_likes:d+1})));case"DECREMENT_NUMBER_OF_LIKES":var E=t.payload.id,b=e[E].number_of_likes,O=e[E];return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},E,Object(m.a)(Object(m.a)({},O),{},{number_of_likes:b-1})));case"DELETE_POST":var h=t.payload.id;console.log({id:h,state:e});var g=Object(m.a)({},e);return delete g[h],console.log({final:g}),g;case"EDIT_POST":var _=t.payload,y=_.id,j=_.newCaption,N=Object(m.a)({},e);return N[y].caption=j,N;default:return e}},g={},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIKES":var a=t.payload.likes,n={};return 0===a.length?{loaded:!0}:(a.forEach((function(e){n[e.id]=e})),n);case"LOAD_MORE_LIKES":var r=t.payload.likes,c={};return r.forEach((function(e){c[e.id]=e})),Object(m.a)(Object(m.a)({},e),c);case"ON_LIKE":var l=t.payload,s=l.user_id,o=l.id,i=e[o].data,u=i.filter((function(e){return e.person_id!==t.payload.user_id}));return i.length===u.length?(u.push({person_id:+s,picture:t.payload.picture,username:t.payload.username}),Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},o,{id:o,data:u,alreadyLiked:!0}))):Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},o,{id:o,data:u,alreadyLiked:!1}));case"CREATE_LIKES_ON_ADD_POST":var d=t.payload.id,f={id:d,data:[],alreadyLiked:!1};return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},d,f));default:return e}},y={user:null},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FOLLOWING":var a=t.payload,n=a.users,r=a.user;return Object(m.a)(Object(m.a)({},e),{},{users:n,user:r});default:return e}},N={user:null},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FOLLOWED_BY":var a=t.payload,n=a.users,r=a.user;return Object(m.a)(Object(m.a)({},e),{},{users:n,user:r});case"ADD_FOLLOW":var c=t.payload.myPage,l=t.payload.producer,s=l.id,o=l.picture,i=l.username,u=e.users;return u.push({person_id:s,picture:o,username:i}),console.log({myPage:c}),Object(m.a)(Object(m.a)({},e),{},{users:u});case"DELETE_FOLLOW":var d=t.payload.myPage,p=t.payload.producer.id,f=e.users;return console.log({myPage:d}),f=f.filter((function(e){return e.person_id!==p})),Object(m.a)(Object(m.a)({},e),{},{users:f});default:return e}},k={user:null},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOGGED_IN_FOLLOWING":var a=t.payload,n=a.users,r=a.user;return Object(m.a)(Object(m.a)({},e),{},{users:n,user:r});case"ADD_FOLLOW":var c=t.payload.consumer,l=c.id,s=c.picture,o=c.username,i=t.payload.myPage;if(i)return e;var u=e.users;return u.push({person_id:l,picture:s,username:o}),Object(m.a)(Object(m.a)({},e),{},{users:u});case"DELETE_FOLLOW":var d=t.payload.consumer.id,p=(t.payload.myPage,e.users);return p=p.filter((function(e){return e.person_id!==d})),Object(m.a)(Object(m.a)({},e),{},{users:p});default:return Object(m.a)(Object(m.a)({},e),{},{ready:!0})}},C=function(e){return new Promise((function(t){setTimeout(t,e)}))},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"post_id",a={};return e?(e.forEach((function(e){a[e[t]]=e})),a):{}},I=function(){return{method:"GET",headers:{"x-rapidapi-host":"wft-geo-db.p.rapidapi.com","x-rapidapi-key":localStorage.getItem("RAPID_API_KEY")}}},x={ready:!1},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHATS":var a=t.payload,n=a.chats,r=a.messages,c=a.me,l=w(n,"room_id"),s=function(t){var a=Object(m.a)({},l);for(var n in a)a[n]=Object(m.a)(Object(m.a)({},a[n]),{},{unread:0});return t.length?(t.filter((function(e){return+e.sender_id!==+c})).filter((function(e){return!e.is_read})).map((function(e){Object.keys(a).includes(e.room_id.toString())&&a[e.room_id].unread++})),a):Object(m.a)(Object(m.a)({},e),a)},o=s(r);return Object(m.a)(Object(m.a)(Object(m.a)({},e),o),{},{ready:!0});case"ADD_MESSAGE":var i=t.payload,u=i.info,d=i.me,p=JSON.parse(JSON.stringify(e));return p[u.roomId].latestMessage={message_id:u.messageId,room_id:u.roomId,sender_id:u.senderId,context:u.context,send_at:u.date,is_read:!0},+d.id!==+u.senderId&&(p[u.roomId].unread+=1),Object(m.a)(Object(m.a)({},e),p);case"ADD_CHAT":var f=t.payload.chat,E=w([f],"room_id");return Object(m.a)(Object(m.a)({},e),E);case"RESET_UNREAD_COUNTER":var b=t.payload.chatId,O=JSON.parse(JSON.stringify(e));return O[b].unread=0,Object(m.a)(Object(m.a)({},e),O);default:return e}},D=a(113),L=a(53),R=a(106),P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message";if(!e)return null;if("chat"===t){var a=new Date(e),n=new Date;if(a.getFullYear()!==n.getFullYear())return"".concat(a.getDate(),".").concat(a.getMonth(),".").concat(a.getFullYear);if(n.getMonth()!==a.getMonth()){var r=a.getMonth();return"".concat(a.getDate(),".").concat(1===r.toString().length?"0".concat(r):r)}if(n.getDate()-7>a.getDate()&&n.getMonth()!==a.getMonth()){var c=a.getMonth();return"".concat(a.getDate(),".").concat(1===c.toString().length?"0".concat(c):c)}if(n.getDay()!==a.getDay())return R.a[a.getDay()]}var l=e.split("T")[1].split(".")[0].split(":").slice(0,2),s=l.map((function(e,t){return 0===t?(Number(e)+6).toString():e}));return s.join(":")},M=function(e){return e.reduce((function(e,t){var a={},n={};a.day=new Date(t.date).getDate(),a.month=new Date(t.date).getMonth(),a.year=new Date(t.date).getFullYear();var r=e[e.length-1];return 0===e.length?[].concat(Object(d.a)(e),[{type:"separator",date:"".concat(a.day," ").concat(L.a[a.month])},t]):(n.day=new Date(r.date).getDate(),n.month=new Date(r.date).getMonth(),n.year=new Date(r.date).getFullYear(),n.day!==a.day?[].concat(Object(d.a)(e),[{type:"separator",room_id:t.room_id,date:"".concat(a.day," ").concat(L.a[a.month])},t]):n.month!==a.month?[].concat(Object(d.a)(e),[{type:"separator",date:"".concat(a.day," ").concat(L.a[a.month])},t]):n.year!==a.year?[].concat(Object(d.a)(e),[{type:"separator",date:"".concat(a.day," ").concat(L.a[a.month]," ").concat(a.year)},t]):[].concat(Object(d.a)(e),[t]))}),[])},U={ready:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MESSAGES":var a=t.payload,n=a.messages,r=a.chats,c=n.sort((function(e,t){return e.message_id-t.message_id})).map((function(e){return{message_id:e.message_id,room_id:e.room_id,from:e.sender_id,text:e.context,date:e.send_at}})),l=r.map((function(e){var t=c.filter((function(t){return+t.room_id===+e.room_id}));return{room_id:+e.room_id,username:e.username,picture:e.picture,messages:t}})),s=l.map((function(e){return e.messages=M(e.messages),e}));s=s.map((function(e){return e.messages=e.messages.map((function(e){return e.type?e:Object(m.a)(Object(m.a)({},e),{},{date:P(e.date,"message")})})),e}));var o=w(s,"room_id");return Object(m.a)(Object(m.a)({},e),{},{ready:!0},o);case"ADD_MESSAGE":var i=t.payload.info,u=Object(m.a)({},e);return u[i.roomId].messages.push({message_id:i.messageId,room_id:i.roomId,from:i.senderId,text:i.context,date:i.date}),Object(m.a)(Object(m.a)({},e),u);case"ADD_CHAT":var d=t.payload.chat,p=(d.latestMessage,d.unread,d.person_id,Object(D.a)(d,["latestMessage","unread","person_id"]));p.messages=[];var f=w([p],"room_id");return Object(m.a)(Object(m.a)({},e),f);default:return e}},H={ids:[]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ONLINE":var a=t.payload.onlineIds;return console.log({onlineIds:a}),Object(m.a)(Object(m.a)({},e),{},{ids:a});default:return e}},G={},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HOME_POSTS":var a=t.payload,n=a.posts,r=a.likes,c={};return n.forEach((function(e){var t=r.filter((function(t){return t.id===e.post_id}))[0];c[e.post_id]=Object(m.a)(Object(m.a)({},e),{},{likes:t})})),Object(m.a)(Object(m.a)(Object(m.a)({},e),c),{},{ready:!0});case"LIKE_POST_HOME":var l,s=t.payload,o=s.post,i=s.me,u=e[o],d=u.likes.alreadyLiked;return d?((l=Object(m.a)({},u)).number_of_likes--,l.likes.data=l.likes.data.filter((function(e){return e.person_id!==i.id}))):((l=Object(m.a)({},u)).number_of_likes++,l.likes.data.push({person_id:i.id,picture:i.picture,username:i.username})),l.likes.alreadyLiked=!l.likes.alreadyLiked,Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},o,l));default:return e}},J={dispatched:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SEARCH_RESULTS":var a=t.payload.results;return Object(m.a)(Object(m.a)({},a),{},{dispatched:!0});default:return e}},q=Object(o.c)({loggedInUser:E,loggedInFollows:T,currentPage:O,posts:h,likes:_,following:j,followedBy:S,chats:A,messages:F,onlineUsers:B,homePosts:W,search:K}),Y=(a(130),a(3)),V=a.n(Y),z=a(6),$=a(4),Q=a(20),X=a(17),Z=function(e){return{type:"SET_POSTS",payload:{posts:e.posts,user:e.user}}},ee=function(e){return{type:"INCREMENT_NUMBER_OF_LIKES",payload:{id:e}}},te=function(e){return{type:"DECREMENT_NUMBER_OF_LIKES",payload:{id:e}}},ae=function(e){return{type:"CREATE_LIKES_ON_ADD_POST",payload:{id:e}}},ne=function(e){return{type:"DELETE_POST",payload:{id:e}}},re=function(e,t){return{type:"EDIT_POST",payload:{id:e,newCaption:t}}},ce=function(e){return{type:"SET_FOLLOWING",payload:{users:e.users,user:e.user}}},le=function(e){return{type:"SET_FOLLOWED_BY",payload:{users:e.users,user:e.user}}},se=function(e){return{type:"ADD_MESSAGE",payload:{info:e.info,me:e.me}}},oe=function(e){return{type:"SET_HOME_POSTS",payload:{posts:e.posts,likes:e.likes}}},ie=function(e){return{type:"EDIT_AUTH",payload:{updatedFields:e.updatedFields}}},ue=function(){var e=Object(r.useState)(!1),t=Object($.a)(e,2),a=t[0],n=t[1],c=Object(r.useState)(!1),l=Object($.a)(c,2),s=l[0],o=l[1];return{loading:a,error:s,request:Object(r.useCallback)(function(){var e=Object(z.a)(V.a.mark((function e(t){var a,r,c,l,s=arguments;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:{method:"GET"},r=s.length>2?s[2]:void 0,e.prev=2,o(!1),n(!0),e.next=7,fetch(t,a,r);case 7:return c=e.sent,e.next=10,c.json();case 10:if(!(l=e.sent).success){e.next=13;break}return e.abrupt("return",l);case 13:return o(l.msg),e.abrupt("return",l);case 17:e.prev=17,e.t0=e.catch(2),o(e.t0),console.log(e.t0);case 21:return e.prev=21,n(!1),e.finish(21);case 24:case"end":return e.stop()}}),e,null,[[2,17,21,24]])})));return function(t){return e.apply(this,arguments)}}(),[])}},de=function(){var e=Object(i.b)(),t=Object(r.useState)(!0),a=Object($.a)(t,2),n=a[0],c=a[1],l=ue(),s=(l.error,l.request),o=Object(r.useCallback)(Object(z.a)(V.a.mark((function t(){var a,n,r,l,o,i,u,d,p;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,s("/api/whoami");case 3:if(!(a=t.sent).success){t.next=20;break}return t.next=7,s("/api/user/".concat(a.data.username));case 7:return n=t.sent,r=a.data,l=r.id,o=r.username,t.next=11,s("/api/interest/".concat(o));case 11:return i=t.sent,t.next=14,s("/api/pictures/".concat(a.data.username));case 14:u=t.sent,d=i.interests,p=u.pictures,e({type:"AUTH_USER",payload:{information:{information:Object(m.a)(Object(m.a)({},n.info),{},{username:o,id:l,interests:d,pictures:p})}.information}}),t.next=21;break;case 20:e({type:"NOT_AUTH_USER"});case 21:c(!1),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(0),console.log(t.t0);case 27:case"end":return t.stop()}}),t,null,[[0,24]])}))),[s,e]);return Object(r.useEffect)((function(){o()}),[o]),{loading:n}},me=(a(86),a(73),a(47),function(e){var t=e.form,a=e.changeHandler,n=e.submitHandler,r=e.err,l=e.modal;return c.a.createElement("div",{className:"containerInput"},!l&&c.a.createElement("div",{className:"image"},c.a.createElement("h1",null,"Welcome To ",c.a.createElement("span",{className:"welcome"},"Mellowgram"))),c.a.createElement("div",{className:"content"},c.a.createElement("h1",null,"Login"),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Username"),c.a.createElement("br",null),c.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"txt","aria-describedby":"helpId",value:t.username,onChange:a})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Password"),c.a.createElement("br",null),c.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"txt",value:t.password,onChange:a})),c.a.createElement("a",{className:"fp",href:"/accounts/password/reset"},"Forgot Password?"),c.a.createElement("br",null),c.a.createElement("button",{type:"button",className:"btn green",onClick:n},"Login"),r&&c.a.createElement("h4",{className:"fp login-error"},r),c.a.createElement("hr",null),c.a.createElement("div",{className:"login"},"Or login with"),c.a.createElement("div",{className:"links"},c.a.createElement("div",{className:"google"},c.a.createElement("i",{className:"fa fa-google"},c.a.createElement("span",null,"Google"))),c.a.createElement("div",{className:"facebook"},c.a.createElement("i",{className:"fa fa-facebook-f"},c.a.createElement("span",null,"Facebook"))),c.a.createElement("div",{className:"instagram",onClick:function(){return console.log("instagram")}},c.a.createElement("i",{className:"fa fa-instagram"},c.a.createElement("span",null,"Instagram")))),c.a.createElement("div",{className:"signup"},"Don't have an account? \u200b",c.a.createElement("a",{href:"/signup"},"Sign up"))))}),pe=a(25),fe=a.n(pe),Ee=(a(160),function(e){var t=e.options,a=e.isOpen,n=e.toggleOpen,r=e.selected,l=e.setSelected;return c.a.createElement("div",{className:"dropdown".concat(a?" open":""),onClick:n,tabIndex:"0"},c.a.createElement("span",{className:"current"},r),c.a.createElement("div",{className:"list"},c.a.createElement("ul",null,t.map((function(e,t){return c.a.createElement("li",{key:t,className:"option".concat(e.text===r?" selected":""),"data-value":e.value,"data-display-text":e.display,onClick:function(){return l(e.text)}},e.text)})))))}),be=function(e){var t=e.id,a=(e.label,e.defaultVal),n=e.options,l=Object(X.g)(),s=ue(),o=(s.error,s.request),i=Object(r.useState)(!1),u=Object($.a)(i,2),d=u[0],m=u[1],p=Object(r.useState)(""),f=Object($.a)(p,2),E=f[0],b=f[1],O=function(){var e=Object(z.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("/api/logout");case 2:e.sent,l.push("/"),window.location.reload(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return"Account"===E&&"/account"!==l.location.pathname&&(b(""),l.push("/account")),"Log Out"===E&&O(),c.a.createElement("div",{className:"fieldset"},c.a.createElement("div",{className:"form-element a-header"},c.a.createElement("span",null,c.a.createElement("select",{id:t},n.map((function(e,t){return c.a.createElement("option",{value:e.value,key:t,"data-display-text":e.display},e.text)}))),c.a.createElement(Ee,{options:n,isOpen:d,toggleOpen:function(){return m(!d)},selected:a,setSelected:b}))))},Oe=(a(162),function(e){var t=e.size,a=e.status,n=e.content,r=e.place;return c.a.createElement("div",{style:{marginLeft:r&&"-5px",marginBottom:r&&"15px"}},c.a.createElement("span",{className:"badge badge--".concat(a," badge--").concat(t)},n))}),ve=a(107),he=a(45),ge=a.n(he),_e={control:function(e){return Object(m.a)(Object(m.a)({},e),{},{backgroundColor:"inherit"})},option:function(e,t){var a=t.data,n=t.isDisabled,r=t.isFocused,c=t.isSelected,l=ge()(a.color);return Object(m.a)(Object(m.a)({},e),{},{backgroundColor:r?"rgb(23, 148, 67)":"#fff",color:r?"#fff":"#000",cursor:n?"not-allowed":"default",":active":Object(m.a)(Object(m.a)({},e[":active"]),{},{backgroundColor:!n&&(c?a.color:l.alpha(.3).css())})})},multiValue:function(e,t){var a=t.data,n=ge()(a.color);return Object(m.a)(Object(m.a)({},e),{},{backgroundColor:n.alpha(.2).css()})},multiValueLabel:function(e,t){var a=t.data;return Object(m.a)(Object(m.a)({},e),{},{color:a.color})},multiValueRemove:function(e,t){var a=t.data;return Object(m.a)(Object(m.a)({},e),{},{color:a.color,":hover":{backgroundColor:a.color,color:"white"}})}},ye=function(e){return e.map((function(e){return{value:e.code,label:e.name}}))},je=function(e){return e.map((function(e){return{value:e.regionCode,name:e.name,label:"".concat(e.name,", ").concat(e.region)}}))},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=t.toLowerCase();return"country"===a?ye(e):"city"===a?je(e):e},Se=function(e){var t=e.handler,a=e.urlToFetch,n=e.type,r=e.noOptionsMessage,l=void 0===r?"":r,s=e.requestParams,o=void 0===s?{}:s,i=e.isDisabled,u=void 0!==i&&i,d=ue().request,p=null,f=function(){var e=Object(z.a)(V.a.mark((function e(t){var r,c,l,s;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e,t){return new Promise((function(a){clearTimeout(p),p=setTimeout(Object(z.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:n=e.sent,a(n);case 4:case"end":return e.stop()}}),e)}))),e)}))},c=a+t,e.next=4,r(500,d.bind(null,c,o));case 4:return l=e.sent,console.log({data:l}),n.includes("RAPID")&&(l=Ne(l.data,n.split("RAPID_API_")[1])),s=l.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{color:"grey"})})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(ve.a,{isDisabled:u,isClearable:!0,placeholder:"Search...",cacheOptions:!0,styles:_e,noOptionsMessage:function(){return l},loadOptions:f,onChange:t})},ke=(a(163),[{text:"Account",value:"account",selected:!1},{text:"Log Out",value:"logout",selected:!1}]),Te=function(e){var t=e.handler;return c.a.createElement("div",{className:"hamburger",onClick:t},c.a.createElement("span",{className:"line"}),c.a.createElement("span",{className:"line"}),c.a.createElement("span",{className:"line"}))},Ce=function(){var e=Object(X.g)(),t=Object(r.useState)(!1),a=Object($.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(""),o=Object($.a)(s,2),u=o[0],d=o[1],m=Object(i.c)((function(e){return e.loggedInUser})),p=Object(i.c)((function(e){return e.chats})),f=function(e){return e.reduce((function(e,t){return t.unread+e}),0)}(Object.values(p).filter((function(e){return"object"===typeof e})));return u&&e.push("/".concat(u)),c.a.createElement("div",null,c.a.createElement("nav",{className:"header-nav"},c.a.createElement(Te,{handler:function(){l((function(e){return!e}))}}),c.a.createElement("div",{className:"logo"},c.a.createElement(Q.b,{to:"/"},"Mellowgram")),c.a.createElement("div",{className:"HEADER__search"},c.a.createElement("ul",{className:"nav-search"},c.a.createElement("li",{className:"nav-item search-field"},c.a.createElement(Se,{handler:function(e){d(e.value)},type:"HEADER",urlToFetch:"/api/findUser/",noOptionsMessage:"No such user"})))),c.a.createElement("ul",{className:n?"nav-items show":"nav-items"},c.a.createElement("li",{className:n?"nav-item fade open":"nav-item"},m.isAuthenticated?c.a.createElement(Q.b,{to:"/home"},c.a.createElement("div",{className:"Header__direct"},c.a.createElement("i",{className:"fa fa-home","aria-hidden":"true"}))):c.a.createElement(Q.b,{to:"/about"},"About us")),c.a.createElement("li",{className:n?"disabled":""},m.isAuthenticated?c.a.createElement(Q.b,{to:"/search"},c.a.createElement("div",{className:"Header__direct"},c.a.createElement("i",{class:"fa fa-search","aria-hidden":"true"}))):"|"),c.a.createElement("li",{className:n?"nav-item fade open":"nav-item"},m.isAuthenticated?c.a.createElement(Q.b,{to:"/direct"},c.a.createElement("div",{className:"Header__direct"},c.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}),f?c.a.createElement(Oe,{place:"header",size:"smaller",status:"danger",content:f}):"")):c.a.createElement(Q.b,{to:"/login"},"Login")),c.a.createElement("li",{className:n?"nav-item fade open":"nav-item"},m.isAuthenticated?c.a.createElement(be,{id:"settings",label:"Settings",defaultVal:c.a.createElement("i",{class:"fa fa-cog","aria-hidden":"true"}),options:ke}):c.a.createElement(Q.b,{to:"/signup"},"Sign up")))))},we=function(){var e=Object(X.g)(),t=Object(r.useState)({username:"",password:""}),a=Object($.a)(t,2),n=a[0],l=a[1],s=ue(),o=(s.loading,s.error),i=s.request,u=function(){var t=Object(z.a)(V.a.mark((function t(){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({username:"",password:""}),t.next=3,i("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:if(!t.sent.success){t.next=7;break}return e.push("/"),t.abrupt("return",window.location.reload(!0));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(Ce,null),c.a.createElement("div",null,c.a.createElement(me,{err:o,form:n,changeHandler:function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},a,n))}))},submitHandler:u})))},Ie=function(e){var t=e.err,a=e.form,n=e.changeHandler,r=e.submitHandler;return c.a.createElement("div",{className:"containerInput"},c.a.createElement("div",{className:"image"},c.a.createElement("h1",null,"Welcome To ",c.a.createElement("span",{className:"welcome"},"Mellowgram"))),c.a.createElement("div",{className:"content"},c.a.createElement("h3",null,"Sign up to meet new friends."),c.a.createElement("div",{className:"login"},"Login with"),c.a.createElement("div",{className:"links links-signup"},c.a.createElement("div",{className:"google"},c.a.createElement("i",{className:"fa fa-google"},c.a.createElement("span",null,"Google"))),c.a.createElement("div",{className:"facebook"},c.a.createElement("i",{className:"fa fa-facebook-f"},c.a.createElement("span",null,"Facebook"))),c.a.createElement("div",{className:"instagram",onClick:function(){return console.log("instagram")}},c.a.createElement("i",{className:"fa fa-instagram"},c.a.createElement("span",null,"Instagram")))),c.a.createElement("span",null,"OR"),c.a.createElement("div",{className:"form-group form-group-signup"},c.a.createElement("label",null,"Email"),c.a.createElement("br",null),c.a.createElement("input",{type:"text",className:"form-control",name:"email",id:"txt","aria-describedby":"helpId",value:a.email,onChange:n})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Full Name"),c.a.createElement("br",null),c.a.createElement("input",{type:"text",className:"form-control",name:"fullName",id:"txt",value:a.fullName,onChange:n})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Username"),c.a.createElement("br",null),c.a.createElement("input",{type:"text",className:"form-control",name:"username",id:"txt",value:a.username,onChange:n})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Password"),c.a.createElement("br",null),c.a.createElement("input",{type:"password",className:"form-control",name:"password",id:"txt",value:a.password,onChange:n})),c.a.createElement("button",{type:"button",className:"btn green",onClick:r},"Sign up"),t&&c.a.createElement("h4",{className:"fp login-error"},t),c.a.createElement("div",{className:"signup signup-signup"},"Have an account? \u200b",c.a.createElement("a",{href:"/login"},"Log in"))))},xe=function(){var e=Object(X.g)(),t=Object(r.useState)({email:"",fullName:"",username:"",password:""}),a=Object($.a)(t,2),n=a[0],l=a[1],s=ue(),o=s.loading,i=s.error,u=s.request;console.log({form:n}),console.log({loading:o,error:i});var d=function(){var t=Object(z.a)(V.a.mark((function t(){var a;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l({email:"",fullName:"",username:"",password:""}),t.next=3,u("/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 3:if(a=t.sent,console.log({responce:a}),!a.success){t.next=7;break}return t.abrupt("return",e.push("/login"));case 7:return t.abrupt("return");case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement(Ce,{authorized:{isAuthenticated:!1}}),c.a.createElement(Ie,{err:i,form:n,changeHandler:function(e){var t=e.target,a=t.name,n=t.value;l((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},a,n))}))},submitHandler:d}))},Ae=(a(164),function(){return c.a.createElement("div",{className:"nf"},c.a.createElement("div",null,c.a.createElement(Ce,null)),c.a.createElement("div",{className:"not-available"},c.a.createElement("h2",null," Sorry, this page isn't available."),c.a.createElement("div",{className:"not-available-detail"},"The link you followed may be broken, or the page may have been removed. \u200b",c.a.createElement("a",{href:"/"},"Go back to Mellowgram."))))}),De=a(82),Le=(a(165),function(e){var t=e.username,a=e.picture,n=e.context;return c.a.createElement("div",{className:"toast_container"},c.a.createElement("div",{className:"toast_title"},c.a.createElement("img",{src:a,className:"toast__img"}),c.a.createElement("h3",null,t)),c.a.createElement("div",{className:"toast_message"},c.a.createElement("p",null,n)))}),Re=a(23),Pe=(a(101),function(e){var t=e.setSelectedImg,a=ue().request,n=Object(i.b)(),l=Object(i.c)((function(e){return e.currentPage})),s=Object(i.c)((function(e){return e.loggedInUser})),o=l.id===s.id?s.pictures:l.pictures,u=Object(r.useCallback)(Object(z.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a("/api/pictures/".concat(l.username));case 2:t=e.sent,n({type:"EDIT_CURRENT",payload:{updatedFields:{updatedFields:{pictures:t.pictures}}.updatedFields}});case 4:case"end":return e.stop()}}),e)}))),[l.id]);Object(r.useEffect)((function(){u()}),[u]);var d=function(){var e=Object(z.a)(V.a.mark((function e(t){var r,c,l,s;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.target.files[0],(c=new FormData).append("picture",r),"/api/pictures",e.next=6,a("/api/pictures",{method:"POST",body:c});case 6:(l=e.sent).success&&(s=l.data,n({type:"LOAD_NEW_PICTURE",payload:{pictureMeta:{pictureMeta:s}.pictureMeta}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"USER_INFO__picturesBar"},c.a.createElement("div",{className:"USER_INFO_picturesBar_header"},c.a.createElement("h3",{className:"USER_INFO__picturesBar__title"},"My pictures \u200b "),c.a.createElement("div",{className:"USER_INFO__picturesBar__add"},s.id===l.id&&o.length<9&&c.a.createElement("div",{className:"UPLOAD_btn_upload ADD_PICTURE"},c.a.createElement("input",{type:"file",id:"UPLOAD_PROFILE_PICTURE",name:"",onChange:d}),c.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"})))),c.a.createElement("div",{className:"USER_INFO_picturesBar_body"},c.a.createElement("div",{className:"img-grid"},o&&o.map((function(e){return c.a.createElement(Re.a.div,{className:"img-wrap",key:e.picture_id,layout:!0,onClick:function(){return t(e)}},c.a.createElement(Re.a.img,{src:e.path,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}))})))))}),Me=function(e){var t=e.setSelectedImg,a=e.selectedImg,n=ue().request,r=Object(i.b)(),l=Object(i.c)((function(e){return e.loggedInUser})),s=function(){var e=Object(z.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/api/pictures/".concat(a.picture_id),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({pictureName:a.path.split("/").pop()})});case 2:e.sent.success&&(r({type:"REMOVE_PICTURE",payload:{picture:{picture:a}.picture}}),t(null));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(Re.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},c.a.createElement(Re.a.img,{src:a.path,alt:"enlarged pic",initial:{y:"-100vh"},animate:{y:0}}),l.id===a.user_id&&c.a.createElement("div",{className:"modal_actions"},c.a.createElement("label",null,c.a.createElement("div",{className:"update_picture"},c.a.createElement("input",{type:"file"}),c.a.createElement("i",{class:"fa fa-refresh delete_picture_button","aria-hidden":"true"}),c.a.createElement("p",null,"\u200b Load new picture"))),c.a.createElement("div",{className:"remove_picture",onClick:s},c.a.createElement("i",{class:"fa fa-trash delete_picture_button","aria-hidden":"true"}),c.a.createElement("p",null,"\u200b Remove picture"))))};a(55);var Ue,Fe=function(e){var t=e.id,a=e.modal,n=e.username,l=e.fullname,s=e.picture,o=e.placeholder,u=e.handleEdit,d=Object(i.b)(),m=Object(r.useState)(o||""),p=Object($.a)(m,2),f=p[0],E=p[1],b=ue().request,O=function(){var e=Object(z.a)(V.a.mark((function e(){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=6;break}return e.next=3,b("/api/post/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:f})});case 3:n=e.sent,E(""),n.success&&(d({type:"ADD_POST",payload:{post:{post:n.rows}.post}}),d(ae(n.rows.post_id)));case 6:if(!a){e.next=12;break}return e.next=9,b("/api/post/".concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({caption:f})});case 9:e.sent.success&&d(re(t,f)),u(null);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"POST__body POSTINPUT "},c.a.createElement("div",{className:"POST__title"},c.a.createElement("div",{className:"POST__title__left"},c.a.createElement("img",{src:s,alt:"avatar",className:"POST__profile_picture",style:{marginTop:"0"}}),c.a.createElement("div",{className:"POST__header"},c.a.createElement("h3",{className:"POST__fullname"},l),c.a.createElement("h4",{className:"POST__username"},"@",n)))),c.a.createElement("div",{className:"POST__context"},c.a.createElement("textarea",{value:f,name:"message",autoFocus:!0,id:"message",rows:"4",className:"form-input",onChange:function(e){return E(e.target.value)}}),c.a.createElement("button",{className:"green",onClick:O},"Submit")))},He=function(e){var t=e.bio,a=e.closeModal,n=ue().request,l=Object(i.b)(),s=Object(r.useState)(t||""),o=Object($.a)(s,2),u=o[0],d=o[1],m=Object(r.useState)(64-t.length),p=Object($.a)(m,2),f=p[0],E=p[1],b=function(){var e=Object(z.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/api/user/bio",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bio:u})});case 2:e.sent.success&&(console.log("Bio updated"),a(null),l(ie({updatedFields:{bio:u}})),d(""));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"MODAL_BIO_CONTAINER"},c.a.createElement("h3",null,"Change bio"),c.a.createElement("textarea",{maxLength:64,value:u,name:"message",autoFocus:!0,id:"message",rows:"4",className:"form-input",onChange:function(e){d(e.target.value),E(64-e.target.value.length)}}),c.a.createElement("div",{className:"MODAL_BIO_DOWN"},c.a.createElement("button",{className:"green",onClick:b},"Submit"),c.a.createElement("p",{className:!0,style:{color:!f&&"red"}},f)))},Be=function(e){var t=e.handleEdit,a=e.info,n=e.isBio;return console.log({info:a,isBio:n}),c.a.createElement(Re.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},c.a.createElement(Re.a.div,{className:"LIKESMODAL_CONTENT EDIT",initial:{y:"-100vh"},animate:{y:0}},n&&c.a.createElement(He,{bio:a,closeModal:t}),!n&&c.a.createElement(Fe,{id:a.id,modal:!0,username:a.username,fullname:a.fullname,picture:a.picture,placeholder:a.text,handleEdit:t})))},Ge=(a(167),a(102),function(e){var t=e.closeHandler,a=Object(X.g)(),n=Object(r.useState)({username:"",password:""}),l=Object($.a)(n,2),s=l[0],o=l[1],i=ue(),u=(i.loading,i.error),d=i.request,f=function(){var e=Object(z.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({username:"",password:""}),e.next=3,d("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 3:if(!e.sent.success){e.next=7;break}return a.push("/".concat(s.username)),e.abrupt("return",window.location.reload(!0));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(Re.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},c.a.createElement(me,{err:u,form:s,changeHandler:function(e){var t=e.target,a=t.name,n=t.value;o((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},a,n))}))},submitHandler:f,modal:!0}))}),We=function(e){var t=e.id,a=e.username,n=e.picture,l=e.alreadyFollowed,s=ue().request,o=Object(X.g)(),u=Object(r.useState)(l),d=Object($.a)(u,2),m=d[0],p=d[1],f=Object(r.useState)(!1),E=Object($.a)(f,2),b=E[0],O=E[1],v=Object(i.c)((function(e){return e.loggedInUser}),(function(e,t){return fe()(e,t)})),h=(Object(i.c)((function(e){return e.currentPage}),(function(e,t){return fe()(e,t)})),function(){var e=Object(z.a)(V.a.mark((function e(){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.isAuthenticated){e.next=2;break}return e.abrupt("return",O(!0));case 2:if(!m){e.next=9;break}return e.next=5,s("/api/follow/".concat(t),{method:"DELETE"});case 5:e.sent.success&&p((function(e){return!e})),e.next=14;break;case 9:return e.next=11,s("/api/follow/".concat(t),{method:"POST"});case 11:a=e.sent,console.log({responce:a}),a.success&&p((function(e){return!e}));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),g="green";return m&&(g+=" LIKESMODAL_BTN_followed"),c.a.createElement("div",{className:"LIKESMODAL_ROW"},c.a.createElement("div",{className:"LIKESMODAL__title"},c.a.createElement("div",{className:"LIKESMODAL__title__left",onClick:function(){o.push("/".concat(a))}},c.a.createElement("img",{src:n,alt:"avatar",className:"LIKESMODAL__profile_picture",style:{marginTop:"0px"}}),c.a.createElement("div",{className:"LIKESMODAL__header"},c.a.createElement("h3",{className:"LIKESMODAL__fullname"},a))),t!==v.id&&c.a.createElement("div",{className:"LIKESMODAL__title__right"},c.a.createElement("button",{className:g,onClick:h},m?"Following":"Follow"))),b&&c.a.createElement(Ge,{closeHandler:O}))},Je=function(e){var t=e.name,a=e.color;return c.a.createElement("div",null,c.a.createElement("div",{style:{padding:"20px"}},c.a.createElement("h4",{style:{color:a}},"\u2705 ",t),c.a.createElement("hr",{className:"hr",style:{padding:"0px 15px"}})))},Ke=function(e){var t=e.closeHandler,a=e.info,n=e.title,r=void 0===n?"test":n,l=e.type,s=void 0===l?"users":l,o=Object(i.c)((function(e){return e.loggedInFollows})),u=function(e){var t=o.users;return!!t&&t.map((function(e){return e.person_id})).includes(e)};return c.a.createElement(Re.a.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&t(null)},initial:{opacity:0},animate:{opacity:1}},c.a.createElement(Re.a.div,{className:"LIKESMODAL_CONTENT",initial:{y:"-100vh"},animate:{y:0}},c.a.createElement("div",{className:"LIKES_MODAL_TITLE"},c.a.createElement("h3",null,r),c.a.createElement("hr",{className:"hr"})),a.data&&"users"===s&&a.data.map((function(e){return c.a.createElement(We,{key:e.person_id,id:e.person_id,picture:e.picture,username:e.username,alreadyFollowed:u(e.person_id)})})),a.data&&"interests"===s&&a.data.map((function(e,t){return c.a.createElement(Je,{key:e.interest_id,id:e.interest_id,name:e.interest_name,color:e.interest_color})}))))},qe=(a(168),function(){var e=Object(X.g)(),t=Object(i.c)((function(e){return e.currentPage})),a=Object(i.c)((function(e){return e.loggedInUser})),n=(t.id===a.id?a:t).interests;return n?c.a.createElement("div",{className:"USER_INFO__followingBar"},c.a.createElement("div",{className:"INTEREST_BAR_CONTAINER"},c.a.createElement("div",{className:"INTEREST_BAR_TITLE"},n.length||a.id!==t.id?c.a.createElement("h3",null,"Interests"):null),c.a.createElement("div",{className:"INTEREST_BAR_BODY"},n.length?c.a.createElement("ul",null,n.map((function(e){return c.a.createElement("li",{style:{backgroundColor:e.interest_color,opacity:".8",color:"black"}},"".concat(e.interest_emoji," ").concat(e.interest_name))}))):null,!n.length&&a.id===t.id&&c.a.createElement("div",{className:"INTEREST_BAR_NO_INTERESTS"},c.a.createElement("h3",null,"No interests yet"),c.a.createElement("i",{class:"fa fa-plus","aria-hidden":"true",onClick:function(){e.push("/account")}}))))):c.a.createElement("div",{className:"USER_INFO__followingBar"})}),Ye=function(e){var t=e.startMessagingHandler,a=e.setOpenDialog,n=Object(X.g)(),l=ue().request,s=Object(i.b)(),o=Object(i.c)((function(e){return e.loggedInUser})),u=Object(i.c)((function(e){return e.loggedInFollows})),d=Object(i.c)((function(e){return e.following})),p=Object(i.c)((function(e){return e.followedBy})),f=Object(r.useState)({}),E=Object($.a)(f,2),b=E[0],O=E[1],v=Object(r.useState)(null),h=Object($.a)(v,2),g=h[0],_=h[1],y=Object(r.useState)(!1),j=Object($.a)(y,2),N=j[0],S=j[1],k=Object(r.useState)(!1),T=Object($.a)(k,2),C=T[0],w=T[1],I=Object(r.useState)(null),x=Object($.a)(I,2),A=x[0],D=x[1],L=Object(r.useState)(!1),R=Object($.a)(L,2),P=R[0],M=R[1],U=Object(r.useRef)(!1),F=Object(r.useRef)(!0),H="green",B=Object(i.c)((function(e){return e.currentPage}),(function(e,t){return F.current=fe()(e,t),fe()(e,t)}));console.log({newMsg:b});Object.values(Object(i.c)((function(e){return e.chats}),(function(e,t){var a=Object.values(e),n=Object.values(t);return a.map((function(e,t){fe()(e,n[t])||(O({username:e.username,picture:e.picture,context:e.latestMessage.context,chatId:e.room_id}),U.current=!1)})),fe()(e.id,t.id)})));Object(r.useEffect)((function(){u.user&&function(e){var t=u.users.map((function(e){return e.person_id}));S(t.includes(e))}(B.id)}),[u]);var G=Object(r.useCallback)(function(){var e=Object(z.a)(V.a.mark((function e(t,a){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/follow/followers/".concat(t.username),{},a);case 2:(n=e.sent).success&&s(le({users:n.data,user:t.username}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[s,le,l]),W=Object(r.useCallback)(function(){var e=Object(z.a)(V.a.mark((function e(t,a){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/follow/following/".concat(t.username),{},a);case 2:(n=e.sent).success&&s(ce({users:n.data,user:t.username}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,s,ce]),J=Object(r.useCallback)(function(){var e=Object(z.a)(V.a.mark((function e(t,a){var n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("/api/interest/".concat(t.username),{},a);case 2:(n=e.sent).success&&s({type:"ADD_INTERESTS",payload:{interests:{interests:n.interests}.interests}});case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),[l,s]),K=function(){var e=Object(z.a)(V.a.mark((function e(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isAuthenticated){e.next=2;break}return e.abrupt("return",M(!0));case 2:if(!N){e.next=9;break}return e.next=5,l("/api/follow/".concat(B.id),{method:"DELETE"});case 5:e.sent.success&&(s({type:"DELETE_FOLLOW",payload:{producer:(a={producer:{id:o.id,username:o.username,picture:o.picture},consumer:{id:B.id,picture:B.picture,username:B.username},myPage:o.id===B.id}).producer,consumer:a.consumer,myPage:a.myPage}}),ce((function(e){return!e}))),e.next=13;break;case 9:return e.next=11,l("/api/follow/".concat(B.id),{method:"POST"});case 11:e.sent.success&&(s({type:"ADD_FOLLOW",payload:{producer:(t={producer:{id:o.id,username:o.username,picture:o.picture},consumer:{id:B.id,picture:B.picture,username:B.username},myPage:o.id===B.id}).producer,consumer:t.consumer,myPage:t.myPage}}),S((function(e){return!e})));case 13:case"end":return e.stop()}var t,a}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=new AbortController,t=e.signal;return B.id&&!F.current&&(G(B,t),W(B,t),J(B,t)),function(){e.abort()}}),[B.id]);var q,Y=Object(r.useState)("is-active"),Q=Object($.a)(Y,2),Z=Q[0],ee=Q[1],te=Object(r.useState)(""),ae=Object($.a)(te,2),ne=ae[0],re=ae[1],se=Object(r.useState)("card"),oe=Object($.a)(se,2),ie=oe[0],de=oe[1],me=Object(r.useState)("card-section is-active"),pe=Object($.a)(me,2),Ee=pe[0],be=pe[1],ve=Object(r.useState)("card-section"),he=Object($.a)(ve,2),ge=he[0],_e=he[1],ye=Object(r.useState)("#about"),je=Object($.a)(ye,2),Ne=je[0],Se=je[1],ke=function(e){var t=e.target.getAttribute("data-section");de("#about"!==t?function(e){return e+" is-active"}:function(e){return e.replace(/is-active/g," ")}),Se(t),be("card-section"),_e("card-section"),ee(""),re(""),"#experience"===t||("#about"===t?(be((function(e){return e+" is-active"})),ee("is-active")):(_e((function(e){return e+" is-active"})),re("is-active")))},Te=function(e){var t={};t.title=e.charAt(0).toUpperCase()+e.slice(1),"following"===e?D(Object(m.a)(Object(m.a)({},t),{},{data:d.users})):"followers"===e&&D(Object(m.a)(Object(m.a)({},t),{},{data:p.users}))};return N&&(H+=" LIKESMODAL_BTN_followed"),B&&p.user&&p.user===B.username&&d.user&&d.user===B.username?c.a.createElement("div",null,c.a.createElement("div",{className:"USER_INFO__container"},c.a.createElement(qe,null),c.a.createElement("div",{className:"USER_INFO_CENTER"},o.id!==B.id&&c.a.createElement("div",{className:"USER_INFO_CENTER_TOP"},c.a.createElement("button",{className:H,onClick:K},N?"Following":"Follow"),c.a.createElement("button",{className:"green USER_INFO_MESSAGE",onClick:function(){if(!o.isAuthenticated)return M(!0);t({me:o,other:B}),n.push("/direct")}},"Message")),c.a.createElement("div",{className:ie,"data-state":Ne},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",{className:"card-cover"}),c.a.createElement("img",{className:"card-avatar",src:B.picture,alt:"avatar"}),c.a.createElement("h1",{className:"card-fullname"},B.fullname),c.a.createElement("h2",{className:"card-jobtitle"},B.occupation)),c.a.createElement("div",{className:"card-main"},c.a.createElement("div",{className:Ee,id:"about"},c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"card-subtitle"},c.a.createElement("p",null,"ABOUT"),o.id===B.id&&c.a.createElement("i",{className:"fa fa-edit",onClick:function(){w(!0)}})),c.a.createElement("div",{className:"card-desc"},c.a.createElement("p",null,(o.id===B.id?o.bio:B.bio)||"The user hasn't provided bio information")))),c.a.createElement("div",{className:ge,id:"contact"},c.a.createElement("div",{className:"card-content"},c.a.createElement("div",{className:"card-subtitle"},"CONTACT"),c.a.createElement("div",{className:"card-contact-wrapper"},c.a.createElement("div",{className:"card-contact"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"}),c.a.createElement("circle",{cx:"12",cy:"10",r:"3"})),B.based_in||"Not provided"),c.a.createElement("div",{className:"card-contact card-contact-center"},c.a.createElement("svg",{className:"svg-middle",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})),B.phone_number||"Not provided"),c.a.createElement("div",{className:"card-contact"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),c.a.createElement("path",{d:"M22 6l-10 7L2 6"})),B.email)))),c.a.createElement("hr",null),c.a.createElement("div",{className:"card-buttons"},c.a.createElement("button",{"data-section":"#about",className:Z,onClick:ke},"ABOUT"),c.a.createElement("button",{className:ne,"data-section":"#contact",onClick:ke},"CONTACT")))),c.a.createElement("div",{className:"user_info_bottom"},c.a.createElement("div",{className:"user_info_bottom_followers"},c.a.createElement("button",{className:"green follow",onClick:function(){return Te("followers")}},"Followers"),c.a.createElement(Oe,{size:"smaller",content:p.users.length,status:"default"})),c.a.createElement("div",{className:"user_info_bottom_followers"},c.a.createElement("button",{className:"green follow",onClick:function(){return Te("following")}},"Following"),c.a.createElement(Oe,{size:"smaller",content:d.users.length,status:"default"})))),c.a.createElement(Pe,{setSelectedImg:_}),P&&c.a.createElement(Ge,{closeHandler:M}),g&&c.a.createElement(Me,{selectedImg:g,setSelectedImg:_}),A&&c.a.createElement(Ke,{info:A,closeHandler:D,title:A.title}),C&&c.a.createElement(Be,{handleEdit:w,info:B.bio,isBio:!0}),Object.keys(b).length&&!U.current?(q=b,console.log("hree"),U.current=!0,De.b.dark(c.a.createElement(Le,{username:q.username,context:q.context,picture:q.picture}),{position:"top-center",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,onClick:function(){return n.push("/direct")}}),void a(q.chatId)):null),c.a.createElement("div",null,c.a.createElement(De.a,{position:"top-center",autoClose:5e3,newestOnTop:!0,closeOnClick:!0,rtl:!1}))):c.a.createElement("div",null)},Ve=a(62),ze=function(e){var t=e.id,a=e.picture,n=e.fullname,l=e.username,s=e.text,o=e.numberOfLikes,u=e.likes,d=e.postedAt,p=e.showSettings,f=e.setSelectedLikes,E=e.deletePostHandler,b=e.editPostHandler,O=e.type,v=Object(i.b)(),h=Object(X.g)(),g=Object(i.c)((function(e){return e.loggedInUser})),_=ue().request,y=Object(r.useState)(!1),j=Object($.a)(y,2),N=j[0],S=j[1],k=Object(r.useState)(null===u||void 0===u?void 0:u.alreadyLiked),T=Object($.a)(k,2),C=T[0],w=T[1],I=C?"fa fa-heart liked":"fa fa-heart";Object(r.useEffect)((function(){w(null===u||void 0===u?void 0:u.alreadyLiked)}),[u]);var x=function(){var e=Object(z.a)(V.a.mark((function e(){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.isAuthenticated){e.next=2;break}return e.abrupt("return",S(!0));case 2:return a=C?"DELETE":"POST",e.next=5,_("/api/like/".concat(t),{method:a});case 5:(null===(n=e.sent)||void 0===n?void 0:n.success)&&(O?v({type:"LIKE_POST_HOME",payload:{post:(r={post:t,me:g}).post,me:r.me}}):(v(C?te(t):ee(t)),v({type:"ON_LIKE",payload:Object(m.a)(Object(m.a)({},g),{},{id:t})})),w((function(e){return!e})));case 7:case"end":return e.stop()}var r}),e)})));return function(){return e.apply(this,arguments)}}();return u?c.a.createElement("div",null,c.a.createElement("div",{className:"POST__body"},c.a.createElement("div",{className:"POST__title"},c.a.createElement("div",{className:"POST__title__left",onClick:function(){return h.push("/".concat(l))}},c.a.createElement("img",{src:a,alt:"avatar",className:"POST__profile_picture"}),c.a.createElement("div",{className:"POST__header"},c.a.createElement("h3",{className:"POST__fullname"},n),c.a.createElement("h4",{className:"POST__username"},"@",l))),p&&c.a.createElement("div",{className:"POST__title__right"},c.a.createElement("i",{className:"fa fa-remove","aria-hidden":"true",style:{color:"red"},onClick:E.bind(null,t)}),c.a.createElement("i",{className:"fa fa-edit","aria-hidden":"true",onClick:b.bind(null,{id:t,picture:a,username:l,fullname:n,text:s})}))),c.a.createElement("div",{className:"POST__context"},c.a.createElement("p",null,s),c.a.createElement("div",{className:"POST__actions"},c.a.createElement("div",{className:"POST__like_section"},c.a.createElement("div",{className:"POST__like_button"},c.a.createElement("i",{className:I,"aria-hidden":"true",onClick:x}),C?c.a.createElement("h4",null,"\u200b Liked"):c.a.createElement("h4",null,"\u200b Like \u200b")),c.a.createElement("h4",{className:"POST_number_of_likes"},o," Likes "),c.a.createElement("div",{className:"POST__liked_by"},c.a.createElement("h4",null,"Liked by: "),c.a.createElement("div",{className:"POST__liked_by_images",onClick:function(){return f(u)}},c.a.createElement("img",{src:u.data.length?u.data[0].picture:"/api/public/uploads/blank.jpg",alt:"avatar"}),c.a.createElement("img",{src:u.data.length>1?u.data[1].picture:"/api/public/uploads/blank.jpg",alt:"avatar"}),c.a.createElement("img",{src:u.data.length>2?u.data[2].picture:"/api/public/uploads/blank.jpg",alt:"avatar"})))),c.a.createElement("h4",{className:"POST__creation_time"},d)))),N&&c.a.createElement(Ge,{closeHandler:S})):c.a.createElement("div",null)},$e=(a(169),function(){var e=Object(r.useRef)(!0),t=Object(r.useState)(!0),a=Object($.a)(t,2),n=a[0],l=a[1],s=Object(r.useState)(null),o=Object($.a)(s,2),u=o[0],d=o[1],m=Object(r.useState)(null),p=Object($.a)(m,2),f=p[0],E=p[1],b=Object(i.b)(),O=ue().request,v=Object(i.c)((function(e){return e.currentPage}),(function(t,a){return e.current=fe()(t,a),fe()(t,a)})),h=Object(i.c)((function(e){return e.loggedInUser}),(function(e,t){return fe()(e,t)})),g=Object.values(Object(i.c)((function(e){return e.posts}),(function(e,t){return fe()(e,t)}))).sort(),_=Object(i.c)((function(e){return e.likes}),(function(e,t){return fe()(e,t)})),y=function(){var e=Object(z.a)(V.a.mark((function e(t){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("/api/post/".concat(t),{method:"DELETE"});case 2:e.sent.success&&b(ne(t));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){console.log("editing",e.id),E(e)},N=Object(r.useState)(!1),S=Object($.a)(N,2),k=S[0],T=S[1],w=Object(r.useRef)(0),I=Object(r.useCallback)(function(){var e=Object(z.a)(V.a.mark((function e(t){var a,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.map((function(e){return e.post_id})),n=a.map((function(e){return O("/api/like/".concat(e))})),e.next=4,Promise.all(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),x=Object(r.useCallback)(function(){var e=Object(z.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v.id||k){e.next=11;break}return e.next=3,O("/api/post/".concat(v.username,"?limit=5&offset=0"),{},t);case 3:if(!(a=e.sent).success){e.next=11;break}return T(!0),b(Z({posts:a.posts,user:v.username})),e.next=9,I(a.posts);case 9:n=e.sent,b({type:"SET_LIKES",payload:{likes:{likes:n}.likes}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[v.id]);Object(r.useEffect)((function(){var t=new AbortController,a=t.signal;return e.current||x(a),function(){t.abort()}}),[x]);var A=function(){var e=Object(z.a)(V.a.mark((function e(){var t,a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.current+=5,e.next=3,O("/api/post/".concat(v.username,"?limit=5&offset=").concat(w.current));case 3:return t=e.sent,e.next=6,I(t.posts);case 6:return a=e.sent,e.next=9,C(300);case 9:if(t.posts.length){e.next=12;break}return l(!1),e.abrupt("return");case 12:b({type:"LOAD_MORE_POSTS",payload:{posts:{posts:t.posts}.posts}}),b({type:"LOAD_MORE_LIKES",payload:{likes:{likes:a}.likes}});case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g[0]===v.username&&1===g.length&&n&&l(!1),null===g[0]&&n&&l(!1),g[g.length-1]!==v.username?c.a.createElement("div",null):Object.keys(_).length?c.a.createElement("div",null,c.a.createElement("div",{className:"FEED_CONTAINER"},c.a.createElement("div",{className:"FEED_SIDE"}),c.a.createElement("div",{className:"POSTS__container"},v.id===h.id&&c.a.createElement(Fe,{picture:v.picture,fullname:v.fullname,username:v.username}),c.a.createElement("div",{className:"POSTS_INFINITE_SCROLL"},c.a.createElement(Ve.a,{dataLength:g.length,next:A,hasMore:n,loader:c.a.createElement("h4",null,"Loading...")},g.reverse().slice(1).map((function(e){return c.a.createElement(ze,{key:e.post_id,id:e.post_id,picture:v.picture,fullname:v.fullname,username:v.username,text:e.caption,numberOfLikes:e.number_of_likes,postedAt:e.created_at,showSettings:v.id===h.id,likes:_[e.post_id],loggedInfo:{user_id:h.id,username:h.username,picture:h.picture},setSelectedLikes:d,deletePostHandler:y,editPostHandler:j})})))),u&&c.a.createElement(Ke,{closeHandler:d,info:u,title:"Likes"}),f&&c.a.createElement(Be,{handleEdit:E,info:f})),c.a.createElement("div",{className:"FEED_SIDE"})),c.a.createElement("div",{className:"FEED_FOOTER"})):c.a.createElement("div",null)}),Qe=function(e){var t=e.match,a=e.startMessagingHandler,n=e.setOpenDialog,l=Object(i.b)(),s=t.params.username,o=Object(r.useState)(null),u=Object($.a)(o,2),d=u[0],m=u[1],p=ue(),f=p.loading,E=p.request,b=Object(r.useCallback)(Object(z.a)(V.a.mark((function e(){var t,a,n,r,c,o,i,u,d,p,f;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/user/".concat(s));case 2:(t=e.sent).success?(a=t.info,n=a.based_in,r=a.bio,c=a.email,o=a.fullname,i=a.number_of_posts,u=a.occupation,d=a.phone_number,p=a.picture,f=t.info.person_id,l({type:"SET_CURRENT_PAGE",payload:{id:(b={id:f,bio:r,username:s,based_in:n,email:c,fullname:o,number_of_posts:i,occupation:u,phone_number:d,picture:p}).id,bio:b.bio,username:b.username,based_in:b.based_in,email:b.email,fullname:b.fullname,number_of_posts:b.number_of_posts,occupation:b.occupation,phone_number:b.phone_number,picture:b.picture}})):m(void 0);case 4:case"end":return e.stop()}var b}),e)}))),[s,E,l]);return Object(r.useEffect)((function(){b()}),[s,b]),void 0===d?c.a.createElement(Ae,null):f?c.a.createElement("div",null):c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement(Ce,null)),c.a.createElement(Ye,{startMessagingHandler:a,setOpenDialog:n}),c.a.createElement($e,null))},Xe=(a(170),a(103),a(112)),Ze=a(11),et=a(201),tt=a(202),at=a(199),nt=a(200),rt=a(203),ct=a(204),lt=a(205),st=a(206),ot=Object(Xe.a)({typography:{fontFamily:["iCiel Gotham","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),it=Object(Ze.a)((function(e){return{root:{border:"none",borderColor:"black"},body:{fontSize:14,backgroundColor:"rgb(44, 44, 44)",color:"rgb(177, 176, 176)"}}}))(at.a),ut=Object(Ze.a)((function(e){return{root:{border:"none",borderColor:"black"},body:{fontSize:14,backgroundColor:"rgb(44, 44, 44)",color:e.palette.common.white}}}))(at.a),dt=Object(Ze.a)((function(e){return{root:{font:"iCiel Gotham","&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}}))(nt.a),mt=Object(et.a)({table:{minWidth:200}}),pt=function(e){var t,a=e.tab,n=e.data,r=e.handler,l=mt(),s=(t=n,Object.keys(t).map((function(e,a){return{field:e,value:t[e]}})));return c.a.createElement(tt.a,{theme:ot},c.a.createElement(rt.a,{component:ct.a},c.a.createElement(lt.a,{className:l.table,"aria-label":"simple table"},c.a.createElement(st.a,null,s.map((function(e){return c.a.createElement(dt,{key:e.field},c.a.createElement(it,{align:"left"},e.field),c.a.createElement(ut,{align:"left"},"overview"===a?e.value:c.a.createElement("input",{type:"Password"===e.field?"password":"text",id:"txt",name:e.field,value:e.value,onChange:r})))}))))))},ft=(a(171),function(){var e=Object(r.useState)(null),t=Object($.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),s=Object($.a)(l,2),o=(s[0],s[1],Object(r.useState)(!1)),u=Object($.a)(o,2),d=u[0],m=(u[1],Object(i.c)((function(e){return e.loggedInUser}))),p=m.username,f=(m.picture,Object(i.b)()),E=function(){var e=Object(z.a)(V.a.mark((function e(t){var r,c,l,s,o;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(r=new FormData).append("profilePhoto",a),c=d?"DELETE":"POST",l="/api/user/".concat(p,"/addPicture"),d&&(l="/api/user/".concat(p,"/deletePicture")),e.next=8,fetch(l,{method:c,body:r});case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,f(ie({updatedFields:{picture:o.src}})),n(null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement("div",null,c.a.createElement("div",{class:"UPLOAD_panel"},c.a.createElement("div",{class:"UPLOAD_button_outer"},a?c.a.createElement("div",{className:"newPictureBtns"},c.a.createElement("button",{className:"green",onClick:E},"Submit"),c.a.createElement("button",{className:"green red",onClick:function(e){e.preventDefault(),n(null)}},"Reset")):c.a.createElement("div",{class:"UPLOAD_btn_upload"},c.a.createElement("input",{type:"file",id:"UPLOAD_PROFILE_PICTURE",name:"",onChange:function(e){var t=e.target.files[0];n(t)}}),"Upload New Image"))))}),Et=function(e){var t=e.info,a=e.adjustedOverwiew;return c.a.createElement("div",{className:"settings-overview"},c.a.createElement("h1",null,"Account overview"),c.a.createElement("div",{className:"settings-overview-img"},c.a.createElement("img",{src:t.picture,alt:"avatar"}),c.a.createElement(ft,null)),c.a.createElement("div",{className:"settings-overview-table"},c.a.createElement(pt,{tab:"overview",data:a})))},bt=function(e){var t=e.edit,a=e.editHandlerOnChange,n=e.submitEdit,r=e.error,l=e.updatedInfo;return c.a.createElement("div",{className:"settings-overview"},c.a.createElement("h1",null,"Edit profile"),c.a.createElement(pt,{tab:"edit",data:t,handler:a}),c.a.createElement("button",{className:"btn green",onClick:n},"Submit"),r&&c.a.createElement("h2",{style:{color:"red",marginTop:"10px"}},"Error: ",r),l&&c.a.createElement("h2",{style:{color:"green",marginTop:"10px"}},"Information updated"))},Ot=a(67),vt={colourStyles:{control:function(e){return Object(m.a)(Object(m.a)({},e),{},{backgroundColor:"white"})},option:function(e,t){var a=t.data,n=t.isDisabled,r=(t.isFocused,t.isSelected),c=ge()(a.color);return Object(m.a)(Object(m.a)({},e),{},{backgroundColor:n?"rgb(44, 44, 44)":r?a.color:"rgb(44, 44, 44)",color:"#ccc",cursor:n?"not-allowed":"default",":active":Object(m.a)(Object(m.a)({},e[":active"]),{},{backgroundColor:!n&&(r?a.color:c.alpha(.9).css())})})},multiValue:function(e,t){var a=t.data,n=ge()(a.color);return Object(m.a)(Object(m.a)({},e),{},{backgroundColor:n.alpha(1).css()})},multiValueLabel:function(e,t){t.data;return Object(m.a)(Object(m.a)({},e),{},{color:"black"})},multiValueRemove:function(e,t){t.data;return Object(m.a)(Object(m.a)({},e),{},{color:"black"})}},groupStyles:{display:"flex",alignItems:"center",justifyContent:"space-between",color:"black",fontSize:"1.1rem",padding:"0px",margin:"0px"},groupBadgeStyles:{backgroundColor:"#000",borderRadius:"2em",color:"#fefefe",display:"inline-block",fontSize:12,fontWeight:"normal",lineHeight:"1",minWidth:1,padding:"0.16666666666667em 0.5em",textAlign:"center"}},ht=function(e){var t=e.setSelectActivities,a=Object(i.c)((function(e){return e.loggedInUser.interests})),n=Object(r.useState)({loaded:!1,data:[]}),l=Object($.a)(n,2),s=l[0],o=l[1],u=ue().request,p=Object(r.useState)([]),f=Object($.a)(p,2),E=f[0],b=f[1],O=Object(r.useCallback)((function(){var e=a.map((function(e){return+e.interest_id}));E.map((function(t,a,n){var r=t.options.filter((function(t){return e.includes(+t.id)}));a!==n.length-1?r.map((function(e,t,a){o((function(t){return Object(m.a)(Object(m.a)({},t),{},{data:[].concat(Object(d.a)(t.data),[e])})}))})):r.length?r.map((function(e,t,a){o((function(t){return Object(m.a)(Object(m.a)({},t),{},{loaded:!0,data:[].concat(Object(d.a)(t.data),[e])})}))})):o((function(e){return Object(m.a)(Object(m.a)({},e),{},{loaded:!0})}))}))}),[a,E]);Object(r.useEffect)((function(){O()}),[O]);var v=Object(r.useCallback)(Object(z.a)(V.a.mark((function e(){var t,a,n,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("/api/interest");case 2:(t=e.sent).success&&(a=t.interests,n=Array.from(new Set(a.map((function(e){return e.interest_category})))),r=n.map((function(e){var t=a.filter((function(t){return t.interest_category===e}));return t=t.map((function(e){return{id:e.interest_id,value:e.interest_name,label:"".concat(e.interest_emoji," ").concat(e.interest_name),color:e.interest_color}})),{label:e,options:t}})),b(r));case 4:case"end":return e.stop()}}),e)}))),[u]);return Object(r.useEffect)((function(){v()}),[v]),E&&s.loaded?c.a.createElement("div",null,c.a.createElement(Ot.a,{defaultValue:s.fetched?[]:s.data,isMulti:!0,styles:vt.colourStyles,name:"colors",options:E,formatGroupLabel:function(e){return c.a.createElement("div",{style:vt.groupStyles},c.a.createElement("span",null,e.label),c.a.createElement("span",{style:vt.groupBadgeStyles},e.options.length))},className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){return t(e)}})):null},gt=function(e){var t=e.sendNewActivities,a=Object(r.useState)(null),n=Object($.a)(a,2),l=n[0],s=n[1];return c.a.createElement("div",{className:"settings_edit_interests"},c.a.createElement("div",null,c.a.createElement("h1",null,"Edit interests"),c.a.createElement(ht,{setSelectActivities:s})),c.a.createElement("button",{className:"btn green",onClick:function(){return t(l)}},"Submit"))},_t=function(){return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:function(){return console.log("Submitted")}},c.a.createElement("h1",null,"Change password"),c.a.createElement(pt,{tab:"edit",data:{"Old Password":"","New Password":"","Confirm new password":""}}),c.a.createElement("button",{className:"btn green"},"Submit")))},yt=function(e){var t=e.deleteHadlerOnChange,a=e.deleteHandlerOnClick,n=e.wrongPassword,r=e.passwordToDelete;return c.a.createElement("div",null,c.a.createElement("form",null,c.a.createElement("h1",null,"Delete your profile"),c.a.createElement("h2",null,"Are you sure you want to delete your profile ?",c.a.createElement("br",null)," All your matchs will be lost..."),c.a.createElement("div",{className:"input-group"},c.a.createElement(pt,{tab:"edit",data:{Password:r},handler:t}),c.a.createElement("button",{type:"button",className:"green",onClick:a},"Submit"),n&&c.a.createElement("h2",{style:{color:"red",marginTop:"10px"}},"Wrong password"))))},jt=function(e){var t=e.switchTab;return c.a.createElement("div",null,c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return t(0)}},c.a.createElement("i",{className:"fa fa-user"}),"Overview"),c.a.createElement("hr",{class:"HRsettings"}),c.a.createElement("li",{onClick:function(){return t(1)}},c.a.createElement("i",{className:"fa fa-map-marker"}),"Edit Location"),c.a.createElement("hr",{class:"HRsettings"}),c.a.createElement("li",{onClick:function(){return t(2)}},c.a.createElement("i",{className:"fa fa-cog"}),"Edit Profile"),c.a.createElement("hr",{class:"HRsettings"}),c.a.createElement("li",{onClick:function(){return t(3)}},c.a.createElement("i",{className:"fa fa-list-alt"}),"Edit Interests"),c.a.createElement("hr",{class:"HRsettings"}),c.a.createElement("li",{onClick:function(){return t(4)}},c.a.createElement("i",{className:"fa fa-lock"}),"Change Password"),c.a.createElement("hr",{class:"HRsettings"}),c.a.createElement("li",{onClick:function(){return t(5)}},c.a.createElement("i",{className:"fa fa-minus-circle"}),"Delete profile")))},Nt=(a(172),function(){var e=ue().request,t=Object(i.b)(),a=I(),n=Object(r.useState)({code:null,name:null}),l=Object($.a)(n,2),s=l[0],o=l[1],u=Object(r.useState)(null),d=Object($.a)(u,2),m=d[0],p=d[1],f=Object(r.useState)(!1),E=Object($.a)(f,2),b=E[0],O=E[1],v=Object(r.useState)(""),h=Object($.a)(v,2),g=h[0],_=h[1],y=function(){var a=Object(z.a)(V.a.mark((function a(){var n;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!s||!m){a.next=8;break}return n="".concat(m.name,", ").concat(s.name),a.next=4,e("/api/user/location",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({location:n})});case 4:a.sent.success&&(O(!0),t(ie({updatedFields:{based_in:n}})),setTimeout((function(){return O(!1)}),3e3)),a.next=9;break;case 8:_("City or country isn't provided");case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return console.log({country:s,city:m}),c.a.createElement("div",{className:"LOCATION_TAB_CONTAINER"},c.a.createElement("div",{className:"LOCATION_TAB_COUNTRY"},c.a.createElement("h1",null,"Country/Region"),c.a.createElement("div",{style:{backgroundColor:"white"}},c.a.createElement(Se,{urlToFetch:"https://wft-geo-db.p.rapidapi.com/v1/geo/countries?namePrefix=",handler:function(e){o({code:e.value,name:e.label}),p(null)},type:"RAPID_API_COUNTRY",requestParams:a,noOptionsMessage:"No such country"}))),c.a.createElement("div",{className:"LOCATION_TAB_CITY"},c.a.createElement("h1",null,"City"),c.a.createElement("div",{style:{backgroundColor:s.name?"white":"inherit"}},c.a.createElement(Se,{urlToFetch:"https://wft-geo-db.p.rapidapi.com/v1/geo/cities?countryIds=".concat(s.code,"&namePrefix="),handler:function(e){return e?(p({code:e.value,name:e.label}),_("")):_("No city provided")},type:"RAPID_API_CITY",requestParams:a,noOptionsMessage:"No such city",isDisabled:!s.code}))),c.a.createElement("div",{className:"LOCATION_TAB_SUBMIT"},g&&c.a.createElement("h2",{style:{color:"grey"}},g),b&&c.a.createElement("h2",{style:{color:"white"}},"Updated"),c.a.createElement("button",{className:"green",onClick:y},"Submit")))}),St=function(){var e,t=Object(i.b)(),a=ue(),n=a.request,l=a.error,s=Object(i.c)((function(e){return e.loggedInUser})),o=Object(r.useState)(0),u=Object($.a)(o,2),d=u[0],f=u[1],E=Object(r.useState)({username:s.username,email:s.email,fullname:s.fullname,occupation:s.occupation,phone_number:s.phone_number}),b=Object($.a)(E,2),O=b[0],v=b[1],h=Object(r.useState)(!1),g=Object($.a)(h,2),_=g[0],y=g[1],j=Object(r.useState)(""),N=Object($.a)(j,2),S=N[0],k=N[1],T=Object(r.useState)(!1),C=Object($.a)(T,2),w=C[0],I=C[1],x=function(){var e=Object(z.a)(V.a.mark((function e(a){var r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,n("/api/user/info",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});case 3:(null===(r=e.sent)||void 0===r?void 0:r.success)&&y(!0),t(ie({updatedFields:O}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(z.a)(V.a.mark((function e(){var t;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("/api/user/delete",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:S})});case 2:(null===(t=e.sent)||void 0===t?void 0:t.success)&&(window.location.href="/login",window.location.reload(!0)),I(!0),k("");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(z.a)(V.a.mark((function e(a){var r,c,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],"POST"===(c=a?"POST":"DELETE")&&(r=a.map((function(e){return e.id}))),e.next=5,n("api/interest/",{method:c,headers:{"Content-Type":"application/json"},body:JSON.stringify({interests_ids:r})});case 5:(l=e.sent).success&&t(ie({updatedFields:{interests:l.interests}}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){return t.map((function(t){return delete e[t]})),e}((e=s,JSON.parse(JSON.stringify(e))),["id","ready","isAuthenticated","picture","interests","person_id","uuid","pictures"]);return c.a.createElement("div",{className:"settings-container"},c.a.createElement("div",{className:"left-column"},c.a.createElement(jt,{switchTab:function(e){return f(e)}})),c.a.createElement("div",{className:"settings-tab"},0===d&&c.a.createElement(Et,{info:s,adjustedOverwiew:L}),1===d&&c.a.createElement(Nt,null),2===d&&c.a.createElement(bt,{edit:O,editHandlerOnChange:function(e){var t=e.target.name;_&&y(!1);var a=e.target.value;v((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},t,a))}))},error:l,submitEdit:x,updatedInfo:_}),3===d&&c.a.createElement(gt,{sendNewActivities:D}),4===d&&c.a.createElement(_t,null),5===d&&c.a.createElement(yt,{deleteHadlerOnChange:function(e){var t;k(null===(t=e.target)||void 0===t?void 0:t.value)},deleteHandlerOnClick:A,wrongPassword:w,passwordToDelete:S})))},kt=function(){return c.a.createElement("div",null,c.a.createElement(Ce,null),c.a.createElement(St,null))},Tt=function(){return c.a.createElement("div",null,c.a.createElement(Ce,null),"About page")},Ct=(a(78),function(e){var t,a=e.chat_id,n=e.person_id,r=e.name,l=e.picture,s=e.latestMessage,o=e.unreadMessagesCount,u=e.openDialog,d=e.handleChatClick,m=e.empty,p=Object(i.c)((function(e){return e.loggedInUser})),f=Object(i.c)((function(e){return e.onlineUsers})),E=r===u?"CHAT_ROW__container CHAT_ROW__container_active":"CHAT_ROW__container";return m?c.a.createElement("div",null,c.a.createElement("h3",{style:{padding:"20px"}},"You have no chats as of now")):c.a.createElement("div",null,c.a.createElement("div",{className:E,onClick:d.bind(null,a)},c.a.createElement("div",{className:"CHAT_ROW__left"},c.a.createElement("img",{src:l})),c.a.createElement("div",{className:"CHAT_ROW__center"},c.a.createElement("div",{className:"CHAT_ROW_TITLE"},c.a.createElement("h4",null,r),f.ids.includes(n.toString())?c.a.createElement("i",{className:"fa fa-circle CHAT_ROW_ONLINE"}):""),c.a.createElement("h5",null,p.id===(null===s||void 0===s?void 0:s.sender_id)&&"You: ",(t=null===s||void 0===s?void 0:s.context)?t.length>34?t.toString().substring(0,36).concat("..."):t:"No messages yet")),c.a.createElement("div",{className:"CHAT_ROW__right"},c.a.createElement("p",null,"now"===(null===s||void 0===s?void 0:s.send_at)?"now":P(null===s||void 0===s?void 0:s.send_at,"chat")),o?c.a.createElement(Oe,{size:"smaller",status:"danger",content:o}):"")),c.a.createElement("hr",{className:"hr_chat"}))}),wt=function(e,t){var a,n;return(null===(a=e.latestMessage)||void 0===a?void 0:a.send_at)<(null===(n=t.latestMessage)||void 0===n?void 0:n.send_at)?1:-1},It=function(e){var t=e.chats,a=e.openDialog,n=e.handleChatClick,r=e.empty,l=function(e,t){var a=e.filter((function(e){return!e.latestMessage})),n=e.filter((function(e){return e.latestMessage}));return n.sort(t),[].concat(Object(d.a)(n),Object(d.a)(a))}(t,wt);return c.a.createElement("div",null,l.map((function(e){return c.a.createElement(Ct,{key:e.id,chat_id:e.room_id,name:e.username,person_id:e.person_id,picture:e.picture,latestMessage:e.latestMessage,unreadMessagesCount:e.unread,openDialog:a,handleChatClick:n,empty:r})})))},xt=(a(173),function(e){var t=e.date;return c.a.createElement(Re.a.div,{layout:!0},c.a.createElement("hr",{className:"hr-centered-text","data-content":t}))}),At=function(e){var t=e.type,a=e.context,n=e.isOwner,r=e.date,l="MESSAGES__chat-msg ";return n&&(l+="MESSAGES__owner"),t?c.a.createElement(xt,{date:r}):c.a.createElement(Re.a.div,{layout:!0,className:l},c.a.createElement("div",{className:"MESSAGES__chat-msg-content"},c.a.createElement("div",{class:"MESSAGES__chat-msg-text"},c.a.createElement("div",{className:"MESSAGES__chat-msg-text-context"},a),c.a.createElement("div",{className:"MESSAGES__chat-msg-date"},r))))},Dt=(a(174),function(e){var t,a=e.data,n=e.textInput,l=e.setOpenDialog,s=e.handleMessageSend,o=e.handleChange,u=(e.empty,Object(i.c)((function(e){return e.loggedInUser}))),d=Object(r.useRef)(null);return Object(r.useEffect)((function(){d.current.scrollIntoView({behavior:"auto"})}),[null===a||void 0===a||null===(t=a.messages)||void 0===t?void 0:t.length]),a?c.a.createElement("div",{className:"MESSAGES__container"},c.a.createElement("div",{className:"MESSAGES__title"},c.a.createElement("i",{className:"fa fa-caret-left MESSAGES_back_button",onClick:function(){return l(null)}}),c.a.createElement("h4",null,a.username),c.a.createElement("div",{className:"MESSAGES_title_picture"},c.a.createElement("img",{src:a.picture}))),c.a.createElement("div",{className:"MESSAGES__body"},a.messages.map((function(e){return c.a.createElement(At,{key:e.id,type:e.type,context:e.text,isOwner:+e.from===+u.id,date:e.date})})),c.a.createElement("div",{ref:d})),c.a.createElement("div",{className:"MESSAGES__send"},c.a.createElement("textarea",{value:n,onChange:o,name:"message",autoFocus:!0,rows:"1",className:"form-input MESSAGES_INPUT"}),c.a.createElement("i",{class:"fa fa-paper-plane MESSAGES_SEND",onClick:s.bind(null,a.room_id,u.id)}))):c.a.createElement("div",{className:"MESSAGES__container"},c.a.createElement("div",{ref:d}))}),Lt=function(e){var t=e.textInput,a=e.dialog,n=e.openDialog,l=e.handleChatClick,s=e.handleChange,o=e.handleMessageSend,u=e.setOpenDialog,d=Object(i.c)((function(e){return e.chats})),m=Object(i.c)((function(e){return e.messages}));if(Object(r.useEffect)((function(){u(null)}),[]),console.log({chats:d,messages:m}),!d.ready||!m.ready)return c.a.createElement("div",null);return c.a.createElement("div",{className:"DIRECT__page"},c.a.createElement(Ce,null),c.a.createElement("div",{className:"DIRECT__component"},c.a.createElement("div",{className:a?"DIRECT__left_side ".concat("DIRECT_SIDE_NOT_ACTIVE"):"DIRECT__left_side"},c.a.createElement(It,{chats:Object.values(d).filter((function(e){return"object"===typeof e})),openDialog:n,handleChatClick:l,empty:!0===d[0]})),c.a.createElement("div",{className:a?"DIRECT__right_side":"DIRECT__right_side ".concat("DIRECT_SIDE_NOT_ACTIVE")},c.a.createElement(Dt,{data:n?Object.values(m).filter((function(e){return"object"===typeof e})).filter((function(e){return+e.room_id===+n}))[0]:null,textInput:t,handleMessageSend:o,handleChange:s,setOpenDialog:u,empty:!0===m[0]}))))},Rt=(a(175),function(){var e=ue().request,t=Object(i.b)(),a=Object.values(Object(i.c)((function(e){return e.homePosts}))).sort(),n=Object(r.useState)(!0),l=Object($.a)(n,2),s=l[0],o=l[1],u=Object(r.useState)(null),d=Object($.a)(u,2),m=d[0],p=d[1],f=Object(r.useRef)(0),E=Object(r.useCallback)(function(){var t=Object(z.a)(V.a.mark((function t(a){var n,r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.length){t.next=2;break}return t.abrupt("return",[]);case 2:return n=a.map((function(e){return e.post_id})),r=n.map((function(t){return e("/api/like/".concat(t))})),t.next=6,Promise.all(r);case 6:return c=t.sent,t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[]),b=Object(r.useCallback)(Object(z.a)(V.a.mark((function a(){var n,r;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e("/api/post/home?limit=10&offset=".concat(f.current));case 2:if(!(n=a.sent).success){a.next=8;break}return a.next=6,E(n.posts);case 6:r=a.sent,t(oe({posts:n.posts,likes:r}));case 8:case"end":return a.stop()}}),a)}))),[e]),O=function(){var a=Object(z.a)(V.a.mark((function a(){var n,r;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return f.current+=10,a.next=3,e("/api/post/home?limit=5&offset=".concat(f.current));case 3:if(!(n=a.sent).success){a.next=14;break}return a.next=7,E(n.posts);case 7:return r=a.sent,a.next=10,C(300);case 10:if(n.posts.length){a.next=13;break}return o(!1),a.abrupt("return");case 13:t(oe({posts:n.posts,likes:r}));case 14:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return Object(r.useEffect)((function(){b()}),[b]),a.length?(a=a.filter((function(e){return!0!==e}))).length?c.a.createElement("div",null,c.a.createElement("div",{className:"FEED_FOOTER"}),c.a.createElement("div",{className:"FEED_CONTAINER"},c.a.createElement("div",{className:"FEED_SIDE"}),c.a.createElement("div",{className:"POSTS__container"},c.a.createElement("div",{className:"FEED_CENTER"},a.length?c.a.createElement(Ve.a,{dataLength:a.length,next:O,hasMore:s,loader:c.a.createElement("h4",null,"Loading...")},a.reverse().map((function(e){return c.a.createElement(ze,{key:e.post_id,id:e.post_id,picture:e.creatorInfo.picture,username:e.creatorInfo.username,fullname:e.creatorInfo.fullname,text:e.caption,numberOfLikes:e.number_of_likes,postedAt:e.created_at,likes:e.likes,type:"feed",setSelectedLikes:p})}))):null)),c.a.createElement("div",{className:"FEED_SIDE"}),m&&c.a.createElement(Ke,{closeHandler:p,info:m,title:"Likes"})),c.a.createElement("div",{className:"FEED_FOOTER"})):c.a.createElement("div",{className:"FEED_EMPTY"},c.a.createElement("h1",null,"Follow someone, to fill your feed")):null}),Pt=function(){return c.a.createElement("div",null,c.a.createElement(Ce,null),c.a.createElement(Rt,null))},Mt=(a(176),a(209)),Ut=(Object(et.a)({root:{width:300}}),Object(Ze.a)({root:{color:"#52af77",height:8},thumb:{height:24,width:24,backgroundColor:"#fff",border:"2px solid currentColor",marginTop:-8,marginLeft:-12,"&:focus, &:hover, &$active":{boxShadow:"inherit"}},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:8,borderRadius:4},rail:{height:8,borderRadius:4}})(Mt.a),a(71)),Ft=a(207),Ht=a(210),Bt=a(208),Gt=Object(Ze.a)({root:{color:Ut.a[400],"&$checked":{color:Ut.a[600]}},checked:{}})((function(e){return c.a.createElement(Bt.a,Object.assign({color:"default"},e))})),Wt=function(e){var t=e.state,a=e.handler,n=e.isDisabled,l=Object(r.useState)(!1),s=Object($.a)(l,2),o=(s[0],s[1],function(e){var t=e.target,n=t.name,r=t.checked;a("checkedCity"===n&&!0===r?function(e){for(var t in e)e[t]=!0;return Object(m.a)({},e)}:function(e){return Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},n,r))})});return c.a.createElement(Ft.a,{row:!0},!t.checkedCity&&!n&&c.a.createElement(Ht.a,{disabled:t.checkedCity,control:c.a.createElement(Gt,{checked:t.checkedCountry,onChange:o,name:"checkedCountry"}),label:"Only my country"}),!n&&c.a.createElement(Ht.a,{control:c.a.createElement(Gt,{checked:t.checkedCity,onChange:o,name:"checkedCity"}),label:"Only my city"}))},Jt=Object(Ze.a)({root:{color:Ut.a[400],"&$checked":{color:Ut.a[600]}},checked:{}})((function(e){return c.a.createElement(Bt.a,Object.assign({color:"default"},e))})),Kt=function(e){var t=e.state,a=e.label,n=e.disabled,r=e.handleChange;return c.a.createElement(Ft.a,{row:!0},c.a.createElement(Ht.a,{control:c.a.createElement(Jt,{d:!0,checked:t.checkedCountry,onChange:r}),label:a,disabled:n}))},qt=function(e){var t=e.base,a=void 0===t?"api/search":t,n=e.country,r=e.city,c=e.selectedInterests,l=e.matchAll,s=e.matchMyInterests,o=e.noDistance,i=e.myLocation,u=e.loggedInUser,d=a+"?interests=";return d+=function(e){var t="";return e.forEach((function(e,a,n){t+=e.interest_id||e.id,n.length!==a+1&&(t+=",")})),t}(s?u.interests:c),d+=l?"&matchAll=true":"&matchAll=false",d+=function(e){var t=e.noDistance,a=e.country,n=e.city,r=e.myLocation,c="";return Object.values(t).includes(!0)?(t.checkedCountry&&(c+="&country=".concat(r.split(", ")[2])),t.checkedCity||(c+="&city=any"),t.checkedCity&&(c+="&city=".concat(r.split(", ")[0],", ").concat(r.split(", ")[1]))):(a.code&&!n.name&&(c+="&country=".concat(a.name,"&city=any")),a.code&&n.name&&(c+="&country=".concat(a.name,"&city=").concat(n.name))),c||(c+="&country=any&city=any"),c}({noDistance:o,country:n,city:r,myLocation:i})},Yt=function(e){var t=e.info,a=e.showMatched,n=Object(X.g)(),r=t.fullname,l=t.occupation,s=t.picture,o=t.location,i=t.interests,u=t.username,d=t.matched,m=function(e,t){return e.length>t?function(e,t){return e.slice(0,t)}(e,t):e}(i,5),p=function(){return n.push("/".concat(u))};return c.a.createElement("div",{className:"SEARCH_RESULT_CARD"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header"},c.a.createElement("div",{className:"card-cover"}),c.a.createElement("img",{className:"card-avatar SEARCH_RESULT_PICTURE",src:s,alt:"avatar",onClick:p}),c.a.createElement("h1",{className:"card-fullname SEARCH_RESULT_FULLNAME",onClick:p},r),c.a.createElement("h2",{className:"card-username",onClick:p},"@",u),c.a.createElement("h2",{className:"card-jobtitle"},l)),c.a.createElement("div",{className:"SEARCH_CARD"},c.a.createElement("div",{className:"card-title"},c.a.createElement("div",{className:"card-location card-contact"},c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c.a.createElement("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"}),c.a.createElement("circle",{cx:"12",cy:"10",r:"3"})),c.a.createElement("h4",{className:"card-city"},o.split(",")[0])),c.a.createElement("div",{className:"card-number-match",onClick:function(){return a(t.interests)}},c.a.createElement("h4",null,d," matched"))),c.a.createElement("div",{className:"card-interests"},c.a.createElement("div",{className:"INTEREST_BAR_TITLE"},m.length?c.a.createElement("h4",null,"Interests"):null),c.a.createElement("div",{className:"INTEREST_BAR_BODY card-my-interests"},m.length?c.a.createElement("ul",null,m.map((function(e){return c.a.createElement("li",{style:{backgroundColor:e.interest_color,opacity:".8",color:"black"}},"".concat(e.interest_emoji," ").concat(e.interest_name))}))):null),i.length>5&&c.a.createElement("p",{className:"card-contact SEARCH_AND_MORE",style:{height:"30px"}},"And more...")))))},Vt=function(e){var t,a,n=e.data,r=e.showMatched;return c.a.createElement("div",{className:"SEARCH_RESULTS"},(t=n,a="matched",t.sort((function(e,t){return t[a]-e[a]}))).map((function(e){return c.a.createElement(Yt,{info:{username:e.username,fullname:e.fullname,occupation:e.occupation,picture:e.picture,location:e.based_in,matched:e.matched,interests:Object.values(e.interests)},showMatched:r})})))},zt=function(){var e=Object(i.b)(),t=ue().request,a=I(),n=Object(i.c)((function(e){return e.search})),l=Object(r.useState)({code:null,name:null}),s=Object($.a)(l,2),o=s[0],u=s[1],d=Object(r.useState)({code:null,name:null}),m=Object($.a)(d,2),p=m[0],f=m[1],E=Object(r.useState)([]),b=Object($.a)(E,2),O=b[0],v=b[1],h=Object(r.useState)([]),g=Object($.a)(h,2),_=g[0],y=g[1],j=Object(r.useState)(!1),N=Object($.a)(j,2),S=N[0],k=N[1],T=Object(r.useState)(!1),C=Object($.a)(T,2),w=C[0],x=C[1],A=Object(r.useState)(!1),D=Object($.a)(A,2),L=D[0],R=D[1],P=Object(r.useState)(!1),M=Object($.a)(P,2),U=M[0],F=M[1],H=Object(r.useState)({checkedCountry:!1,checkedCity:!1}),B=Object($.a)(H,2),G=B[0],W=B[1],J=Object(i.c)((function(e){return e.loggedInUser})),K=Object(r.useCallback)(Object(z.a)(V.a.mark((function e(){var a,n,r,c;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/interest");case 2:(a=e.sent).success&&(n=a.interests,r=Array.from(new Set(n.map((function(e){return e.interest_category})))),c=r.map((function(e){var t=n.filter((function(t){return t.interest_category===e}));return t=t.map((function(e){return{id:e.interest_id,value:e.interest_name,label:"".concat(e.interest_emoji," ").concat(e.interest_name),color:e.interest_color}})),{label:e,options:t}})),v(c));case 4:case"end":return e.stop()}}),e)}))),[t]);Object(r.useEffect)((function(){K()}),[K]);var q=function(){var a=Object(z.a)(V.a.mark((function a(){var n,r;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(_.length||w){a.next=2;break}return a.abrupt("return",(R(!0),void setTimeout((function(){return R(!1)}),3e3)));case 2:return n=qt({base:"api/search",country:o,city:p,selectedInterests:_,matchAll:S,matchMyInterests:w,noDistance:G,myLocation:J.based_in,loggedInUser:J}),a.next=5,t(n);case 5:r=a.sent,console.log({res:r}),e({type:"SET_SEARCH_RESULTS",payload:{results:{results:r.data}.results}});case 8:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),Y=function(e,t){return t(e.target.checked)};console.log({selectedInterests:_,matchMyInterests:w,showMatched:U});if(!O.length)return null;return c.a.createElement("div",{className:"SEARCH_CONTAINER"},c.a.createElement("div",{className:"SEARCH_SIDE"}),c.a.createElement("div",{className:"SEARCH_BODY"},c.a.createElement("div",{className:"SEARCH_TITLE"},c.a.createElement("h1",null,"Explore People")),c.a.createElement("div",{className:"SEARCH_OPTIONS"},c.a.createElement("div",{className:"SEARCH_OPTIONS_SEARCH"},c.a.createElement("h3",null,"Interests: "),!w&&c.a.createElement(Ot.a,{isMulti:!0,styles:vt.colourStyles,name:"colors",options:O,formatGroupLabel:function(e){return c.a.createElement("div",{style:vt.groupStyles},c.a.createElement("span",null,e.label),c.a.createElement("span",{style:vt.groupBadgeStyles},e.options.length))},className:"basic-multi-select",classNamePrefix:"select",onChange:function(e){return y(e)}}),c.a.createElement(Kt,{state:w,handleChange:function(e){return Y(e,x)},label:"Select mine"}),c.a.createElement(Kt,{state:S,handleChange:function(e){return Y(e,k)},label:"Match all"})),c.a.createElement("div",{className:"SEARCH_OPTIONS_LOCATION"},c.a.createElement("div",{className:"SEARCH_LOCATION"},c.a.createElement("div",{className:"SEARCH_LOCATION_COUNTRY"},c.a.createElement("h4",null,"Country/Region"),c.a.createElement("div",{style:{backgroundColor:G.checkedCity||G.checkedCountry?"black":"white"}},c.a.createElement(Se,{urlToFetch:"https://wft-geo-db.p.rapidapi.com/v1/geo/countries?namePrefix=",handler:function(e){var t=null===e||void 0===e?void 0:e.value,a=null===e||void 0===e?void 0:e.label;u({code:t,name:a}),f({code:null,name:null})},type:"RAPID_API_COUNTRY",requestParams:a,noOptionsMessage:"No such country",isDisabled:G.checkedCity||G.checkedCountry}))),c.a.createElement("div",{className:"SEARCH_LOCATION_CITY"},c.a.createElement("h4",null,"City"),c.a.createElement("div",{style:{backgroundColor:!o.code||G.checkedCity||G.checkedCountry?"black":"white"}},c.a.createElement(Se,{urlToFetch:"https://wft-geo-db.p.rapidapi.com/v1/geo/cities?countryIds=".concat(o.code,"&namePrefix="),handler:function(e){var t=null===e||void 0===e?void 0:e.value,a=null===e||void 0===e?void 0:e.label;f({code:t,name:a})},type:"RAPID_API_CITY",requestParams:a,noOptionsMessage:"No such city",isDisabled:!o.code||G.checkedCity||G.checkedCountry}))),c.a.createElement(Wt,{state:G,isDisabled:!J.based_in,handler:W}))),L&&c.a.createElement("p",{style:{color:"red"}},"No Interest Provided. You have to choose at least 1."),c.a.createElement("button",{className:"green",onClick:q},"Search"),c.a.createElement("hr",null)),n.dispatched&&1===Object.keys(n).length&&c.a.createElement("h1",{style:{marginTop:"10px"}},"No results found."),n.dispatched&&c.a.createElement(Vt,{data:Object.values(n).filter((function(e){return"object"===typeof e})),showMatched:F})),c.a.createElement("div",{className:"SEARCH_SIDE"}),U&&c.a.createElement(Ke,{closeHandler:F,info:function(e,t,a){var n=e.map((function(e){return e.id||e.interest_id}));return{data:t.filter((function(e){return console.log({outInterest:e,selectedIds:n}),n.includes(e.interest_id)}))}}(w?J.interests:_,U),title:"Matching Interests",type:"interests"}))},$t=function(){return c.a.createElement("div",null,c.a.createElement(Ce,null),c.a.createElement(zt,null))},Qt=(a(177),new WebSocket("wss://mellowgram.herokuapp.com/")),Xt=function(){var e=Object(i.b)(),t=ue().request,a=de().loading,n=Object(r.useState)(""),l=Object($.a)(n,2),s=l[0],o=l[1],u=Object(r.useState)(null),d=Object($.a)(u,2),m=d[0],p=d[1],f=Object(i.c)((function(e){return e.loggedInUser})),E=Object.values(Object(i.c)((function(e){return e.chats}))),b=function(e){o(e.target.value)},O=function(t,a){s&&(Qt.send(JSON.stringify({action:"SEND_MESSAGE",roomId:t,senderId:a,context:s,uuid:f.uuid})),e(se({info:{messageId:"//Do not know yet",roomId:t,senderId:a,context:s,date:"now"},me:f}))),o("")},v=function(t){var a=E.filter((function(e){return e.room_id===t}))[0];o(""),p(t),a.unread&&(e({type:"RESET_UNREAD_COUNTER",payload:{chatId:{chatId:t}.chatId}}),Qt.send(JSON.stringify({action:"SET_READ",chatId:t,userId:f.id})))},h=function(e){var t=e.me,a=e.other;Qt.send(JSON.stringify({action:"START_CHAT",me:t,other:a}))},g=Object(r.useCallback)(Object(z.a)(V.a.mark((function e(){var a;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("/api/apiKeys/rapidApi");case 2:(a=e.sent).success&&localStorage.setItem("RAPID_API_KEY",a.key);case 4:case"end":return e.stop()}}),e)}))),[t]),_=Object(r.useCallback)(function(){var a=Object(z.a)(V.a.mark((function a(n,r){var c;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!n.id){a.next=5;break}return a.next=3,t("/api/follow/following/".concat(f.username),{},r);case 3:(c=a.sent).success&&e({type:"SET_LOGGED_IN_FOLLOWING",payload:{users:(l={users:c.data,user:f.username}).users,user:l.user}});case 5:case"end":return a.stop()}var l}),a)})));return function(e,t){return a.apply(this,arguments)}}(),[t,f.id]);return Object(r.useEffect)((function(){Qt.onmessage=function(t){var a,n,r=JSON.parse(t.data);switch(console.log({message:r}),r.action){case"INFORMATION_IS_READY":Qt.send(JSON.stringify({action:"GET_CHATS",id:f.id})),Qt.send(JSON.stringify({action:"GET_ONLINE",user_id:f.id}));break;case"GET_CHATS":e({type:"GET_CHATS",payload:{chats:(n={chats:r.payload.rooms,messages:r.payload.messages,me:r.payload.id}).chats,messages:n.messages,me:n.me}}),e({type:"GET_MESSAGES",payload:{messages:(a={messages:r.payload.messages,chats:r.payload.rooms}).messages,chats:a.chats}}),e({type:"SET_UUID",payload:{uuid:{uuid:r.payload.uuid}.uuid}});break;case"GET_ONLINE":e({type:"SET_ONLINE",payload:{onlineIds:{onlineIds:r.payload}.onlineIds}});break;case"SEND_MESSAGE":var c=r.messageInfo;e(se({info:c,me:f}));break;case"START_CHAT":var l=r.chat;r.alreadyExists||e({type:"ADD_CHAT",payload:{chat:{chat:l}.chat}}),p(l.room_id)}},Qt.onclose=function(){console.log("Connection closed")}}),[]),Object(r.useEffect)((function(){_(f),g()}),[_,g]),a?c.a.createElement("div",null):f.isAuthenticated?c.a.createElement(Q.a,null,c.a.createElement("div",{className:"container"},c.a.createElement(X.d,null,c.a.createElement(X.a,{from:"/",exact:!0,to:"/".concat(f.username)}),c.a.createElement(X.a,{from:"/login",exact:!0,to:"/".concat(f.username)}),c.a.createElement(X.a,{from:"/signup",exact:!0,to:"/".concat(f.username)}),c.a.createElement(X.b,{exact:!0,path:"/account",render:function(e){return c.a.createElement(kt,e)}}),c.a.createElement(X.b,{exact:!0,path:"/about",render:function(e){return c.a.createElement(Tt,e)}}),c.a.createElement(X.b,{exact:!0,path:"/direct",render:function(e){return c.a.createElement(Lt,Object.assign({},e,{dialog:m,textInput:s,openDialog:m,handleChatClick:v,handleChange:b,handleMessageSend:O,setOpenDialog:p}))}}),c.a.createElement(X.b,{exact:!0,path:"/search",render:function(e){return c.a.createElement($t,e)}}),c.a.createElement(X.b,{exact:!0,path:"/home",render:function(e){return c.a.createElement(Pt,e)}}),c.a.createElement(X.b,{exact:!0,path:"/:username",render:function(e){return c.a.createElement(Qe,Object.assign({},e,{startMessagingHandler:h,setOpenDialog:p}))}}),c.a.createElement(X.b,{render:function(e){return c.a.createElement(Ae,e)}})))):c.a.createElement(Q.a,null,c.a.createElement("div",{className:"container"},c.a.createElement(X.d,null,c.a.createElement(X.a,{path:"/",exact:!0,to:"/login"}),c.a.createElement(X.b,{exact:!0,path:"/signup",render:function(e){return c.a.createElement(xe,e)}}),c.a.createElement(X.b,{exact:!0,path:"/login",render:function(e){return c.a.createElement(we,e)}}),c.a.createElement(X.b,{exact:!0,path:"/about",render:function(e){return c.a.createElement(Tt,e)}}),c.a.createElement(X.b,{exact:!0,path:"/:username",render:function(e){return c.a.createElement(Qe,e)}}),c.a.createElement(X.b,{render:function(e){return c.a.createElement(Ae,e)}}))))};Ue=Object(o.e)(q,Object(o.d)(Object(o.a)(u.a)));var Zt=c.a.createElement(i.a,{store:Ue},c.a.createElement(c.a.StrictMode,null,c.a.createElement(Xt,null)));s.a.render(Zt,document.getElementById("root"))},47:function(e,t,a){},53:function(e){e.exports=JSON.parse('{"a":["January","February","March","April","May","June","July","August","September","October","November","December"]}')},55:function(e,t,a){},73:function(e,t,a){},78:function(e,t,a){},86:function(e,t,a){}},[[121,1,2]]]);
//# sourceMappingURL=main.9d8de8d4.chunk.js.map